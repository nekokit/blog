<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="记录 sql 学习之路。"><title>SQL 基础</title>
<link rel=canonical href=https://blog.nkit.eu.org/p/sql-learning/><link rel=stylesheet href=/scss/style.min.be59c039484160f8a65844b183d18c33d9f2c00011712e85d007a063284c7816.css><meta property='og:title' content="SQL 基础"><meta property='og:description' content="记录 sql 学习之路。"><meta property='og:url' content='https://blog.nkit.eu.org/p/sql-learning/'><meta property='og:site_name' content='猫的笔记本'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='sql'><meta property='article:tag' content='数据库'><meta property='article:published_time' content='2022-10-26T10:09:01+08:00'><meta property='article:modified_time' content='2022-10-26T10:09:01+08:00'><meta property='og:image' content='https://blog.nkit.eu.org/p/sql-learning/cover.webp'><meta name=twitter:title content="SQL 基础"><meta name=twitter:description content="记录 sql 学习之路。"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://blog.nkit.eu.org/p/sql-learning/cover.webp'><link rel="shortcut icon" href=/favicon.svg><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300..700&family=Noto+Sans+SC:wght@100..900&display=swap" rel=stylesheet></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu59055f8de4c8e1d5d353c18f9c46d67a_89439_300x0_resize_box_3.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>猫的笔记本</a></h1><h2 class=site-description>猫遇见了喵</h2></div></header><ol class=menu-social><li><a href=https://github.com/nekokit target=_blank title=GitHub rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>主页</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>归档</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>搜索</span></a></li><li><a href=/about/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>关于</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>暗色模式</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#简介>简介</a></li><li><a href=#ddl---date-definition-language>DDL - Date Definition Language</a><ol><li><a href=#数据库操作>数据库操作</a><ol><li><a href=#创建数据库>创建数据库</a></li><li><a href=#删除数据库>删除数据库</a></li><li><a href=#查看所有数据库>查看所有数据库</a></li><li><a href=#使用数据库>使用数据库</a></li><li><a href=#查看数据库的定义语句>查看数据库的定义语句</a></li></ol></li><li><a href=#表操作>表操作</a><ol><li><a href=#创建表>创建表</a></li><li><a href=#删除表>删除表</a></li><li><a href=#查看所有表>查看所有表</a></li><li><a href=#查看表结构>查看表结构</a></li><li><a href=#查看表定义语句>查看表定义语句</a></li><li><a href=#修改表结构>修改表结构</a></li><li><a href=#设置外键>设置外键</a></li></ol></li></ol></li><li><a href=#dml---data-manipulation-language>DML - Data Manipulation Language</a><ol><li><a href=#insert>INSERT</a></li><li><a href=#update>UPDATE</a></li><li><a href=#delete>DELETE</a></li><li><a href=#truncate>TRUNCATE</a></li></ol></li><li><a href=#dql---data-query-language>DQL - Data Query Language</a><ol><li><a href=#基本查询>基本查询</a></li><li><a href=#使用函数>使用函数</a><ol><li><a href=#常用函数>常用函数</a></li><li><a href=#聚合函数>聚合函数</a></li></ol></li><li><a href=#条件子句>条件子句</a><ol><li><a href=#模糊查询>模糊查询</a></li><li><a href=#在集合中>在集合中</a></li><li><a href=#查询空值>查询空值</a></li></ol></li><li><a href=#联表查询>联表查询</a><ol><li><a href=#多表连接>多表连接</a></li><li><a href=#自连接>自连接</a></li></ol></li><li><a href=#子查询>子查询</a></li><li><a href=#分组>分组</a></li><li><a href=#排序>排序</a></li><li><a href=#分页>分页</a></li><li><a href=#短语顺序>短语顺序</a></li></ol></li><li><a href=#dcl---data-control-language>DCL - Data Control Language</a><ol><li><a href=#用户操作>用户操作</a></li><li><a href=#权限管理>权限管理</a></li></ol></li><li><a href=#知识点>知识点</a><ol><li><a href=#表类型>表类型</a></li><li><a href=#字符集>字符集</a></li><li><a href=#排序规则>排序规则</a></li><li><a href=#字段>字段</a></li><li><a href=#字段类型>字段类型</a><ol><li><a href=#数值>数值</a></li><li><a href=#字符串>字符串</a></li><li><a href=#时间和日期>时间和日期</a></li><li><a href=#null>NULL</a></li></ol></li><li><a href=#字段属性>字段属性</a></li><li><a href=#运算操作>运算操作</a><ol><li><a href=#算数运算>算数运算</a></li><li><a href=#比较运算>比较运算</a></li><li><a href=#逻辑运算>逻辑运算</a></li></ol></li><li><a href=#事务>事务</a><ol><li><a href=#acid-原则>ACID 原则</a></li><li><a href=#隔离所导致的问题>隔离所导致的问题</a></li><li><a href=#事务的操作>事务的操作</a></li></ol></li><li><a href=#索引>索引</a><ol><li><a href=#分类>分类</a></li><li><a href=#索引原则>索引原则</a></li></ol></li><li><a href=#数据库设计>数据库设计</a><ol><li><a href=#三大范式>三大范式</a></li></ol></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/sql-learning/><img src=/p/sql-learning/cover_hufa26cd53e5a5326a6bbe53b85ca463f1_9764_800x0_resize_q75_h2_box_2.webp srcset="/p/sql-learning/cover_hufa26cd53e5a5326a6bbe53b85ca463f1_9764_800x0_resize_q75_h2_box_2.webp 800w, /p/sql-learning/cover_hufa26cd53e5a5326a6bbe53b85ca463f1_9764_1600x0_resize_q75_h2_box_2.webp 1600w" width=800 height=376 loading=lazy alt="Featured image of post SQL 基础"></a></div><div class=article-details><header class=article-category><a href=/categories/technology/ style=background-color:#2a9d8f;color:#fff>Technology</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/sql-learning/>SQL 基础</a></h2><h3 class=article-subtitle>记录 sql 学习之路。</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>2022-10-26</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>阅读时长: 16 分钟</time></div></footer></div></header><section class=article-content><h2 id=简介>简介</h2><p>本文主要记录学习 SQL 的过程以及基础 SQL 语法。</p><h2 id=ddl---date-definition-language>DDL - Date Definition Language</h2><p>数据库定义语言用于数据库与表的创建，用于组织数据结构与逻辑。</p><h3 id=数据库操作>数据库操作</h3><h4 id=创建数据库>创建数据库</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>CREATE</span><span class=w> </span><span class=k>DATABASE</span><span class=w> </span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=w> </span><span class=o>`</span><span class=n>sql_study</span><span class=o>`</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>DEFAULT</span><span class=w> </span><span class=nb>CHARACTER</span><span class=w> </span><span class=k>SET</span><span class=w> </span><span class=n>utf8mb4</span><span class=w> </span><span class=k>COLLATE</span><span class=w> </span><span class=n>utf8mb4_0900_ai_ci</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 语句结构
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>CREATE</span><span class=w> </span><span class=k>DATABASE</span><span class=w> </span><span class=p>[</span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=p>]</span><span class=w> </span><span class=o>`</span><span class=err>${数据库名}</span><span class=o>`</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>DEFAULT</span><span class=w> </span><span class=nb>CHARACTER</span><span class=w> </span><span class=k>SET</span><span class=w> </span><span class=err>${字符集}</span><span class=w> </span><span class=k>COLLATE</span><span class=w> </span><span class=err>${排序}</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><style type=text/css>.notice{--root-color:#444;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#c33;--warning-content:#fee;--info-title:#fb7;--info-content:#fec;--note-title:#6be;--note-content:#e7f2fa;--tip-title:#5a5;--tip-content:#efe}@media(prefers-color-scheme:dark){.notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}}body.dark .notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:var(--root-color);background:var(--root-background)}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:var(--title-color);background:var(--title-background)}.notice.warning .notice-title{background:var(--warning-title)}.notice.warning{background:var(--warning-content)}.notice.info .notice-title{background:var(--info-title)}.notice.info{background:var(--info-content)}.notice.note .notice-title{background:var(--note-title)}.notice.note{background:var(--note-content)}.notice.tip .notice-title{background:var(--tip-title)}.notice.tip{background:var(--tip-content)}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style><div class="notice tip"><p class=notice-title><span class="icon-notice baseline"><svg xmlns="http://www.w3.org/2000/svg" viewBox="300.5 134 300 300"><path d="M551.281 252.36c0-3.32-1.172-6.641-3.515-8.985l-17.774-17.578c-2.344-2.344-5.469-3.711-8.789-3.711-3.32.0-6.445 1.367-8.789 3.71l-79.687 79.493-44.141-44.14c-2.344-2.344-5.469-3.712-8.79-3.712-3.32.0-6.444 1.368-8.788 3.711l-17.774 17.579c-2.343 2.343-3.515 5.664-3.515 8.984s1.172 6.445 3.515 8.789l70.704 70.703c2.343 2.344 5.664 3.711 8.789 3.711 3.32.0 6.64-1.367 8.984-3.71l106.055-106.056c2.343-2.343 3.515-5.468 3.515-8.789zM600.5 284c0 82.813-67.188 150-150 150-82.813.0-150-67.188-150-150 0-82.813 67.188-150 150-150 82.813.0 150 67.188 150 150z"/></svg>
</span>提示</p><p>在使用工具创建 SQL 时可能会出现如 <code>/*!40100 */</code> 的特殊注释，这里使用 DataGrip 连接 MySQL 创建，代表服务器 MySQL 版本大于 4.0.1 时执行。</p></div><div class="notice info"><p class=notice-title><span class="icon-notice baseline"><svg xmlns="http://www.w3.org/2000/svg" viewBox="92 59.5 300 300"><path d="M292 303.25V272c0-3.516-2.734-6.25-6.25-6.25H267v-1e2c0-3.516-2.734-6.25-6.25-6.25h-62.5c-3.516.0-6.25 2.734-6.25 6.25V197c0 3.516 2.734 6.25 6.25 6.25H217v62.5h-18.75c-3.516.0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h87.5c3.516.0 6.25-2.734 6.25-6.25zm-25-175V97c0-3.516-2.734-6.25-6.25-6.25h-37.5c-3.516.0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h37.5c3.516.0 6.25-2.734 6.25-6.25zm125 81.25c0 82.813-67.188 150-150 150-82.813.0-150-67.188-150-150 0-82.813 67.188-150 150-150 82.813.0 150 67.188 150 150z"/></svg>
</span>信息</p><p>创建数据库时最好加上 <code>IF NOT EXISTS</code> 条件，避免数据库已存在导致报错</p></div><h4 id=删除数据库>删除数据库</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>DROP</span><span class=w> </span><span class=k>DATABASE</span><span class=w> </span><span class=k>IF</span><span class=w> </span><span class=k>EXISTS</span><span class=w> </span><span class=o>`</span><span class=n>sql_study</span><span class=o>`</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 语句结构
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>DROP</span><span class=w> </span><span class=k>DATABASE</span><span class=w> </span><span class=p>[</span><span class=k>IF</span><span class=w> </span><span class=k>EXISTS</span><span class=p>]</span><span class=w> </span><span class=o>`</span><span class=err>${数据库名}</span><span class=o>`</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><div class="notice info"><p class=notice-title><span class="icon-notice baseline"><svg xmlns="http://www.w3.org/2000/svg" viewBox="92 59.5 300 300"><path d="M292 303.25V272c0-3.516-2.734-6.25-6.25-6.25H267v-1e2c0-3.516-2.734-6.25-6.25-6.25h-62.5c-3.516.0-6.25 2.734-6.25 6.25V197c0 3.516 2.734 6.25 6.25 6.25H217v62.5h-18.75c-3.516.0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h87.5c3.516.0 6.25-2.734 6.25-6.25zm-25-175V97c0-3.516-2.734-6.25-6.25-6.25h-37.5c-3.516.0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h37.5c3.516.0 6.25-2.734 6.25-6.25zm125 81.25c0 82.813-67.188 150-150 150-82.813.0-150-67.188-150-150 0-82.813 67.188-150 150-150 82.813.0 150 67.188 150 150z"/></svg>
</span>信息</p><p>删除数据库时最好加上 <code>IF EXISTS</code> 条件，避免数据库不存在导致报错</p></div><h4 id=查看所有数据库>查看所有数据库</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SHOW</span><span class=w> </span><span class=n>DATABAS</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=使用数据库>使用数据库</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=n>USE</span><span class=w> </span><span class=o>`</span><span class=n>sql_study</span><span class=o>`</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 语句结构
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>USE</span><span class=w> </span><span class=o>`</span><span class=err>${数据库名}</span><span class=o>`</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=查看数据库的定义语句>查看数据库的定义语句</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SHOW</span><span class=w> </span><span class=k>CREATE</span><span class=w> </span><span class=k>DATABASE</span><span class=w> </span><span class=o>`</span><span class=n>sql_study</span><span class=o>`</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 语句结构
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SHOW</span><span class=w> </span><span class=k>CREATE</span><span class=w> </span><span class=k>DATABASE</span><span class=w> </span><span class=o>`</span><span class=err>${数据库名}</span><span class=o>`</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=表操作>表操作</h3><h4 id=创建表>创建表</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=w> </span><span class=o>`</span><span class=n>user_info</span><span class=o>`</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>`</span><span class=n>id</span><span class=o>`</span><span class=w> </span><span class=nb>int</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=n>AUTO_INCREMENT</span><span class=w> </span><span class=k>COMMENT</span><span class=w> </span><span class=s1>&#39;序列号&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>`</span><span class=n>name</span><span class=o>`</span><span class=w> </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>20</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=s1>&#39;&#39;</span><span class=w> </span><span class=k>COMMENT</span><span class=w> </span><span class=s1>&#39;姓名&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>`</span><span class=n>age</span><span class=o>`</span><span class=w> </span><span class=nb>int</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=s1>&#39;0&#39;</span><span class=w> </span><span class=k>COMMENT</span><span class=w> </span><span class=s1>&#39;年龄&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=o>`</span><span class=n>id</span><span class=o>`</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>)</span><span class=w> </span><span class=n>ENGINE</span><span class=o>=</span><span class=n>InnoDB</span><span class=w> </span><span class=n>AUTO_INCREMENT</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=n>CHARSET</span><span class=o>=</span><span class=n>utf8mb4</span><span class=w> </span><span class=k>COLLATE</span><span class=o>=</span><span class=n>utf8mb4_0900_ai_ci</span><span class=w> </span><span class=k>COMMENT</span><span class=w> </span><span class=s1>&#39;用户表&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 语句结构
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=p>[</span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=p>]</span><span class=w> </span><span class=o>`</span><span class=err>${表名}</span><span class=o>`</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>`</span><span class=err>${字段名}</span><span class=o>`</span><span class=w> </span><span class=err>${字段类型}</span><span class=w> </span><span class=p>[</span><span class=err>${字段属性}</span><span class=p>]</span><span class=w> </span><span class=k>COMMENT</span><span class=w> </span><span class=s1>&#39;${字段备注}&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>`</span><span class=err>${字段名}</span><span class=o>`</span><span class=w> </span><span class=err>${字段类型}</span><span class=w> </span><span class=p>[</span><span class=err>${字段属性}</span><span class=p>]</span><span class=w> </span><span class=k>COMMENT</span><span class=w> </span><span class=s1>&#39;${字段备注}&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=o>`</span><span class=err>${字段名}</span><span class=o>`</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>)</span><span class=w> </span><span class=err>${引擎}</span><span class=w> </span><span class=p>[</span><span class=err>${表属性}</span><span class=p>]</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=n>CHARSET</span><span class=o>=</span><span class=err>${字符集}</span><span class=w> </span><span class=k>COLLATE</span><span class=o>=</span><span class=err>${排序规则}</span><span class=w> </span><span class=k>COMMENT</span><span class=w> </span><span class=s1>&#39;${表备注}&#39;</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><div class="notice info"><p class=notice-title><span class="icon-notice baseline"><svg xmlns="http://www.w3.org/2000/svg" viewBox="92 59.5 300 300"><path d="M292 303.25V272c0-3.516-2.734-6.25-6.25-6.25H267v-1e2c0-3.516-2.734-6.25-6.25-6.25h-62.5c-3.516.0-6.25 2.734-6.25 6.25V197c0 3.516 2.734 6.25 6.25 6.25H217v62.5h-18.75c-3.516.0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h87.5c3.516.0 6.25-2.734 6.25-6.25zm-25-175V97c0-3.516-2.734-6.25-6.25-6.25h-37.5c-3.516.0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h37.5c3.516.0 6.25-2.734 6.25-6.25zm125 81.25c0 82.813-67.188 150-150 150-82.813.0-150-67.188-150-150 0-82.813 67.188-150 150-150 82.813.0 150 67.188 150 150z"/></svg>
</span>信息</p><p>创建表时最好加上 <code>IF NOT EXISTS</code> 条件，避免表已存在导致报错</p></div><h4 id=删除表>删除表</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>DROP</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=k>IF</span><span class=w> </span><span class=k>EXISTS</span><span class=w> </span><span class=o>`</span><span class=k>user</span><span class=o>`</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 语句结构
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>DROP</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=p>[</span><span class=k>IF</span><span class=w> </span><span class=k>EXISTS</span><span class=p>]</span><span class=w> </span><span class=o>`</span><span class=err>${表名}</span><span class=o>`</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><div class="notice info"><p class=notice-title><span class="icon-notice baseline"><svg xmlns="http://www.w3.org/2000/svg" viewBox="92 59.5 300 300"><path d="M292 303.25V272c0-3.516-2.734-6.25-6.25-6.25H267v-1e2c0-3.516-2.734-6.25-6.25-6.25h-62.5c-3.516.0-6.25 2.734-6.25 6.25V197c0 3.516 2.734 6.25 6.25 6.25H217v62.5h-18.75c-3.516.0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h87.5c3.516.0 6.25-2.734 6.25-6.25zm-25-175V97c0-3.516-2.734-6.25-6.25-6.25h-37.5c-3.516.0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h37.5c3.516.0 6.25-2.734 6.25-6.25zm125 81.25c0 82.813-67.188 150-150 150-82.813.0-150-67.188-150-150 0-82.813 67.188-150 150-150 82.813.0 150 67.188 150 150z"/></svg>
</span>信息</p><p>删除表时最好加上 <code>IF EXISTS</code> 条件，避免表不存在导致报错</p></div><h4 id=查看所有表>查看所有表</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SHOW</span><span class=w> </span><span class=n>TABLES</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=查看表结构>查看表结构</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>DESC</span><span class=w> </span><span class=o>`</span><span class=k>user</span><span class=o>`</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 语句结构
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>DESC</span><span class=w> </span><span class=o>`</span><span class=err>${表名}</span><span class=o>`</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=查看表定义语句>查看表定义语句</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SHOW</span><span class=w> </span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=o>`</span><span class=k>user</span><span class=o>`</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 语句结构
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SHOW</span><span class=w> </span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=o>`</span><span class=err>${表名}</span><span class=o>`</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=修改表结构>修改表结构</h4><h5 id=修改表名>修改表名</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=o>`</span><span class=k>user</span><span class=o>`</span><span class=w> </span><span class=k>RENAME</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=o>`</span><span class=n>user1</span><span class=o>`</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 语句结构
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=o>`</span><span class=err>${旧表名}</span><span class=o>`</span><span class=w> </span><span class=k>RENAME</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=o>`</span><span class=err>${新表名}</span><span class=o>`</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h5 id=编辑字段>编辑字段</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- 添加字段
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=o>`</span><span class=k>user</span><span class=o>`</span><span class=w> </span><span class=k>ADD</span><span class=w> </span><span class=o>`</span><span class=n>score</span><span class=o>`</span><span class=w> </span><span class=nb>INT</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=s1>&#39;0&#39;</span><span class=w> </span><span class=k>COMMENT</span><span class=w> </span><span class=s1>&#39;成绩&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 修改字段类型
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=o>`</span><span class=k>user</span><span class=o>`</span><span class=w> </span><span class=k>MODIFY</span><span class=w> </span><span class=o>`</span><span class=n>score</span><span class=o>`</span><span class=w> </span><span class=nb>FLOAT</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=s1>&#39;0&#39;</span><span class=w> </span><span class=k>COMMENT</span><span class=w> </span><span class=s1>&#39;成绩&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 重命名字段
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=o>`</span><span class=k>user</span><span class=o>`</span><span class=w> </span><span class=n>CHANGE</span><span class=w> </span><span class=o>`</span><span class=n>score</span><span class=o>`</span><span class=w> </span><span class=o>`</span><span class=n>math_score</span><span class=o>`</span><span class=w> </span><span class=nb>FLOAT</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=s1>&#39;0&#39;</span><span class=w> </span><span class=k>COMMENT</span><span class=w> </span><span class=s1>&#39;成绩&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 语句结构
</span></span></span><span class=line><span class=cl><span class=c1>-- 添加字段
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=o>`</span><span class=err>${表名}</span><span class=o>`</span><span class=w> </span><span class=k>ADD</span><span class=w> </span><span class=o>`</span><span class=err>${字段名}</span><span class=o>`</span><span class=w> </span><span class=err>${字段类型}</span><span class=w> </span><span class=p>[</span><span class=err>${字段属性}</span><span class=p>]</span><span class=w> </span><span class=k>COMMENT</span><span class=w> </span><span class=s1>&#39;${字段备注}&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 修改字段类型
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=o>`</span><span class=err>${表名}</span><span class=o>`</span><span class=w> </span><span class=k>MODIFY</span><span class=w> </span><span class=o>`</span><span class=err>${字段名}</span><span class=o>`</span><span class=w> </span><span class=err>${新字段类型}</span><span class=w> </span><span class=p>[</span><span class=err>${新字段属性}</span><span class=p>]</span><span class=w> </span><span class=k>COMMENT</span><span class=w> </span><span class=s1>&#39;${新字段备注}&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 重命名字段
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=o>`</span><span class=err>${表名}</span><span class=o>`</span><span class=w> </span><span class=n>CHANGE</span><span class=w> </span><span class=o>`</span><span class=err>${旧字段名}</span><span class=o>`</span><span class=w> </span><span class=o>`</span><span class=err>${新字段名}</span><span class=o>`</span><span class=w> </span><span class=err>${新字段类型}</span><span class=w> </span><span class=p>[</span><span class=err>${新字段属性}</span><span class=p>]</span><span class=w> </span><span class=k>COMMENT</span><span class=w> </span><span class=s1>&#39;${新字段备注}&#39;</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><div class="notice warning"><p class=notice-title><span class="icon-notice baseline"><svg xmlns="http://www.w3.org/2000/svg" viewBox="126 76.5 300 300"><path d="M297.431 324.397v-34.255c0-3.245-2.344-5.95-5.358-5.95h-32.146c-3.014.0-5.358 2.705-5.358 5.95v34.255c0 3.245 2.344 5.95 5.358 5.95h32.146c3.014.0 5.358-2.705 5.358-5.95zm-.335-67.428 3.014-82.753c0-1.081-.502-2.524-1.674-3.425-1.005-.902-2.512-1.983-4.019-1.983h-36.834c-1.507.0-3.014 1.081-4.019 1.983-1.172.901-1.674 2.704-1.674 3.786l2.846 82.392c0 2.344 2.512 4.146 5.693 4.146h30.975c3.013.0 5.525-1.803 5.692-4.146zm-2.344-168.39L423.34 342.425c3.683 7.032 3.516 15.686-.335 22.717-3.85 7.031-10.883 11.358-18.417 11.358H147.413c-7.534.0-14.566-4.327-18.417-11.358-3.85-7.031-4.018-15.685-.335-22.716L257.248 88.578C260.93 81.188 268.13 76.5 276 76.5s15.069 4.688 18.752 12.08z"/></svg>
</span>警告</p><p>不要使用 <code>CHANGE</code> 字段进行字段重命名以外的操作</p><p>使用 <code>MODIFY</code> 来修改字段类型和属性</p></div><h5 id=删除字段>删除字段</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=o>`</span><span class=k>user</span><span class=o>`</span><span class=w> </span><span class=k>DROP</span><span class=w> </span><span class=o>`</span><span class=n>score</span><span class=o>`</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 语句结构
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=o>`</span><span class=err>${表名}</span><span class=o>`</span><span class=w> </span><span class=k>DROP</span><span class=w> </span><span class=o>`</span><span class=err>${字段名}</span><span class=o>`</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=设置外键>设置外键</h4><div class="notice info"><p class=notice-title><span class="icon-notice baseline"><svg xmlns="http://www.w3.org/2000/svg" viewBox="92 59.5 300 300"><path d="M292 303.25V272c0-3.516-2.734-6.25-6.25-6.25H267v-1e2c0-3.516-2.734-6.25-6.25-6.25h-62.5c-3.516.0-6.25 2.734-6.25 6.25V197c0 3.516 2.734 6.25 6.25 6.25H217v62.5h-18.75c-3.516.0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h87.5c3.516.0 6.25-2.734 6.25-6.25zm-25-175V97c0-3.516-2.734-6.25-6.25-6.25h-37.5c-3.516.0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h37.5c3.516.0 6.25-2.734 6.25-6.25zm125 81.25c0 82.813-67.188 150-150 150-82.813.0-150-67.188-150-150 0-82.813 67.188-150 150-150 82.813.0 150 67.188 150 150z"/></svg>
</span>信息</p><p>里演示的时数据库级别的外键，有引用关系时主表无法删除，故在实际生产中不建议使用</p><p>生产上数据库只是单纯的数据，只有字段和记录</p><p>生产上若想使用多张表数据，可使用应用程序来实现</p></div><p>方式一：
创建表的时候增加约束</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- 创建年级表
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=w> </span><span class=o>`</span><span class=n>grade</span><span class=o>`</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>`</span><span class=n>id</span><span class=o>`</span><span class=w> </span><span class=nb>int</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=n>AUTO_INCREMENT</span><span class=w> </span><span class=k>COMMENT</span><span class=w> </span><span class=s1>&#39;序列号&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>`</span><span class=n>name</span><span class=o>`</span><span class=w> </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>20</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=s1>&#39;&#39;</span><span class=w> </span><span class=k>COMMENT</span><span class=w> </span><span class=s1>&#39;年级名&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>`</span><span class=k>comment</span><span class=o>`</span><span class=w> </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>40</span><span class=p>)</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=k>COMMENT</span><span class=w> </span><span class=s1>&#39;备注&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=o>`</span><span class=n>id</span><span class=o>`</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>)</span><span class=w> </span><span class=n>ENGINE</span><span class=o>=</span><span class=n>InnoDB</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=n>CHARSET</span><span class=o>=</span><span class=n>utf8mb4</span><span class=w> </span><span class=k>COLLATE</span><span class=o>=</span><span class=n>utf8mb4_0900_ai_ci</span><span class=w> </span><span class=k>COMMENT</span><span class=w> </span><span class=s1>&#39;年级表表&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 创建学生表
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=w> </span><span class=o>`</span><span class=n>student</span><span class=o>`</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>`</span><span class=n>id</span><span class=o>`</span><span class=w> </span><span class=nb>int</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=n>AUTO_INCREMENT</span><span class=w> </span><span class=k>COMMENT</span><span class=w> </span><span class=s1>&#39;序列号&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>`</span><span class=n>age</span><span class=o>`</span><span class=w> </span><span class=nb>int</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=s1>&#39;0&#39;</span><span class=w> </span><span class=k>COMMENT</span><span class=w> </span><span class=s1>&#39;年龄&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>`</span><span class=n>name</span><span class=o>`</span><span class=w> </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>20</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=s1>&#39;&#39;</span><span class=w> </span><span class=k>COMMENT</span><span class=w> </span><span class=s1>&#39;姓名&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>`</span><span class=n>grade_id</span><span class=o>`</span><span class=w> </span><span class=nb>int</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=k>COMMENT</span><span class=w> </span><span class=s1>&#39;年级id&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=o>`</span><span class=n>id</span><span class=o>`</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c1>-- 定义外键 Key 并将添加引用字段
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>  </span><span class=k>KEY</span><span class=w> </span><span class=o>`</span><span class=n>FK_grade_id</span><span class=o>`</span><span class=w> </span><span class=p>(</span><span class=o>`</span><span class=n>grade_id</span><span class=o>`</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c1>-- 创建外键约束，指定被引用表和字段名
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>  </span><span class=k>CONSTRAINT</span><span class=w> </span><span class=o>`</span><span class=n>FK_grade_id</span><span class=o>`</span><span class=w> </span><span class=k>FOREIGN</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=o>`</span><span class=n>grade_id</span><span class=o>`</span><span class=p>)</span><span class=w> </span><span class=k>REFERENCES</span><span class=w> </span><span class=o>`</span><span class=n>grade</span><span class=o>`</span><span class=p>(</span><span class=o>`</span><span class=n>id</span><span class=o>`</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>)</span><span class=w> </span><span class=n>ENGINE</span><span class=o>=</span><span class=n>InnoDB</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=n>CHARSET</span><span class=o>=</span><span class=n>utf8mb4</span><span class=w> </span><span class=k>COLLATE</span><span class=o>=</span><span class=n>utf8mb4_0900_ai_ci</span><span class=w> </span><span class=k>COMMENT</span><span class=w> </span><span class=s1>&#39;年级表表&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 语句结构
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>  </span><span class=c1>-- 定义外键 Key 并将添加引用字段
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>  </span><span class=k>KEY</span><span class=w> </span><span class=o>`</span><span class=err>${</span><span class=n>FK_外键名</span><span class=err>}</span><span class=o>`</span><span class=w> </span><span class=p>(</span><span class=o>`</span><span class=err>${从字段名}</span><span class=o>`</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c1>-- 创建外键约束，指定被引用表和字段名
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>  </span><span class=k>CONSTRAINT</span><span class=w> </span><span class=o>`</span><span class=err>${</span><span class=n>FK_外键名</span><span class=err>}</span><span class=o>`</span><span class=w> </span><span class=k>FOREIGN</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=o>`</span><span class=err>${从字段名}</span><span class=o>`</span><span class=p>)</span><span class=w> </span><span class=k>REFERENCES</span><span class=w> </span><span class=o>`</span><span class=err>${主表名}</span><span class=o>`</span><span class=p>(</span><span class=o>`</span><span class=err>${主字段名}</span><span class=o>`</span><span class=p>)</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><div class="notice tip"><p class=notice-title><span class="icon-notice baseline"><svg xmlns="http://www.w3.org/2000/svg" viewBox="300.5 134 300 300"><path d="M551.281 252.36c0-3.32-1.172-6.641-3.515-8.985l-17.774-17.578c-2.344-2.344-5.469-3.711-8.789-3.711-3.32.0-6.445 1.367-8.789 3.71l-79.687 79.493-44.141-44.14c-2.344-2.344-5.469-3.712-8.79-3.712-3.32.0-6.444 1.368-8.788 3.711l-17.774 17.579c-2.343 2.343-3.515 5.664-3.515 8.984s1.172 6.445 3.515 8.789l70.704 70.703c2.343 2.344 5.664 3.711 8.789 3.711 3.32.0 6.64-1.367 8.984-3.71l106.055-106.056c2.343-2.343 3.515-5.468 3.515-8.789zM600.5 284c0 82.813-67.188 150-150 150-82.813.0-150-67.188-150-150 0-82.813 67.188-150 150-150 82.813.0 150 67.188 150 150z"/></svg>
</span>提示</p><p>约定成俗的，将外键定义成 <code>FK_</code> 开头</p><p>被引用数据的表称为 <code>主表</code></p><p>引用数据的表称为 <code>从表</code></p><p>删除直接删除主表会报错，必须先解除引用关系</p></div><p>方式一：
先创建正常表，再通过命令创建外键引用关系</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=o>`</span><span class=n>student</span><span class=o>`</span><span class=w> </span><span class=k>ADD</span><span class=w> </span><span class=k>CONSTRAINT</span><span class=w> </span><span class=o>`</span><span class=n>FK_grade_id</span><span class=o>`</span><span class=w> </span><span class=k>FOREIGN</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=o>`</span><span class=n>grade_id</span><span class=o>`</span><span class=p>)</span><span class=w> </span><span class=k>REFERENCES</span><span class=w> </span><span class=o>`</span><span class=n>grade</span><span class=o>`</span><span class=w> </span><span class=p>(</span><span class=o>`</span><span class=n>id</span><span class=o>`</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 语句结构
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=o>`</span><span class=err>${从表名}</span><span class=o>`</span><span class=w> </span><span class=k>ADD</span><span class=w> </span><span class=k>CONSTRAINT</span><span class=w> </span><span class=o>`</span><span class=err>${</span><span class=n>FK_外键名</span><span class=err>}</span><span class=o>`</span><span class=w> </span><span class=k>FOREIGN</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=o>`</span><span class=err>${从字段名}</span><span class=o>`</span><span class=p>)</span><span class=w> </span><span class=k>REFERENCES</span><span class=w> </span><span class=o>`</span><span class=err>${主表名}</span><span class=o>`</span><span class=w> </span><span class=p>(</span><span class=o>`</span><span class=err>${主字段名}</span><span class=o>`</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h2 id=dml---data-manipulation-language>DML - Data Manipulation Language</h2><h3 id=insert>INSERT</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- 插入单条数据
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=o>`</span><span class=n>grade</span><span class=o>`</span><span class=w> </span><span class=p>(</span><span class=o>`</span><span class=n>name</span><span class=o>`</span><span class=p>,</span><span class=o>`</span><span class=k>comment</span><span class=o>`</span><span class=p>)</span><span class=w> </span><span class=n>VALUE</span><span class=w> </span><span class=p>(</span><span class=s1>&#39;大一&#39;</span><span class=p>,</span><span class=s1>&#39;第一年&#39;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 插入多条数据
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=o>`</span><span class=n>grade</span><span class=o>`</span><span class=w> </span><span class=p>(</span><span class=o>`</span><span class=n>name</span><span class=o>`</span><span class=p>,</span><span class=o>`</span><span class=k>comment</span><span class=o>`</span><span class=p>)</span><span class=w> </span><span class=n>VALUE</span><span class=w> </span><span class=p>(</span><span class=s1>&#39;大二&#39;</span><span class=p>,</span><span class=s1>&#39;第二年&#39;</span><span class=p>),(</span><span class=s1>&#39;大三&#39;</span><span class=p>,</span><span class=s1>&#39;第三年&#39;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 语句结构
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=o>`</span><span class=err>${表名}</span><span class=o>`</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=o>`</span><span class=err>${字段}</span><span class=o>`</span><span class=p>,</span><span class=o>`</span><span class=err>${字段}</span><span class=o>`</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>VALUE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=s1>&#39;${值}&#39;</span><span class=p>,</span><span class=s1>&#39;${值}&#39;</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=s1>&#39;${值}&#39;</span><span class=p>,</span><span class=s1>&#39;${值}&#39;</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><div class="notice info"><p class=notice-title><span class="icon-notice baseline"><svg xmlns="http://www.w3.org/2000/svg" viewBox="92 59.5 300 300"><path d="M292 303.25V272c0-3.516-2.734-6.25-6.25-6.25H267v-1e2c0-3.516-2.734-6.25-6.25-6.25h-62.5c-3.516.0-6.25 2.734-6.25 6.25V197c0 3.516 2.734 6.25 6.25 6.25H217v62.5h-18.75c-3.516.0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h87.5c3.516.0 6.25-2.734 6.25-6.25zm-25-175V97c0-3.516-2.734-6.25-6.25-6.25h-37.5c-3.516.0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h37.5c3.516.0 6.25-2.734 6.25-6.25zm125 81.25c0 82.813-67.188 150-150 150-82.813.0-150-67.188-150-150 0-82.813 67.188-150 150-150 82.813.0 150 67.188 150 150z"/></svg>
</span>信息</p><p>数据会与字段一一匹配</p><p>当没有指定字段名时，将会按照所有字段顺序匹配</p></div><h3 id=update>UPDATE</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>UPDATE</span><span class=w> </span><span class=o>`</span><span class=n>student</span><span class=o>`</span><span class=w> </span><span class=k>SET</span><span class=w> </span><span class=o>`</span><span class=n>name</span><span class=o>`=</span><span class=s1>&#39;李四&#39;</span><span class=p>,</span><span class=o>`</span><span class=n>age</span><span class=o>`=</span><span class=s1>&#39;22&#39;</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=o>`</span><span class=n>name</span><span class=o>`=</span><span class=s1>&#39;李4&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 语句结构
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>UPDATE</span><span class=w> </span><span class=o>`</span><span class=err>${表名}</span><span class=o>`</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>SET</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>`</span><span class=err>${字段}</span><span class=o>`=</span><span class=s1>&#39;${值}&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>`</span><span class=err>${字段}</span><span class=o>`=</span><span class=s1>&#39;${值}&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>[</span><span class=k>WHERE</span><span class=w> </span><span class=err>${条件}</span><span class=p>];</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><div class="notice warning"><p class=notice-title><span class="icon-notice baseline"><svg xmlns="http://www.w3.org/2000/svg" viewBox="126 76.5 300 300"><path d="M297.431 324.397v-34.255c0-3.245-2.344-5.95-5.358-5.95h-32.146c-3.014.0-5.358 2.705-5.358 5.95v34.255c0 3.245 2.344 5.95 5.358 5.95h32.146c3.014.0 5.358-2.705 5.358-5.95zm-.335-67.428 3.014-82.753c0-1.081-.502-2.524-1.674-3.425-1.005-.902-2.512-1.983-4.019-1.983h-36.834c-1.507.0-3.014 1.081-4.019 1.983-1.172.901-1.674 2.704-1.674 3.786l2.846 82.392c0 2.344 2.512 4.146 5.693 4.146h30.975c3.013.0 5.525-1.803 5.692-4.146zm-2.344-168.39L423.34 342.425c3.683 7.032 3.516 15.686-.335 22.717-3.85 7.031-10.883 11.358-18.417 11.358H147.413c-7.534.0-14.566-4.327-18.417-11.358-3.85-7.031-4.018-15.685-.335-22.716L257.248 88.578C260.93 81.188 268.13 76.5 276 76.5s15.069 4.688 18.752 12.08z"/></svg>
</span>警告</p><p>修改数据时<strong>一定要带条件</strong></p><p>不带条件<strong>默认修改所有记录</strong></p><p>每一行条件结果为一个布尔值，结果为 <code>True</code> 的行才会修改</p></div><h3 id=delete>DELETE</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>DELETE</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=o>`</span><span class=n>student</span><span class=o>`</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=o>`</span><span class=n>id</span><span class=o>`=</span><span class=s1>&#39;5&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 语句结构
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>DELETE</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=o>`</span><span class=err>${表名}</span><span class=o>`</span><span class=w> </span><span class=p>[</span><span class=k>WHERE</span><span class=w> </span><span class=err>${条件}</span><span class=p>];</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><div class="notice warning"><p class=notice-title><span class="icon-notice baseline"><svg xmlns="http://www.w3.org/2000/svg" viewBox="126 76.5 300 300"><path d="M297.431 324.397v-34.255c0-3.245-2.344-5.95-5.358-5.95h-32.146c-3.014.0-5.358 2.705-5.358 5.95v34.255c0 3.245 2.344 5.95 5.358 5.95h32.146c3.014.0 5.358-2.705 5.358-5.95zm-.335-67.428 3.014-82.753c0-1.081-.502-2.524-1.674-3.425-1.005-.902-2.512-1.983-4.019-1.983h-36.834c-1.507.0-3.014 1.081-4.019 1.983-1.172.901-1.674 2.704-1.674 3.786l2.846 82.392c0 2.344 2.512 4.146 5.693 4.146h30.975c3.013.0 5.525-1.803 5.692-4.146zm-2.344-168.39L423.34 342.425c3.683 7.032 3.516 15.686-.335 22.717-3.85 7.031-10.883 11.358-18.417 11.358H147.413c-7.534.0-14.566-4.327-18.417-11.358-3.85-7.031-4.018-15.685-.335-22.716L257.248 88.578C260.93 81.188 268.13 76.5 276 76.5s15.069 4.688 18.752 12.08z"/></svg>
</span>警告</p><p>删除表中的记录一般不使用 <code>DELETE</code> 语句</p><p>生产环境中删除数据一般使用 <code>is_delete</code> 字段作为标识符进行伪删除</p></div><h3 id=truncate>TRUNCATE</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- 清空数据表，结构与外键约束不变
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>TRUNCATE</span><span class=w> </span><span class=o>`</span><span class=n>test</span><span class=o>`</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 语句结构
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>TRUNCATE</span><span class=w> </span><span class=o>`</span><span class=err>${表名}</span><span class=o>`</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><div class="notice tip"><p class=notice-title><span class="icon-notice baseline"><svg xmlns="http://www.w3.org/2000/svg" viewBox="300.5 134 300 300"><path d="M551.281 252.36c0-3.32-1.172-6.641-3.515-8.985l-17.774-17.578c-2.344-2.344-5.469-3.711-8.789-3.711-3.32.0-6.445 1.367-8.789 3.71l-79.687 79.493-44.141-44.14c-2.344-2.344-5.469-3.712-8.79-3.712-3.32.0-6.444 1.368-8.788 3.711l-17.774 17.579c-2.343 2.343-3.515 5.664-3.515 8.984s1.172 6.445 3.515 8.789l70.704 70.703c2.343 2.344 5.664 3.711 8.789 3.711 3.32.0 6.64-1.367 8.984-3.71l106.055-106.056c2.343-2.343 3.515-5.468 3.515-8.789zM600.5 284c0 82.813-67.188 150-150 150-82.813.0-150-67.188-150-150 0-82.813 67.188-150 150-150 82.813.0 150 67.188 150 150z"/></svg>
</span>提示</p><p>TRUNCATE 与 DELETE 的区别</p><ul><li>都能删除数据</li><li>都会保留表结构</li><li>TRUNCATE 会重新设置自增列</li><li>DELETE 不会重新设置自增列</li><li>TRUNCATE 不会影响事务</li><li>DELETE 会影响事务</li></ul></div><h2 id=dql---data-query-language>DQL - Data Query Language</h2><p>数据库中最核心的语言，语句： <code>SELECT</code> 。</p><h3 id=基本查询>基本查询</h3><p>查询数据库：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- 查询所有字段和记录
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=o>`</span><span class=n>student</span><span class=o>`</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 查询指定字段和记录
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>`</span><span class=n>name</span><span class=o>`</span><span class=p>,</span><span class=o>`</span><span class=n>grade_id</span><span class=o>`</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=o>`</span><span class=n>student</span><span class=o>`</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=o>`</span><span class=n>id</span><span class=o>`=</span><span class=s1>&#39;2&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 使用字段别名
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>`</span><span class=n>name</span><span class=o>`</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=s1>&#39;学生姓名&#39;</span><span class=p>,</span><span class=o>`</span><span class=n>grade_id</span><span class=o>`</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=s1>&#39;年级id&#39;</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=o>`</span><span class=n>student</span><span class=o>`</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 语句结构
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>`</span><span class=err>${字段名}</span><span class=o>`</span><span class=w> </span><span class=p>[</span><span class=k>AS</span><span class=w> </span><span class=s1>&#39;${字段别名}&#39;</span><span class=p>],</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>`</span><span class=err>${字段名}</span><span class=o>`</span><span class=w> </span><span class=p>[</span><span class=k>AS</span><span class=w> </span><span class=s1>&#39;${字段别名}&#39;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>FROM</span><span class=w> </span><span class=o>`</span><span class=err>${表名}</span><span class=o>`</span><span class=w> </span><span class=p>[</span><span class=k>AS</span><span class=w> </span><span class=s1>&#39;${表别名}&#39;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>[</span><span class=k>WHERE</span><span class=w> </span><span class=err>${条件}</span><span class=p>];</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>除了查询数据库中的数据外， SELECT 还能查询一些其他项目：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- 去重结果
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=k>DISTINCT</span><span class=w> </span><span class=o>`</span><span class=n>name</span><span class=o>`</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=o>`</span><span class=n>student</span><span class=o>`</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 查询函数结果
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=k>VERSION</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 查询计算结果
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=mi>10</span><span class=o>*</span><span class=mi>2</span><span class=o>+</span><span class=mi>5</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=s1>&#39;计算结果&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 查询系统变量
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>@@</span><span class=n>auto_increment_increment</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=使用函数>使用函数</h3><h4 id=常用函数>常用函数</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=k>ABS</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>);</span><span class=w>        </span><span class=c1>-- 绝对值
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=n>CEILING</span><span class=p>(</span><span class=mi>9</span><span class=p>.</span><span class=mi>3</span><span class=p>);</span><span class=w>   </span><span class=c1>-- 向上取整
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=n>FLOOR</span><span class=p>(</span><span class=mi>9</span><span class=p>.</span><span class=mi>3</span><span class=p>);</span><span class=w>     </span><span class=c1>-- 向下取整
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=n>RAND</span><span class=p>();</span><span class=w>         </span><span class=c1>-- 生成随机数
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=n>SIGN</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span><span class=w>        </span><span class=c1>-- 判断符号
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=k>LENGTH</span><span class=p>(</span><span class=s1>&#39;hello,word!&#39;</span><span class=p>);</span><span class=w>                 </span><span class=c1>-- 计算字符串长度
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=k>INSERT</span><span class=p>(</span><span class=s1>&#39;hello,word!&#39;</span><span class=p>,</span><span class=mi>7</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=s1>&#39;neko&#39;</span><span class=p>);</span><span class=w>      </span><span class=c1>-- 删除插入字符串
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=k>REPLACE</span><span class=p>(</span><span class=s1>&#39;hello,word!&#39;</span><span class=p>,</span><span class=s1>&#39;word&#39;</span><span class=p>,</span><span class=s1>&#39;neko&#39;</span><span class=p>);</span><span class=w>  </span><span class=c1>-- 替换字符串
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=k>UPPER</span><span class=p>(</span><span class=s1>&#39;hello,word!&#39;</span><span class=p>);</span><span class=w>  </span><span class=c1>-- 转为大写
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=k>LOWER</span><span class=p>(</span><span class=s1>&#39;INSERT&#39;</span><span class=p>);</span><span class=w>       </span><span class=c1>-- 转为小写
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=n>CURDATE</span><span class=p>();</span><span class=w>   </span><span class=c1>-- 当前日期
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=n>NOW</span><span class=p>();</span><span class=w>       </span><span class=c1>-- 当前时间
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=k>LOCALTIME</span><span class=p>();</span><span class=w> </span><span class=c1>-- 本地时间
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=n>SYSDATE</span><span class=p>();</span><span class=w>   </span><span class=c1>-- 系统日期
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=k>USER</span><span class=p>();</span><span class=w>          </span><span class=c1>-- 当前用户
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=k>VERSION</span><span class=p>();</span><span class=w>       </span><span class=c1>-- 当前版本
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 拼接字段
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=n>CONCAT</span><span class=p>(</span><span class=s1>&#39;姓名：&#39;</span><span class=p>,</span><span class=o>`</span><span class=n>name</span><span class=o>`</span><span class=p>,</span><span class=s1>&#39;；年级id：&#39;</span><span class=p>,</span><span class=o>`</span><span class=n>grade_id</span><span class=o>`</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=err>学生信息</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=o>`</span><span class=n>student</span><span class=o>`</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 数据加密
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=o>`</span><span class=n>testmd5</span><span class=o>`</span><span class=p>(</span><span class=o>`</span><span class=n>id</span><span class=o>`</span><span class=p>,</span><span class=o>`</span><span class=k>user</span><span class=o>`</span><span class=p>,</span><span class=o>`</span><span class=n>pwd</span><span class=o>`</span><span class=p>)</span><span class=w> </span><span class=k>VALUES</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=o>`</span><span class=n>neko</span><span class=o>`</span><span class=p>,</span><span class=n>MD5</span><span class=p>(</span><span class=s1>&#39;123456&#39;</span><span class=p>))</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 函数语法
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=err>${函数名}</span><span class=p>(</span><span class=err>${参数}</span><span class=p>)</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=聚合函数>聚合函数</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=k>COUNT</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=o>`</span><span class=n>student</span><span class=o>`</span><span class=p>;</span><span class=w>       </span><span class=c1>-- 统计所有的字段，不会忽略 BULL 值，慢
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=k>COUNT</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=o>`</span><span class=n>student</span><span class=o>`</span><span class=p>;</span><span class=w>       </span><span class=c1>-- 忽略所有的字段，用 1 代替，不会忽略 NULL 值，最快
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=k>COUNT</span><span class=p>(</span><span class=o>`</span><span class=n>name</span><span class=o>`</span><span class=p>)</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=o>`</span><span class=n>student</span><span class=o>`</span><span class=p>;</span><span class=w>  </span><span class=c1>-- 值统计指定的字段，会忽略 NULL 值，快
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=k>SUM</span><span class=p>(</span><span class=n>age</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=s1>&#39;年龄总和&#39;</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=o>`</span><span class=n>student</span><span class=o>`</span><span class=p>;</span><span class=w>  </span><span class=c1>-- 求和
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=k>AVG</span><span class=p>(</span><span class=n>age</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=s1>&#39;年龄总和&#39;</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=o>`</span><span class=n>student</span><span class=o>`</span><span class=p>;</span><span class=w>  </span><span class=c1>-- 平均
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=k>MAX</span><span class=p>(</span><span class=n>age</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=s1>&#39;年龄总和&#39;</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=o>`</span><span class=n>student</span><span class=o>`</span><span class=p>;</span><span class=w>  </span><span class=c1>-- 最高
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=k>MIN</span><span class=p>(</span><span class=n>age</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=s1>&#39;年龄总和&#39;</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=o>`</span><span class=n>student</span><span class=o>`</span><span class=p>;</span><span class=w>  </span><span class=c1>-- 最低
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 函数语法
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=err>${函数名}</span><span class=p>(</span><span class=err>${参数}</span><span class=p>)</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=条件子句>条件子句</h3><h4 id=模糊查询>模糊查询</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- % 表示任意个字符
</span></span></span><span class=line><span class=cl><span class=c1>-- _ 表示一个字符
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>`</span><span class=n>name</span><span class=o>`</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=o>`</span><span class=n>student</span><span class=o>`</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=o>`</span><span class=n>name</span><span class=o>`</span><span class=w> </span><span class=k>LIKE</span><span class=w> </span><span class=s1>&#39;王%&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 语句结构
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>WHERE</span><span class=w> </span><span class=o>`</span><span class=err>${字段名}</span><span class=o>`</span><span class=w> </span><span class=k>LIKE</span><span class=w> </span><span class=err>${匹配字符}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=在集合中>在集合中</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- IN 后面的合集应为一个具体的值
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>`</span><span class=n>name</span><span class=o>`</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=o>`</span><span class=n>student</span><span class=o>`</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=o>`</span><span class=n>id</span><span class=o>`</span><span class=w> </span><span class=k>IN</span><span class=w> </span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>3</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 语句结构
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>WHERE</span><span class=w> </span><span class=o>`</span><span class=err>${字段名}</span><span class=o>`</span><span class=w> </span><span class=k>IN</span><span class=w> </span><span class=err>${集合}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=查询空值>查询空值</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- 应考虑 NULL 和空字符串两种情况
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>`</span><span class=n>id</span><span class=o>`</span><span class=p>,</span><span class=o>`</span><span class=n>name</span><span class=o>`</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=o>`</span><span class=n>student</span><span class=o>`</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=o>`</span><span class=n>name</span><span class=o>`=</span><span class=s1>&#39;&#39;</span><span class=w> </span><span class=k>OR</span><span class=w> </span><span class=o>`</span><span class=n>name</span><span class=o>`</span><span class=w> </span><span class=k>IS</span><span class=w> </span><span class=k>NULL</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 语句结构
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>WHERE</span><span class=w> </span><span class=o>`</span><span class=err>${字段名}</span><span class=o>`=</span><span class=s1>&#39;&#39;</span><span class=w> </span><span class=k>OR</span><span class=w> </span><span class=o>`</span><span class=err>${字段名}</span><span class=o>`</span><span class=w> </span><span class=k>IS</span><span class=w> </span><span class=k>NULL</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=联表查询>联表查询</h3><h4 id=多表连接>多表连接</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- 查询多个表的情况，应先从两个表的连接写起
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=o>`</span><span class=n>id</span><span class=o>`</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=s1>&#39;学生id&#39;</span><span class=p>,</span><span class=n>s</span><span class=p>.</span><span class=o>`</span><span class=n>name</span><span class=o>`</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=s1>&#39;学生姓名&#39;</span><span class=p>,</span><span class=k>g</span><span class=p>.</span><span class=o>`</span><span class=n>name</span><span class=o>`</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=s1>&#39;年级&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=o>`</span><span class=n>student</span><span class=o>`</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>INNER</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=o>`</span><span class=n>grade</span><span class=o>`</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=k>g</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>ON</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>grade_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>g</span><span class=p>.</span><span class=n>id</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 语句结构
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=p>[</span><span class=err>${表名</span><span class=o>/</span><span class=err>表别名}</span><span class=p>.]</span><span class=o>`</span><span class=err>${字段名}</span><span class=o>`</span><span class=w> </span><span class=p>[</span><span class=k>AS</span><span class=w> </span><span class=s1>&#39;${字段别名}&#39;</span><span class=p>],</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>...,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>[</span><span class=err>${表名</span><span class=o>/</span><span class=err>表别名}</span><span class=p>.]</span><span class=o>`</span><span class=err>${字段名}</span><span class=o>`</span><span class=w> </span><span class=p>[</span><span class=k>AS</span><span class=w> </span><span class=s1>&#39;${字段别名}&#39;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=o>`</span><span class=err>${表名}</span><span class=o>`</span><span class=w> </span><span class=p>[[</span><span class=k>AS</span><span class=p>]</span><span class=w> </span><span class=err>${表别名}</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>${联表方式}</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=o>`</span><span class=err>${表名}</span><span class=o>`</span><span class=w> </span><span class=p>[[</span><span class=k>AS</span><span class=p>]</span><span class=w> </span><span class=err>${表别名}</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>ON</span><span class=w> </span><span class=p>[</span><span class=err>${表名</span><span class=o>/</span><span class=err>表别名}</span><span class=p>.]</span><span class=o>`</span><span class=err>${字段名}</span><span class=o>`</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=err>${表名</span><span class=o>/</span><span class=err>表别名}</span><span class=p>.]</span><span class=o>`</span><span class=err>${字段名}</span><span class=o>`</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>${联表方式}</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=o>`</span><span class=err>${表名}</span><span class=o>`</span><span class=w> </span><span class=p>[[</span><span class=k>AS</span><span class=p>]</span><span class=w> </span><span class=err>${表别名}</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>ON</span><span class=w> </span><span class=p>[</span><span class=err>${表名</span><span class=o>/</span><span class=err>表别名}</span><span class=p>.]</span><span class=o>`</span><span class=err>${字段名}</span><span class=o>`</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=err>${表名</span><span class=o>/</span><span class=err>表别名}</span><span class=p>.]</span><span class=o>`</span><span class=err>${字段名}</span><span class=o>`</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>[</span><span class=k>WHERE</span><span class=w> </span><span class=err>${条件}</span><span class=p>]</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>联表操作包含 7 种 JOIN 类型，详细请查看：
<a class=link href=../join-in-database>数据库中的 7 种 join 操作</a></p><h4 id=自连接>自连接</h4><p>有这样一张表：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>create</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>exists</span><span class=w> </span><span class=o>`</span><span class=n>category</span><span class=o>`</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>`</span><span class=n>category_id</span><span class=o>`</span><span class=w> </span><span class=nb>int</span><span class=w> </span><span class=n>auto_increment</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>`</span><span class=n>pid</span><span class=o>`</span><span class=w> </span><span class=nb>int</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>`</span><span class=n>name</span><span class=o>`</span><span class=w> </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>40</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>primary</span><span class=w> </span><span class=k>key</span><span class=w> </span><span class=p>(</span><span class=o>`</span><span class=n>category_id</span><span class=o>`</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>);</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><div class=table-wrapper><table><thead><tr><th>category_id</th><th>pid</th><th>name</th></tr></thead><tbody><tr><td>2</td><td>1</td><td>信息技术</td></tr><tr><td>3</td><td>1</td><td>软件开发</td></tr><tr><td>4</td><td>3</td><td>数据库</td></tr><tr><td>5</td><td>1</td><td>美术设计</td></tr><tr><td>6</td><td>3</td><td>Web 开发</td></tr><tr><td>7</td><td>5</td><td>PS 技术</td></tr><tr><td>8</td><td>2</td><td>办公信息</td></tr></tbody></table></div><p>进行自连接，可将目录的层次关系列出：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=n>p</span><span class=p>.</span><span class=o>`</span><span class=n>name</span><span class=o>`</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=s1>&#39;父目录&#39;</span><span class=p>,</span><span class=n>s</span><span class=p>.</span><span class=o>`</span><span class=n>name</span><span class=o>`</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=s1>&#39;子目录&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=o>`</span><span class=n>category</span><span class=o>`</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>p</span><span class=p>,</span><span class=o>`</span><span class=n>category</span><span class=o>`</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>p</span><span class=p>.</span><span class=o>`</span><span class=n>category_id</span><span class=o>`=</span><span class=n>s</span><span class=p>.</span><span class=o>`</span><span class=n>pid</span><span class=o>`</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>结果：</p><div class=table-wrapper><table><thead><tr><th>父目录</th><th>子目录</th></tr></thead><tbody><tr><td>软件开发</td><td>数据库</td></tr><tr><td>软件开发</td><td>Web 开发</td></tr><tr><td>美术设计</td><td>PS 技术</td></tr><tr><td>信息技术</td><td>办公信息</td></tr></tbody></table></div><p>自连接是将自身看作两张完全一样的表进行连接操作。</p><h3 id=子查询>子查询</h3><p>当要查询的字段在同一张表中，但是筛选条件在其他的表中时，可以使用子查询简化查询语句</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=o>`</span><span class=n>id</span><span class=o>`</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=s1>&#39;学生id&#39;</span><span class=p>,</span><span class=o>`</span><span class=n>name</span><span class=o>`</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=s1>&#39;学生姓名&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=o>`</span><span class=n>student</span><span class=o>`</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=o>`</span><span class=n>grade_id</span><span class=o>`</span><span class=w> </span><span class=k>IN</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>SELECT</span><span class=w> </span><span class=o>`</span><span class=n>id</span><span class=o>`</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=o>`</span><span class=n>grade</span><span class=o>`</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=o>`</span><span class=n>name</span><span class=o>`</span><span class=w> </span><span class=k>IN</span><span class=w> </span><span class=p>(</span><span class=s1>&#39;大二&#39;</span><span class=p>,</span><span class=s1>&#39;大三&#39;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 语句结构
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>WHERE</span><span class=w> </span><span class=err>${字段名}</span><span class=w> </span><span class=err>${运算}</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=err>${子查询}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>)</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><div class="notice tip"><p class=notice-title><span class="icon-notice baseline"><svg xmlns="http://www.w3.org/2000/svg" viewBox="300.5 134 300 300"><path d="M551.281 252.36c0-3.32-1.172-6.641-3.515-8.985l-17.774-17.578c-2.344-2.344-5.469-3.711-8.789-3.711-3.32.0-6.445 1.367-8.789 3.71l-79.687 79.493-44.141-44.14c-2.344-2.344-5.469-3.712-8.79-3.712-3.32.0-6.444 1.368-8.788 3.711l-17.774 17.579c-2.343 2.343-3.515 5.664-3.515 8.984s1.172 6.445 3.515 8.789l70.704 70.703c2.343 2.344 5.664 3.711 8.789 3.711 3.32.0 6.64-1.367 8.984-3.71l106.055-106.056c2.343-2.343 3.515-5.468 3.515-8.789zM600.5 284c0 82.813-67.188 150-150 150-82.813.0-150-67.188-150-150 0-82.813 67.188-150 150-150 82.813.0 150 67.188 150 150z"/></svg>
</span>提示</p><p>子查询就是在 <code>WHERE</code> 子句中嵌入 <code>SELETE</code> 查询</p><p>子查询可能会多次遍历表，一般情况下性能会低于联表查询</p><p>一般通过联表查询来替换多个子查询以提高性能</p><p>正确编写联表查询是高性能的前提，不正确的联表方式可能导致性能降低</p></div><h3 id=分组>分组</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=k>g</span><span class=p>.</span><span class=o>`</span><span class=n>name</span><span class=o>`</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=s1>&#39;年级&#39;</span><span class=p>,</span><span class=w> </span><span class=k>avg</span><span class=p>(</span><span class=n>s</span><span class=p>.</span><span class=o>`</span><span class=n>age</span><span class=o>`</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=s1>&#39;平均年龄&#39;</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=o>`</span><span class=n>student</span><span class=o>`</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>INNER</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>grade</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=k>g</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>ON</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>grade_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>g</span><span class=p>.</span><span class=n>id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>grade_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>HAVING</span><span class=w> </span><span class=err>平均年龄</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=mi>20</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 语句结构
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=err>${聚合函数}</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=o>`</span><span class=err>${表名}</span><span class=o>`</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=err>${字段名}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>HAVING</span><span class=w> </span><span class=err>${筛选聚合条件}</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>根据指定的字段名的不同的值进行分组，每组记录根据聚合函数计算结果。</p><h3 id=排序>排序</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=o>`</span><span class=n>id</span><span class=o>`</span><span class=p>,</span><span class=n>s</span><span class=p>.</span><span class=o>`</span><span class=n>name</span><span class=o>`</span><span class=p>,</span><span class=k>g</span><span class=p>.</span><span class=o>`</span><span class=n>name</span><span class=o>`</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=o>`</span><span class=n>student</span><span class=o>`</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>INNER</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=o>`</span><span class=n>grade</span><span class=o>`</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=k>g</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>ON</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>grade_id</span><span class=o>=</span><span class=k>g</span><span class=p>.</span><span class=n>id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=o>`</span><span class=n>id</span><span class=o>`</span><span class=w> </span><span class=k>DESC</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 语句结构
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=p>[</span><span class=err>${表名</span><span class=o>/</span><span class=err>表别名}</span><span class=p>.]</span><span class=o>`</span><span class=err>${字段名}</span><span class=o>`</span><span class=w> </span><span class=p>[</span><span class=err>${</span><span class=k>ASC</span><span class=o>/</span><span class=k>DESC</span><span class=err>}</span><span class=p>]</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><div class=table-wrapper><table><thead><tr><th>关键字</th><th>排序方式</th></tr></thead><tbody><tr><td>ACS</td><td>顺序</td></tr><tr><td>DESC</td><td>逆序</td></tr></tbody></table></div><h3 id=分页>分页</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=o>`</span><span class=n>id</span><span class=o>`</span><span class=p>,</span><span class=n>s</span><span class=p>.</span><span class=o>`</span><span class=n>name</span><span class=o>`</span><span class=p>,</span><span class=k>g</span><span class=p>.</span><span class=o>`</span><span class=n>name</span><span class=o>`</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=o>`</span><span class=n>student</span><span class=o>`</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>INNER</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=o>`</span><span class=n>grade</span><span class=o>`</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=k>g</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>ON</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>grade_id</span><span class=o>=</span><span class=k>g</span><span class=p>.</span><span class=n>id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=o>`</span><span class=n>id</span><span class=o>`</span><span class=w> </span><span class=k>DESC</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>LiMIT</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=mi>5</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 语句结构
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>LiMIT</span><span class=w> </span><span class=err>${起始位置}</span><span class=p>,</span><span class=err>${查询条数}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><div class="notice tip"><p class=notice-title><span class="icon-notice baseline"><svg xmlns="http://www.w3.org/2000/svg" viewBox="300.5 134 300 300"><path d="M551.281 252.36c0-3.32-1.172-6.641-3.515-8.985l-17.774-17.578c-2.344-2.344-5.469-3.711-8.789-3.711-3.32.0-6.445 1.367-8.789 3.71l-79.687 79.493-44.141-44.14c-2.344-2.344-5.469-3.712-8.79-3.712-3.32.0-6.444 1.368-8.788 3.711l-17.774 17.579c-2.343 2.343-3.515 5.664-3.515 8.984s1.172 6.445 3.515 8.789l70.704 70.703c2.343 2.344 5.664 3.711 8.789 3.711 3.32.0 6.64-1.367 8.984-3.71l106.055-106.056c2.343-2.343 3.515-5.468 3.515-8.789zM600.5 284c0 82.813-67.188 150-150 150-82.813.0-150-67.188-150-150 0-82.813 67.188-150 150-150 82.813.0 150 67.188 150 150z"/></svg>
</span>提示</p><p>对于 <code>LIMIT x,y</code></p><ul><li>x 查询的位置，从第 x 条开始</li><li>y 查询的条数，本次查询 y 条记录</li></ul></div><h3 id=短语顺序>短语顺序</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=p>[</span><span class=k>DISTINCT</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=err>${表名</span><span class=o>/</span><span class=err>表别名}</span><span class=p>.]</span><span class=o>`</span><span class=err>${字段名}</span><span class=o>`</span><span class=w> </span><span class=p>[[</span><span class=k>AS</span><span class=p>]</span><span class=w> </span><span class=err>${字段别名}</span><span class=p>][,...]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=o>`</span><span class=err>${表名}</span><span class=o>`</span><span class=w> </span><span class=p>[[</span><span class=k>AS</span><span class=p>]</span><span class=w> </span><span class=err>${表别名}</span><span class=p>][,...]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>[</span><span class=err>${联表方式}</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=o>`</span><span class=err>${表名}</span><span class=o>`</span><span class=w> </span><span class=p>[[</span><span class=k>AS</span><span class=p>]</span><span class=w> </span><span class=err>${表别名}</span><span class=p>]</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=p>[</span><span class=err>${表名</span><span class=o>/</span><span class=err>表别名}</span><span class=p>.]</span><span class=o>`</span><span class=err>${字段名}</span><span class=o>`=</span><span class=p>[</span><span class=err>${表名</span><span class=o>/</span><span class=err>表别名}</span><span class=p>.]</span><span class=o>`</span><span class=err>${字段名}</span><span class=o>`</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>[</span><span class=k>WHERE</span><span class=w> </span><span class=err>${条件语句}</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>[</span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=p>[</span><span class=err>${表名</span><span class=o>/</span><span class=err>表别名}</span><span class=p>.]</span><span class=o>`</span><span class=err>${字段名}</span><span class=o>`</span><span class=w> </span><span class=p>[</span><span class=k>HAVING</span><span class=w> </span><span class=err>${筛选聚合条件}</span><span class=p>]]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>[</span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=p>[</span><span class=err>${表名</span><span class=o>/</span><span class=err>表别名}</span><span class=p>.]</span><span class=o>`</span><span class=err>${字段名}</span><span class=o>`</span><span class=w> </span><span class=p>[</span><span class=k>ASC</span><span class=o>/</span><span class=n>SESC</span><span class=p>]]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>[</span><span class=k>LiMIT</span><span class=w> </span><span class=err>${起始记录数}</span><span class=p>,</span><span class=err>${读取记录数}</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>[</span><span class=k>UNION</span><span class=w> </span><span class=err>${查询}</span><span class=p>]</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h2 id=dcl---data-control-language>DCL - Data Control Language</h2><h3 id=用户操作>用户操作</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>CREATE</span><span class=w> </span><span class=k>USER</span><span class=w> </span><span class=s1>&#39;neko&#39;</span><span class=w> </span><span class=n>IDENTIFIED</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=s1>&#39;123456&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SET</span><span class=w> </span><span class=n>PASSWORD</span><span class=w> </span><span class=k>FOR</span><span class=w> </span><span class=s1>&#39;neko&#39;</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>PASSWORD</span><span class=p>(</span><span class=s1>&#39;123456&#39;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>RENAME</span><span class=w> </span><span class=k>USER</span><span class=w> </span><span class=s1>&#39;neko&#39;</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=s1>&#39;neko1&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>DROP</span><span class=w> </span><span class=k>USER</span><span class=w> </span><span class=s1>&#39;neko&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 语句结构
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>CREATE</span><span class=w> </span><span class=k>USER</span><span class=w> </span><span class=s1>&#39;${用户名}&#39;</span><span class=w> </span><span class=n>IDENTIFIED</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=s1>&#39;${密码}&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SET</span><span class=w> </span><span class=n>PASSWORD</span><span class=w> </span><span class=p>[</span><span class=k>FOR</span><span class=w> </span><span class=s1>&#39;${用户名}&#39;</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>PASSWORD</span><span class=p>(</span><span class=s1>&#39;${密码}&#39;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>RENAME</span><span class=w> </span><span class=k>USER</span><span class=w> </span><span class=s1>&#39;${旧用户名}&#39;</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=s1>&#39;${新用户名}&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>DROP</span><span class=w> </span><span class=k>USER</span><span class=w> </span><span class=s1>&#39;${用户名}&#39;</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=权限管理>权限管理</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>GRANT</span><span class=w> </span><span class=k>ALL</span><span class=w> </span><span class=k>PRIVILEGES</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=o>*</span><span class=p>.</span><span class=o>*</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=s1>&#39;neko&#39;</span><span class=p>;</span><span class=w>     </span><span class=c1>-- 授予权限
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SHOW</span><span class=w> </span><span class=n>GRANTS</span><span class=w> </span><span class=k>FOR</span><span class=w> </span><span class=s1>&#39;neko&#39;</span><span class=p>;</span><span class=w>                    </span><span class=c1>-- 查看权限
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>REVOKE</span><span class=w> </span><span class=k>ALL</span><span class=w> </span><span class=k>PRIVILEGES</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=o>*</span><span class=p>.</span><span class=o>*</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=s1>&#39;neko&#39;</span><span class=p>;</span><span class=w>  </span><span class=c1>-- 撤销权限
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 语句结构
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>GRANT</span><span class=w> </span><span class=err>${权限列表}</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=err>${数据库名}</span><span class=p>.</span><span class=err>${表名}</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=s1>&#39;${用户名}&#39;</span><span class=p>[</span><span class=o>@</span><span class=s1>&#39;${主机}&#39;</span><span class=p>];</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SHOW</span><span class=w> </span><span class=n>GRANTS</span><span class=w> </span><span class=k>FOR</span><span class=w> </span><span class=err>${用户名}</span><span class=p>[</span><span class=o>@</span><span class=s1>&#39;${主机}&#39;</span><span class=p>];</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>REVOKE</span><span class=w> </span><span class=err>${权限列表}</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=err>${数据库名}</span><span class=p>.</span><span class=err>${表名}</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=s1>&#39;${用户名}&#39;</span><span class=p>[</span><span class=o>@</span><span class=s1>&#39;${主机}&#39;</span><span class=p>];</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h2 id=知识点>知识点</h2><h3 id=表类型>表类型</h3><div class=table-wrapper><table><thead><tr><th>表类型</th><th>MyISAM</th><th><strong>InnoDB</strong></th><th>Memory</th><th>CSV</th></tr></thead><tbody><tr><td>事务支持</td><td>不支持</td><td>支持</td><td>不支持</td><td>不支持</td></tr><tr><td>行锁</td><td>不支持</td><td>支持</td><td>不支持</td><td>不支持</td></tr><tr><td>外键索引</td><td>不支持</td><td>支持</td><td>不支持</td><td>不支持</td></tr><tr><td>全文索引</td><td>支持</td><td>不支持</td><td>不支持</td><td>不支持</td></tr><tr><td>占用空间</td><td>100%</td><td>200%</td><td>内存读写</td><td>用于数据交互</td></tr></tbody></table></div><h3 id=字符集>字符集</h3><div class=table-wrapper><table><thead><tr><th>字符集</th><th>长度</th><th>说明</th></tr></thead><tbody><tr><td>latin1</td><td>1</td><td>老版本 MySQL 默认字符集</td></tr><tr><td>GBK</td><td>2</td><td>支持中文，但是不是国际通用字符集</td></tr><tr><td>utf8mb3</td><td>3</td><td>支持中英文混合场景，是国际通用字符集</td></tr><tr><td><strong>utf8mb4</strong></td><td>4</td><td>默认字符集，完全兼容 utf8mb3，可存储 emoji 等特殊字符</td></tr></tbody></table></div><h3 id=排序规则>排序规则</h3><div class=table-wrapper><table><thead><tr><th>规则</th><th>解释</th></tr></thead><tbody><tr><td><strong>utf8mb4_0900_ai_ci</strong></td><td>Unicode 9.0 规范，不区分音调，不区分大小写，相同字母的大小和音调写在排序时视为相同。</td></tr><tr><td>utf8mb4_0900_as_cs</td><td>Unicode 9.0 规范，区分音调，区分大小写，相同字母的大小写和音调在排序时视为不同。</td></tr><tr><td>utf8mb4_0900_bin</td><td>Unicode 9.0 规范，通过字符串的二进制进行比较</td></tr><tr><td>utf8mb4_unicode_ci</td><td>根据 unicode 编码规则实行排序，准确性高</td></tr></tbody></table></div><h3 id=字段>字段</h3><p>在生产环境中，每个表通常会有默认的几个字段：</p><ul><li><code>id</code> // 主键</li><li><code>version</code> // 版本，用于乐观锁</li><li><code>is_delete</code> // 伪删除</li><li><code>gmt_create</code> // 记录的创建时间</li><li><code>gmt_update</code> // 记录的更新时间</li></ul><h3 id=字段类型>字段类型</h3><h4 id=数值>数值</h4><div class=table-wrapper><table><thead><tr><th>类型</th><th>解释</th><th>长度</th></tr></thead><tbody><tr><td>tinyint</td><td>微型整数</td><td>1 Byte</td></tr><tr><td>smallint</td><td>小型整数</td><td>2 Byte</td></tr><tr><td>mediumint</td><td>中小型整数</td><td>3 Byte</td></tr><tr><td><strong>int</strong></td><td>整数</td><td>4 Byte</td></tr><tr><td>big</td><td>大型整数</td><td>8 Byte</td></tr><tr><td>float</td><td>单精度浮点数</td><td>4 Byte</td></tr><tr><td>double</td><td>双精度浮点数</td><td>8 Byte</td></tr><tr><td>decimal</td><td>字符串形式浮点数</td><td>-</td></tr></tbody></table></div><div class="notice tip"><p class=notice-title><span class="icon-notice baseline"><svg xmlns="http://www.w3.org/2000/svg" viewBox="300.5 134 300 300"><path d="M551.281 252.36c0-3.32-1.172-6.641-3.515-8.985l-17.774-17.578c-2.344-2.344-5.469-3.711-8.789-3.711-3.32.0-6.445 1.367-8.789 3.71l-79.687 79.493-44.141-44.14c-2.344-2.344-5.469-3.712-8.79-3.712-3.32.0-6.444 1.368-8.788 3.711l-17.774 17.579c-2.343 2.343-3.515 5.664-3.515 8.984s1.172 6.445 3.515 8.789l70.704 70.703c2.343 2.344 5.664 3.711 8.789 3.711 3.32.0 6.64-1.367 8.984-3.71l106.055-106.056c2.343-2.343 3.515-5.468 3.515-8.789zM600.5 284c0 82.813-67.188 150-150 150-82.813.0-150-67.188-150-150 0-82.813 67.188-150 150-150 82.813.0 150 67.188 150 150z"/></svg>
</span>提示</p><p>int 类型为常用类型</p><p>decimal 类型使用字符串形式来存储数值，使用的时候再转化为数值，避免精度问题，一般用于金融领域</p><p>数值类型诸如 <code>int(8)</code> 的 <code>Type(M)</code> 形式，<code>M</code> 指的是数据的显示宽度，与零填充有关，与数据的值大小无关</p></div><h4 id=字符串>字符串</h4><div class=table-wrapper><table><thead><tr><th>类型</th><th>解释</th><th>长度</th></tr></thead><tbody><tr><td>char</td><td>固定长度字符串</td><td>2^8-1</td></tr><tr><td><strong>varchar</strong></td><td>可变长字符串</td><td>0 ~ 2^16-1</td></tr><tr><td>tinytext</td><td>微型文本</td><td>0 ~ 2^8-1</td></tr><tr><td>text</td><td>文本</td><td>0 ~ 2^16-1</td></tr></tbody></table></div><div class="notice tip"><p class=notice-title><span class="icon-notice baseline"><svg xmlns="http://www.w3.org/2000/svg" viewBox="300.5 134 300 300"><path d="M551.281 252.36c0-3.32-1.172-6.641-3.515-8.985l-17.774-17.578c-2.344-2.344-5.469-3.711-8.789-3.711-3.32.0-6.445 1.367-8.789 3.71l-79.687 79.493-44.141-44.14c-2.344-2.344-5.469-3.712-8.79-3.712-3.32.0-6.444 1.368-8.788 3.711l-17.774 17.579c-2.343 2.343-3.515 5.664-3.515 8.984s1.172 6.445 3.515 8.789l70.704 70.703c2.343 2.344 5.664 3.711 8.789 3.711 3.32.0 6.64-1.367 8.984-3.71l106.055-106.056c2.343-2.343 3.515-5.468 3.515-8.789zM600.5 284c0 82.813-67.188 150-150 150-82.813.0-150-67.188-150-150 0-82.813 67.188-150 150-150 82.813.0 150 67.188 150 150z"/></svg>
</span>提示</p><p>char / varchar 类型一般用作存储经常读写的变量性质的值</p><p>text / tinytext 类型一般用于关联性不强的整体文本，如文章等</p><p>能用 varchar 就不用其他的类型</p><p>字符串类型的诸如 <code>varchar(20)</code> 的 <code>Type(M)</code> 形式，<code>M</code> 指的是字符床的最大长度</p></div><h4 id=时间和日期>时间和日期</h4><div class=table-wrapper><table><thead><tr><th>类型</th><th>解释</th><th>形式</th></tr></thead><tbody><tr><td>date</td><td>日期</td><td>yyyy-mm-dd</td></tr><tr><td>time</td><td>时间</td><td>hh:mm:ss</td></tr><tr><td><strong>datetime</strong></td><td>日期时间</td><td>yyyy-mm-dd hh:mm:ss</td></tr><tr><td><strong>timestamp</strong></td><td>时间戳</td><td>1666760950</td></tr><tr><td>year</td><td>年份</td><td>yyyy</td></tr></tbody></table></div><div class="notice tip"><p class=notice-title><span class="icon-notice baseline"><svg xmlns="http://www.w3.org/2000/svg" viewBox="300.5 134 300 300"><path d="M551.281 252.36c0-3.32-1.172-6.641-3.515-8.985l-17.774-17.578c-2.344-2.344-5.469-3.711-8.789-3.711-3.32.0-6.445 1.367-8.789 3.71l-79.687 79.493-44.141-44.14c-2.344-2.344-5.469-3.712-8.79-3.712-3.32.0-6.444 1.368-8.788 3.711l-17.774 17.579c-2.343 2.343-3.515 5.664-3.515 8.984s1.172 6.445 3.515 8.789l70.704 70.703c2.343 2.344 5.664 3.711 8.789 3.711 3.32.0 6.64-1.367 8.984-3.71l106.055-106.056c2.343-2.343 3.515-5.468 3.515-8.789zM600.5 284c0 82.813-67.188 150-150 150-82.813.0-150-67.188-150-150 0-82.813 67.188-150 150-150 82.813.0 150 67.188 150 150z"/></svg>
</span>提示</p><p>datetime 类型为常用类型</p><p>timestamp 类型为 1970-01-01 00:00:00 到现在时间点的<strong>秒数</strong></p></div><h4 id=null>NULL</h4><div class=table-wrapper><table><thead><tr><th>类型</th><th>解释</th><th>形式</th></tr></thead><tbody><tr><td>NULL</td><td>无值，未知</td><td>(NULL)</td></tr></tbody></table></div><div class="notice info"><p class=notice-title><span class="icon-notice baseline"><svg xmlns="http://www.w3.org/2000/svg" viewBox="92 59.5 300 300"><path d="M292 303.25V272c0-3.516-2.734-6.25-6.25-6.25H267v-1e2c0-3.516-2.734-6.25-6.25-6.25h-62.5c-3.516.0-6.25 2.734-6.25 6.25V197c0 3.516 2.734 6.25 6.25 6.25H217v62.5h-18.75c-3.516.0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h87.5c3.516.0 6.25-2.734 6.25-6.25zm-25-175V97c0-3.516-2.734-6.25-6.25-6.25h-37.5c-3.516.0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h37.5c3.516.0 6.25-2.734 6.25-6.25zm125 81.25c0 82.813-67.188 150-150 150-82.813.0-150-67.188-150-150 0-82.813 67.188-150 150-150 82.813.0 150 67.188 150 150z"/></svg>
</span>信息</p><p>不要使用 <code>NULL</code> 进行计算，计算结果一律为 <code>NULL</code> ，无意义</p></div><h3 id=字段属性>字段属性</h3><p>UNSIGNED</p><ul><li>声明该字段不能为负数</li><li>只有整数类型能用</li></ul><p>ZEROFILL</p><ul><li>声明该字段位数不足时用 <code>0</code> 填充</li></ul><p>AUTO_INCREMENT</p><ul><li>自动在上一条记录的基础上增加，默认为 <code>1</code></li><li>只有整数类型能用</li><li>通常用于设置唯一的主键</li></ul><p>NOT NULL</p><ul><li>声明该字段不能为 <code>NULL</code></li><li>该字段若不赋值则报错</li></ul><p>NULL</p><ul><li>声明该字段允许 <code>NULL</code></li><li>该字段若不赋值且未设置默认值时则记录为 <code>NULL</code></li></ul><p>DEFAULT</p><ul><li>声明该字段的默认值</li><li>该字段若不赋值则记录为 <code>指定的值</code></li></ul><p>PRIMARY KEY</p><ul><li>声明该字段为主键</li><li>一般一张表只有一个</li><li>一般写在字段声明的最后 <code>PRIMARY KEY(`字段`)</code></li></ul><h3 id=运算操作>运算操作</h3><h4 id=算数运算>算数运算</h4><div class=table-wrapper><table><thead><tr><th>算数运算符</th><th>含义</th></tr></thead><tbody><tr><td><code>+</code></td><td>加</td></tr><tr><td><code>-</code></td><td>减</td></tr><tr><td><code>*</code></td><td>乘</td></tr><tr><td><code>/</code> <code>DIV</code></td><td>求商</td></tr><tr><td><code>%</code> <code>MOD</code></td><td>求余</td></tr></tbody></table></div><h4 id=比较运算>比较运算</h4><div class=table-wrapper><table><thead><tr><th>比较运算符</th><th>含义</th></tr></thead><tbody><tr><td><code>=</code></td><td>等于</td></tr><tr><td><code>&lt;></code> <code>!=</code></td><td>不等于</td></tr><tr><td><code>></code></td><td>大于</td></tr><tr><td><code>>=</code></td><td>大于等于</td></tr><tr><td><code>&lt;</code></td><td>小于</td></tr><tr><td><code>&lt;=</code></td><td>小于等于</td></tr></tbody></table></div><div class=table-wrapper><table><thead><tr><th>比较运算符</th><th>含义</th></tr></thead><tbody><tr><td><code>IS NULL</code></td><td>为 NULL</td></tr><tr><td><code>IS NOT NULL</code></td><td>不为 NULL</td></tr><tr><td><code>BETWEEN</code> x <code>AND</code> y</td><td>在 [x, y] 范围中</td></tr><tr><td><code>LIKE</code></td><td>模糊匹配</td></tr><tr><td><code>IN</code></td><td>在集合中</td></tr></tbody></table></div><h4 id=逻辑运算>逻辑运算</h4><div class=table-wrapper><table><thead><tr><th>逻辑运算符</th><th>含义</th></tr></thead><tbody><tr><td><code>AND</code> <code>&&</code></td><td>与运算</td></tr><tr><td><code>OR</code> <code>⏐⏐</code></td><td>或运算</td></tr><tr><td><code>NOT</code> <code>!</code></td><td>非运算</td></tr><tr><td><code>XOR</code></td><td>异或运算</td></tr></tbody></table></div><h3 id=事务>事务</h3><p>事务是指将一系列数据库操作结合成一个整体，要么同时成功，要么同时失败。</p><h4 id=acid-原则>ACID 原则</h4><ul><li>Atomic - 原子性
事务中各项操作，要么全做要么全不做，任何一项操作的失败都会导致整个事务的失败</li><li>Consistent - 一致性
事务结束后系统状态是一致的</li><li>Isolated - 隔离性
并发执行的事务彼此无法看到对方的中间状态，各种操作彼此互不影响</li><li>Durable - 持久性
事务完成后所做的改动都会被持久化，即使发生灾难性的失败</li></ul><h4 id=隔离所导致的问题>隔离所导致的问题</h4><p>由于事务在操作数据库时会向数据库加锁，不同的锁可对其他事务的读写有着不同的效果。
在数据库中提供了几种事务的隔离级别：</p><div class=table-wrapper><table><thead><tr><th>隔离级别</th><th>级别</th><th>描述</th></tr></thead><tbody><tr><td>read uncommitted - 读未提交</td><td>低</td><td>允许其他事务读取当前事务修改但未提交的数据</td></tr><tr><td>read committed - 读已提交</td><td>中</td><td>允许其他事务读取当前事务已经提交的数据，但数据库可能并未操作完成，会发生短时间内两次查询不一致的情况</td></tr><tr><td>repeatable read - 可重复读</td><td>高</td><td>确保同一事务的多个实例在并发读取数据时，会看到同样的数据行</td></tr><tr><td>serializable - 序列化</td><td>最高</td><td>强制事务排序，解决相互冲突，可能导致大量的超时现象的和锁竞争，效率低下</td></tr></tbody></table></div><p>相应的，也会出现几种问题：</p><div class=table-wrapper><table><thead><tr><th>隔离级别</th><th>严重级别</th><th>描述</th></tr></thead><tbody><tr><td>回滚覆盖</td><td>高</td><td>事务失败回滚时，数据被其他事务修改，导致一致性被破坏</td></tr><tr><td>脏读</td><td>高</td><td>事务读取了其他事务被修改还未提交的数据，该事务可能失败，读取的数据不安全</td></tr><tr><td>不可重复读</td><td>中</td><td>事务读取了其他事务已经提交但数据库未处理完毕的数据，可能导致在该事务中，两次读取的值不同</td></tr><tr><td>提交覆盖</td><td>低</td><td>事务读取数据后，其他事务更改了该数据，当前事务在写入时再次更改该数据，导致其他事务的更改失效</td></tr><tr><td>幻读</td><td>低</td><td>事务读取后，其他事务向该表增加记录，可能导致该事务中后续读取增加记录</td></tr></tbody></table></div><p>不同的隔离级别可能会导致不同的问题，事务隔离级别越高，并发问题就越小，但是并发处理能力越差；</p><div class=table-wrapper><table><thead><tr><th>隔离级别</th><th>回滚覆盖</th><th>脏读</th><th>不可重复读</th><th>提交覆盖</th><th>幻读</th></tr></thead><tbody><tr><td>read uncommitted - 读未提交</td><td>不会发生</td><td>可能发生</td><td>可能发生</td><td>可能发生</td><td>可能发生</td></tr><tr><td>read committed - 读已提交</td><td>不会发生</td><td>不会发生</td><td>可能发生</td><td>可能发生</td><td>可能发生</td></tr><tr><td>repeatable read - 可重复读</td><td>不会发生</td><td>不会发生</td><td>不会发生</td><td>不会发生</td><td>可能发生</td></tr><tr><td>serializable - 序列化</td><td>不会发生</td><td>不会发生</td><td>不会发生</td><td>不会发生</td><td>不会发生</td></tr></tbody></table></div><h4 id=事务的操作>事务的操作</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- mysql 默认开启事务并自动提交
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SET</span><span class=w> </span><span class=n>autocommit</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w>  </span><span class=c1>-- 关闭自动提交
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>START</span><span class=w> </span><span class=k>TRANSACTION</span><span class=p>;</span><span class=w>  </span><span class=c1>-- 事务开始
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>[</span><span class=err>执行语句</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>SAVEPOINT</span><span class=w> </span><span class=err>${检查点名}</span><span class=p>;</span><span class=w>  </span><span class=c1>-- 生成检查点
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>[</span><span class=err>执行语句</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>ROLLBACK</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=n>SAVEPOINT</span><span class=w> </span><span class=err>${检查点名}</span><span class=p>;</span><span class=w>  </span><span class=c1>-- 回滚到检查点
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>[</span><span class=err>执行语句</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>RELEASE</span><span class=w> </span><span class=n>SAVEPOINT</span><span class=w> </span><span class=err>${检查点名}</span><span class=p>;</span><span class=w>  </span><span class=c1>-- 释放检查点
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>[</span><span class=err>执行语句</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 事务只能以回滚或提交结束
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>COMMIT</span><span class=p>;</span><span class=w>    </span><span class=c1>-- 提交，完成事务
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>ROLLBACK</span><span class=p>;</span><span class=w>  </span><span class=c1>-- 回滚，撤销事务
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SET</span><span class=w> </span><span class=n>autocommit</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=w>  </span><span class=c1>-- 打开自动提交
</span></span></span></code></pre></td></tr></table></div></div><h3 id=索引>索引</h3><blockquote><p>索引(Index)是帮助 MySQL 高效获取数据的数据结构.
提取句子的主干索引(Index)是一种数据结构。</p></blockquote><h4 id=分类>分类</h4><div class=table-wrapper><table><thead><tr><th>索引分类</th><th>描述</th></tr></thead><tbody><tr><td>主键索引</td><td>一张表只能有一个，字段中所有的记录不能相同</td></tr><tr><td>唯一索引</td><td>一张表可以有多个，字段中所有的记录不能相同</td></tr><tr><td>常规索引</td><td>一张表可以有多个，字段中所有的记录可以相同</td></tr><tr><td>全文索引</td><td>一般用于字符串，遍历所有的文字</td></tr></tbody></table></div><h4 id=索引原则>索引原则</h4><ul><li>索引不是越多越好</li><li>不要对经常变动的数据加索引</li><li>小数据量（十万条以下）不用加索引</li><li>索引一般家在经常查询的字段上</li></ul><h3 id=数据库设计>数据库设计</h3><p>当数据较多且关系较为复杂时，需要进行数据库的设计。</p><ul><li>糟糕的数据库设计<ul><li>数据冗余</li><li>有较多外键，数据插入和删除都会很麻烦</li><li>程序性能差</li></ul></li><li>良好的数据库设计<ul><li>节省空间</li><li>能保证数据库完整性</li><li>方便开发系统</li></ul></li></ul><p>软件开发中，数据库设计流程：</p><ol><li>分析需求<ul><li>分析业务和数据库处理的需求</li></ul></li><li>概要设计<ul><li>设计 E-R 关系图</li></ul></li></ol><h4 id=三大范式>三大范式</h4><p>为何需要数据规范化？</p><ul><li>信息重复</li><li>更新异常</li><li>插入异常</li><li>删除异常</li></ul><h5 id=第一范式---1nf>第一范式 - 1NF</h5><ul><li>要求：每一个字段均为<strong>不可再分</strong>的原子数据项。</li></ul><h5 id=第二范式---2nf>第二范式 - 2NF</h5><ul><li>前提：满足第一范式</li><li>要求：一张表只描述一件事，每一个字段均与主键<strong>相关</strong>，而不是与主键的<strong>某一部分</strong>相关</li></ul><h5 id=第三范式---3nf>第三范式 - 3NF</h5><ul><li>前提：满足第二范式</li><li>要求：消除传递依赖，每一个字段均与主键<strong>直接相关</strong>，而不能<strong>间接</strong>相关。</li></ul><div class="notice info"><p class=notice-title><span class="icon-notice baseline"><svg xmlns="http://www.w3.org/2000/svg" viewBox="92 59.5 300 300"><path d="M292 303.25V272c0-3.516-2.734-6.25-6.25-6.25H267v-1e2c0-3.516-2.734-6.25-6.25-6.25h-62.5c-3.516.0-6.25 2.734-6.25 6.25V197c0 3.516 2.734 6.25 6.25 6.25H217v62.5h-18.75c-3.516.0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h87.5c3.516.0 6.25-2.734 6.25-6.25zm-25-175V97c0-3.516-2.734-6.25-6.25-6.25h-37.5c-3.516.0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h37.5c3.516.0 6.25-2.734 6.25-6.25zm125 81.25c0 82.813-67.188 150-150 150-82.813.0-150-67.188-150-150 0-82.813 67.188-150 150-150 82.813.0 150 67.188 150 150z"/></svg>
</span>信息</p><p>规范与性能时不可兼得的</p><p>在严格满足范式规范的情况下，一次查询可能关联很多表，导致性能问题</p></div></section><footer class=article-footer><section class=article-tags><a href=/tags/sql/>Sql</a>
<a href=/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/>数据库</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>许可协议：<a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ target=_blank>CC BY-NC-SA 4.0</a></span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>相关文章</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/p/join-in-database/><div class=article-image><img src=/p/join-in-database/cover.8f69551b751c2ff59efa29052249221f_hubb8f8dc81838a728274a36064b22cf3e_37076_250x150_fill_q75_h2_box_smart1_2.webp width=250 height=150 loading=lazy alt="Featured image of post 数据库中的 7 种 join 操作" data-key=join-in-database data-hash="md5-j2lVG3UcL/We+ikFIkkiHw=="></div><div class=article-details><h2 class=article-title>数据库中的 7 种 join 操作</h2></div></a></article><article class=has-image><a href=/p/pve-install/><div class=article-image><img src=/p/pve-install/cover.b9d1580077624c1f3ef383bfd5e5c909_hu6cf4bdb61b281d6c7d1681c27f460ed6_15760_250x150_fill_q75_h2_box_smart1_2.webp width=250 height=150 loading=lazy alt="Featured image of post Proxmox VE 安装与配置" data-key=pve-install data-hash="md5-udFYAHdiTB8+84O/1eXJCQ=="></div><div class=article-details><h2 class=article-title>Proxmox VE 安装与配置</h2></div></a></article><article class=has-image><a href=/p/self-signed-ssl/><div class=article-image><img src=/p/self-signed-ssl/cover.00ee199bf98f29439e89c2fb2f43492b_hu30c2425f1747c48216b0bde102973848_192996_250x150_fill_q75_h2_box_smart1_2.webp width=250 height=150 loading=lazy alt="Featured image of post 自签 SSL 证书" data-key=self-signed-ssl data-hash="md5-AO4Zm/mPKUOeicL7L0NJKw=="></div><div class=article-details><h2 class=article-title>自签 SSL 证书</h2></div></a></article><article class=has-image><a href=/p/docker-server/><div class=article-image><img src=/p/docker-server/cover.f6dc8f8e3722003358b20a8b39bd5b04_hu75f8f4e7ee5772c971ef9c74cf57563f_5376_250x150_fill_q75_h2_box_smart1_2.webp width=250 height=150 loading=lazy alt="Featured image of post 服务器 Docker 镜像" data-key=docker-server data-hash="md5-9tyPjjciADNYsgqLOb1bBA=="></div><div class=article-details><h2 class=article-title>服务器 Docker 镜像</h2></div></a></article><article class=has-image><a href=/p/network-config/><div class=article-image><img src=/p/network-config/cover.8e882b882b2d6bf3d39de797f0ba6beb_hu46bdbc187452d60253ce58bb6ae6f888_85014_250x150_fill_q75_h2_box_smart1_2.webp width=250 height=150 loading=lazy alt="Featured image of post 网络环境配置" data-key=network-config data-hash="md5-jogriCsta/PTneeX8Lpr6w=="></div><div class=article-details><h2 class=article-title>网络环境配置</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2019 -
2024 猫的笔记本</section><section class=powerby>使用 <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> 构建<br>主题 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.26.0>Stack</a></b> 由 <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> 设计</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>