<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>猫的笔记本</title><link>https://blog.nkit.eu.org/</link><description>Recent content on 猫的笔记本</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Mon, 03 Jun 2024 22:51:56 +0800</lastBuildDate><atom:link href="https://blog.nkit.eu.org/index.xml" rel="self" type="application/rss+xml"/><item><title>Proxmox VE 安装与配置</title><link>https://blog.nkit.eu.org/p/pve-install/</link><pubDate>Mon, 03 Jun 2024 22:51:56 +0800</pubDate><guid>https://blog.nkit.eu.org/p/pve-install/</guid><description>&lt;img src="https://blog.nkit.eu.org/p/pve-install/cover.webp" alt="Featured image of post Proxmox VE 安装与配置" />&lt;h2 id="安装-pve">安装 PVE
&lt;/h2>&lt;p>首先开启 Bios 虚拟化有关的选项，
之后根据 &lt;a class="link" href="https://pve.proxmox.com/wiki/Installation" target="_blank" rel="noopener"
>官方文档&lt;/a> 进行安装。&lt;/p>
&lt;h3 id="增加对-emmc-存储的支持">增加对 EMMC 存储的支持
&lt;/h3>&lt;p>部分设备如 R86S 等带有 EMMC 存储的设备，将 PVE 安装在 EMMC 存储中需要进行特殊步骤。&lt;/p>
&lt;h4 id="原理">原理
&lt;/h4>&lt;p>Install Proxmox VE (Debug mode) 提供了在安装过程中各个阶段执行脚本的能力，修改文件为安装程序提供 MMC 设备检测支持。&lt;br>
不直接修改 ISO 主要是由于，一是该文件在 pve-installer.squashfs 中，由安装程序在运行的时候加载，修改需要解包后重新打包，二是这样更透明，避免使用一个来源不是很明确的二进制文件。&lt;br>
安装过程中，配置信息时使用了 Linux 的图形界面，类似于 Ubuntu 的使用，按下 Ctrl+Alt+F1/F2 为相应的日志信息，按下 Ctrl+Alt+F3 可以切换出命令行，按下 Ctrl+Alt+F4 可以切换回图形界面。&lt;/p>
&lt;p>PVE 并未针对这种设备优化，eMMC 也并非针对这种使用设计。PVE 每天要往存储设备中写入一定量的日志信息，可能造成设备寿命缩短！&lt;/p>
&lt;h4 id="操作">操作
&lt;/h4>&lt;p>启动 PVE 安装程序，进入安装初始界面；&lt;/p>
&lt;p>选择 &lt;code>Install Proxmox VE (Debug mode)&lt;/code> 启动；&lt;/p>
&lt;p>在第一次提示输入命令的时候按下 &lt;kbd>Ctrl&lt;/kbd>+&lt;kbd>D&lt;/kbd> ，继续安装过程；&lt;/p>
&lt;p>在第二次提示输入命令的时候输入 &lt;code>vi /usr/bin/proxinstall&lt;/code> 编辑文件（或者使用其他文字编辑器如 nano）；&lt;/p>
&lt;p>输入 &lt;code>/unable to get device&lt;/code> 回车，定位到对应位置；&lt;/p>
&lt;p>可以看到类似下方的内容，添加下方 6-8 行的 mmcblk 这段 if-else 循环：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-diff" data-lang="diff">&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> } elsif ($dev =~ m|^/dev/[^/]+/hd[a-z]$|) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return &amp;#34;${dev}$partnum&amp;#34;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> } elsif ($dev =~ m|^/dev/nvme\d+n\d+$|) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> return &amp;#34;${dev}p$partnum&amp;#34;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gi">+ } elsif ($dev =~ m|^/dev/mmcblk\d+$|) {
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gi">+ return &amp;#34;${dev}p$partnum&amp;#34;;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gi">&lt;/span> } else {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> die &amp;#34;unable to get device for partition $partnum on device $dev\n&amp;#34;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然后按下 &lt;kbd>Ctrl&lt;/kbd>+&lt;kbd>D&lt;/kbd> ，继续安装过程；&lt;br>
此时应该进入了正常的安装程序，硬盘选择的时候选择 &lt;code>/dev/mmcblk1&lt;/code> ；（没有 bootX 后缀）
最后安装完成后按下 &lt;kbd>Ctrl&lt;/kbd>+&lt;kbd>D&lt;/kbd> ，重启系统。&lt;/p>
&lt;p>建议关闭 swap，避免频繁写入。&lt;/p>
&lt;h2 id="换源">换源
&lt;/h2>&lt;h3 id="proxmox-软件源">Proxmox 软件源
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 注释掉企业源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mv /etc/apt/sources.list.d/pve-enterprise.list /etc/apt/sources.list.d/pve-enterprise.list.bak
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 南京大学 Proxmox 软件源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;deb https://mirrors.nju.edu.cn/proxmox/debian bookworm pve-no-subscription&amp;#34;&lt;/span> &amp;gt; /etc/apt/sources.list.d/pve-no-subscription.list
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="debian-系统源">Debian 系统源
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 阿里 Debian 源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sed -i.bak &lt;span class="s2">&amp;#34;s#ftp.debian.org/debian#mirrors.aliyun.com/debian#g&amp;#34;&lt;/span> /etc/apt/sources.list
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sed -i &lt;span class="s2">&amp;#34;s#security.debian.org#mirrors.aliyun.com/debian-security#g&amp;#34;&lt;/span> /etc/apt/sources.list
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apt update &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> apt-get install -y apt-transport-https ca-certificates --fix-missing
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 刷新软件列表并更新系统&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apt update &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> apt dist-upgrade
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="lxc-仓库源">LXC 仓库源
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 南京大学 LXC 仓库源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sed -i.bak &lt;span class="s2">&amp;#34;s#http://download.proxmox.com/images#https://mirrors.nju.edu.cn/proxmox/images#g&amp;#34;&lt;/span> /usr/share/perl5/PVE/APLInfo.pm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wget -O /var/lib/pve-manager/apl-info/mirrors.nju.edu.cn https://mirrors.nju.edu.cn/proxmox/images/aplinfo-pve-7.dat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl restart pvedaemon
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ceph-源">Ceph 源
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;deb https://mirrors.ustc.edu.cn/proxmox/debian/ceph-quincy bookworm no-subscription&amp;#34;&lt;/span> &amp;gt; /etc/apt/sources.list.d/ceph.list
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sed -i.bak &lt;span class="s2">&amp;#34;s#http://download.proxmox.com/debian#https://mirrors.ustc.edu.cn/proxmox/debian#g&amp;#34;&lt;/span> /usr/share/perl5/PVE/CLI/pveceph.pm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="配置">配置
&lt;/h2>&lt;h3 id="去除-pve-登录弹窗">去除 PVE 登录弹窗
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sed -Ezi.bak &lt;span class="s2">&amp;#34;s/(Ext.Msg.show\(\{\s+title: gettext\(&amp;#39;No valid sub)/void\(\{ \/\/\1/g&amp;#34;&lt;/span> /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl restart pveproxy.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="直通">直通
&lt;/h2>&lt;p>直通首先需要开启内核的 IOMMU 功能，修改 &lt;code>/etc/default/grub&lt;/code> 文件，添加 &lt;code>intel_iommu=on&lt;/code> 选项：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl"># GRUB_CMDLINE_LINUX_DEFAULT=&amp;#34;quiet&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">GRUB_CMDLINE_LINUX_DEFAULT=&amp;#34;quiet intel_iommu=on&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>更新一下 Grub 的配置：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">update-grub
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>编辑 &lt;code>vim /etc/modules&lt;/code> 文件，加载内核模块，添加下列内容：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">vfio
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vfio_iommu_type1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vfio_pci
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vfio_virqfd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在 Proxmox VE 中安装 openwrt 路由
重启设备即可开启 IOMMU 功能。&lt;/p>
&lt;h3 id="网卡直通">网卡直通
&lt;/h3>&lt;p>开启 IOMMU 后可直接在网页的虚拟机硬件中 &lt;code>添加PCI设备&lt;/code> ，选中需要直通的网卡即可。&lt;/p>
&lt;h3 id="硬盘直通">硬盘直通
&lt;/h3>&lt;h4 id="rdm-方式">RDM 方式
&lt;/h4>&lt;p>nvme 或其他走 PCI-E 通道的硬盘不建议使用这种方式，一般作为机械硬盘的直通方式。
先使用一下命令查看硬盘名称：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ls /dev/disk/by-id/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>会得到诸如 &lt;code>ata-xxxx&lt;/code> 或 &lt;code>nvme-xxxx&lt;/code> 形式的硬盘名称 &lt;code>${DISK_NAME}&lt;/code> ；使用以下命令将硬盘添加到虚拟机中：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">变量名&lt;/th>
&lt;th style="text-align:left">示例&lt;/th>
&lt;th style="text-align:left">描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">&lt;code>${VM_ID}&lt;/code>&lt;/td>
&lt;td style="text-align:left">101&lt;/td>
&lt;td style="text-align:left">虚拟机 ID&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>${DISK_NAME}&lt;/code>&lt;/td>
&lt;td style="text-align:left">nvme-Samsung_SSD_970_EVO_500GB_S5H7NS0NC21945D&lt;/td>
&lt;td style="text-align:left">硬盘名称&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">qm &lt;span class="nb">set&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">VM_ID&lt;/span>&lt;span class="si">}&lt;/span> -scsi1 /dev/disk/by-id/&lt;span class="si">${&lt;/span>&lt;span class="nv">DISK_NAME&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>此处的 &lt;code>-scsi1&lt;/code> 可修改为 &lt;code>-sata0&lt;/code> 或 &lt;code>-ide2&lt;/code> 等未占用的通道。&lt;/p>
&lt;h4 id="直通-pci-设备方式">直通 PCI 设备方式
&lt;/h4>&lt;p>走 PCI-E 通道的硬盘，诸如 nvme 固态、阵列卡等可通过直通 PCI 通道的方式直通给虚拟机。
直接在 Web 界面中通过 &lt;code>添加&lt;/code> - &lt;code>PCI 设备&lt;/code> 进行添加就可以了。&lt;/p>
&lt;h3 id="显卡直通">显卡直通
&lt;/h3>&lt;style type="text/css">
.notice {
--root-color: #444;
--root-background: #eff;
--title-color: #fff;
--title-background: #7bd;
--warning-title: #c33;
--warning-content: #fee;
--info-title: #fb7;
--info-content: #fec;
--note-title: #6be;
--note-content: #e7f2fa;
--tip-title: #5a5;
--tip-content: #efe
}
@media (prefers-color-scheme:dark) {
.notice {
--root-color: #ddd;
--root-background: #eff;
--title-color: #fff;
--title-background: #7bd;
--warning-title: #800;
--warning-content: #400;
--info-title: #a50;
--info-content: #420;
--note-title: #069;
--note-content: #023;
--tip-title: #363;
--tip-content: #121
}
}
body.dark .notice {
--root-color: #ddd;
--root-background: #eff;
--title-color: #fff;
--title-background: #7bd;
--warning-title: #800;
--warning-content: #400;
--info-title: #a50;
--info-content: #420;
--note-title: #069;
--note-content: #023;
--tip-title: #363;
--tip-content: #121
}
.notice {
padding: 18px;
line-height: 24px;
margin-bottom: 24px;
border-radius: 4px;
color: var(--root-color);
background: var(--root-background)
}
.notice p:last-child {
margin-bottom: 0
}
.notice-title {
margin: -18px -18px 12px;
padding: 4px 18px;
border-radius: 4px 4px 0 0;
font-weight: 700;
color: var(--title-color);
background: var(--title-background)
}
.notice.warning .notice-title {
background: var(--warning-title)
}
.notice.warning {
background: var(--warning-content)
}
.notice.info .notice-title {
background: var(--info-title)
}
.notice.info {
background: var(--info-content)
}
.notice.note .notice-title {
background: var(--note-title)
}
.notice.note {
background: var(--note-content)
}
.notice.tip .notice-title {
background: var(--tip-title)
}
.notice.tip {
background: var(--tip-content)
}
.icon-notice {
display: inline-flex;
align-self: center;
margin-right: 8px
}
.icon-notice img,
.icon-notice svg {
height: 1em;
width: 1em;
fill: currentColor
}
.icon-notice img,
.icon-notice.baseline svg {
top: .125em;
position: relative
}
&lt;/style>&lt;div class="notice warning" >
&lt;p class="notice-title">
&lt;span class="icon-notice baseline">
&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="126 76.5 300 300">
&lt;path d="M297.431 324.397v-34.255c0-3.245-2.344-5.95-5.358-5.95h-32.146c-3.014 0-5.358 2.705-5.358 5.95v34.255c0 3.245 2.344 5.95 5.358 5.95h32.146c3.014 0 5.358-2.705 5.358-5.95Zm-.335-67.428 3.014-82.753c0-1.081-.502-2.524-1.674-3.425-1.005-.902-2.512-1.983-4.019-1.983h-36.834c-1.507 0-3.014 1.081-4.019 1.983-1.172.901-1.674 2.704-1.674 3.786l2.846 82.392c0 2.344 2.512 4.146 5.693 4.146h30.975c3.013 0 5.525-1.803 5.692-4.146Zm-2.344-168.39L423.34 342.425c3.683 7.032 3.516 15.686-.335 22.717-3.85 7.031-10.883 11.358-18.417 11.358H147.413c-7.534 0-14.566-4.327-18.417-11.358-3.85-7.031-4.018-15.685-.335-22.716L257.248 88.578C260.93 81.188 268.13 76.5 276 76.5c7.87 0 15.069 4.688 18.752 12.08Z"/>
&lt;/svg>
&lt;/span>警告&lt;/p>&lt;p>显卡直通操作并未获得成功，请谨慎操作。&lt;/p>&lt;/div>
&lt;h4 id="pve-操作">PVE 操作
&lt;/h4>&lt;p>首先修改 Grub 配置文件 &lt;code>/etc/default/grub&lt;/code> 开启虚拟化并关闭显卡启动选项 &lt;code>intel_iommu=on&lt;/code> 、 &lt;code>video=efifb:off&lt;/code>：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl"># GRUB_CMDLINE_LINUX_DEFAULT=&amp;#34;quiet&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">GRUB_CMDLINE_LINUX_DEFAULT=&amp;#34;quiet intel_iommu=on video=efifb:off&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>编辑 &lt;code>/etc/modprobe.d/blacklist.conf&lt;/code> 文件，添加下列驱动到 PVE 黑名单：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">blacklist snd_hda_intel
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">blacklist snd_hda_codec_hdmi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">blacklist i915
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>查找核显和声卡的 &lt;code>${PCI_id}&lt;/code> ：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">lspci
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>可以看到屏幕上显示的 &lt;code>VGA compatible controller&lt;/code> 和 &lt;code>Audio device&lt;/code> ，他们分别为显卡和声卡，记录前面的 &lt;code>xx:xx&lt;/code> ，此为硬件的 ${PCI_ID} 。&lt;/p>
&lt;p>查询核显和声卡的 &lt;code>${HARDWARE_ID}&lt;/code> ：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">lspci -n -s &lt;span class="si">${&lt;/span>&lt;span class="nv">PCI_ID&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>输出的 &lt;code>8086:xxxx&lt;/code> 即为核显和声卡的 &lt;code>${HARDWARE_ID}&lt;/code> 。&lt;/p>
&lt;p>编辑 &lt;code>/etc/modprobe.d/vfio.conf&lt;/code> 文件添加直通组，多个设备可在 ids 后面每个设备之间用 &lt;code>,&lt;/code> 隔开：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">变量名&lt;/th>
&lt;th style="text-align:left">示例&lt;/th>
&lt;th style="text-align:left">描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">&lt;code>${PCI_ID}&lt;/code>&lt;/td>
&lt;td style="text-align:left">00:02.0&lt;/td>
&lt;td style="text-align:left">PCI ID&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>${HARDWARE_ID}&lt;/code>&lt;/td>
&lt;td style="text-align:left">8086:4e61&lt;/td>
&lt;td style="text-align:left">硬件 ID&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">options vfio-pci ids=${HARDWARE_ID_1},${HARDWARE_ID_2}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>编辑 &lt;code>/etc/modprobe.d/kvm.conf&lt;/code> 添加 options 防止 VM 死机&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">options kvm ignore_msrs=1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>更新内核并重启 PVE 虚拟机&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">update-initramfs -u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">reboot now
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>重启完成后，输入命令检查模块是否加载成功&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">lsmod &lt;span class="p">|&lt;/span> grep vfio
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="虚拟机操作">虚拟机操作
&lt;/h4>&lt;p>创建虚拟机需要使用 q35 型号，CPU 需要选择 host 模式以及打开 NUMA 。&lt;/p>
&lt;p>安装 windows 系统后不要联网，进入系统后马上在设备管理器中安装核显驱动，装好后关机。&lt;/p>
&lt;p>上传核显 vBios &lt;code>igup.bin&lt;/code> 到 PVE 下的 &lt;code>/root/&lt;/code> 目录下；&lt;/p>
&lt;p>在网页中删除直通的核显；&lt;/p>
&lt;p>默认的显示设备设置为无，并增加声卡的直通；&lt;/p>
&lt;p>使用下面的命令添加核显直通：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">变量名&lt;/th>
&lt;th style="text-align:left">示例&lt;/th>
&lt;th style="text-align:left">描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">&lt;code>${PCI_ID}&lt;/code>&lt;/td>
&lt;td style="text-align:left">00:02.0&lt;/td>
&lt;td style="text-align:left">PCI ID&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>${PCI_ID_HEX}&lt;/code>&lt;/td>
&lt;td style="text-align:left">0x02&lt;/td>
&lt;td style="text-align:left">PCI ID 的 16 进制&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">args: -device vfio-pci,host&lt;span class="o">=&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">PCI_ID&lt;/span>&lt;span class="si">}&lt;/span>,addr&lt;span class="o">=&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">PCI_ID_HEX&lt;/span>&lt;span class="si">}&lt;/span>,x-igd-gms&lt;span class="o">=&lt;/span>1,romfile&lt;span class="o">=&lt;/span>/root/igpu.bin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="lxc-挂载-nfs">LXC 挂载 nfs
&lt;/h2>&lt;p>默认的 LXC 容器由于安全等原因并不支持直接挂载 nfs / samba / cifs，但可通过一些方式开启。&lt;/p>
&lt;h3 id="webui">webui
&lt;/h3>&lt;p>特权容器在 &lt;code>选项&lt;/code> - &lt;code>功能&lt;/code> 中开启支持。&lt;/p>
&lt;p>&lt;img src="https://blog.nkit.eu.org/p/pve-install/lxc-enable-nfs.webp"
width="527"
height="594"
srcset="https://blog.nkit.eu.org/p/pve-install/lxc-enable-nfs_hu6727991248f3174a2bf67b18f5548116_33808_480x0_resize_q75_h2_box_2.webp 480w, https://blog.nkit.eu.org/p/pve-install/lxc-enable-nfs_hu6727991248f3174a2bf67b18f5548116_33808_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="lxc-enable-nfs"
class="gallery-image"
data-flex-grow="88"
data-flex-basis="212px"
>&lt;/p>
&lt;h3 id="修改配置文件">修改配置文件
&lt;/h3>&lt;p>增加配置模板：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">cp -i /etc/apparmor.d/lxc/lxc-default-cgns /etc/apparmor.d/lxc/lxc-default-with-nfs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nano /etc/apparmor.d/lxc/lxc-default-with-nfs
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-diff" data-lang="diff">&lt;span class="line">&lt;span class="cl"># Do not load this file. Rather, load /etc/apparmor.d/lxc-containers, which
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># will source all profiles under /etc/apparmor.d/lxc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">profile lxc-container-default-with-nfs flags=(attach_disconnected,mediate_deleted) {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> #include &amp;lt;abstractions/lxc/container-base&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # the container may never be allowed to mount devpts. If it does, it
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # will remount the host&amp;#39;s devpts. We could allow it to do it with
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # the newinstance option (but, right now, we don&amp;#39;t).
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> deny mount fstype=devpts,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mount fstype=cgroup -&amp;gt; /sys/fs/cgroup/**,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mount fstype=cgroup2 -&amp;gt; /sys/fs/cgroup/**,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mount fstype=overlay,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gi">+ # allow nfs mount
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gi">+ mount fstype=nfs,
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gi">+ mount fstype=nfs4,
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gi">+ mount fstype=nfsd,
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gi">+ mount fstype=rpc_pipefs,
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gi">&lt;/span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>重启服务：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">systemctl reload apparmor
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>修改容器配置：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">nano /etc/pve/lxc/&lt;span class="si">${&lt;/span>&lt;span class="nv">LXC_ID&lt;/span>&lt;span class="si">}&lt;/span>.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-diff" data-lang="diff">&lt;span class="line">&lt;span class="cl">parent: media_ready
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rootfs: local-zfs:basevol-200-disk-0/subvol-201-disk-0,size=8G
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">startup: order=2,up=30
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">swap: 512
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lxc.cgroup2.devices.allow: c 226:1 rwm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lxc.cgroup2.devices.allow: c 226:128 rwm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lxc.cgroup.devices.allow: c 29:0 rwm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lxc.autodev: 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lxc.hook.autodev: /var/lib/lxc/201/mount_hook.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gi">+ lxc.apparmor.profile: lxc-container-default-with-nfs
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在容器中挂载：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vim /etc/fstab
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl"># NFS mount
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># [nfs_ip]:[nfs_export] [local_mountpoint] nfs auto,nofail,noatime,nolock,intr,tcp,actimeo=1800 0 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.10.254:/mnt/hddpool/drama /mnt/drama nfs auto,nofail,noatime,nolock,intr,tcp,actimeo=1800 0 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.10.254:/mnt/hddpool/video /mnt/video nfs auto,nofail,noatime,nolock,intr,tcp,actimeo=1800 0 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.10.254:/mnt/buffer/bangumi /mnt/bangumi nfs auto,nofail,noatime,nolock,intr,tcp,actimeo=1800 0 0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>自签 SSL 证书</title><link>https://blog.nkit.eu.org/p/self-signed-ssl/</link><pubDate>Mon, 03 Jun 2024 22:33:15 +0800</pubDate><guid>https://blog.nkit.eu.org/p/self-signed-ssl/</guid><description>&lt;img src="https://blog.nkit.eu.org/p/self-signed-ssl/cover.webp" alt="Featured image of post 自签 SSL 证书" />&lt;h2 id="开始之前">开始之前
&lt;/h2>&lt;p>由于部分应用强制要求使用 TLS，找了一下自签内网域名证书的办法，
这里以 openwrt 为例，先安装 &lt;code>openssl-util&lt;/code>，找一个工作目录，如：&lt;code>/root/ssl/&lt;/code>。&lt;/p>
&lt;h2 id="创建根证书">创建根证书
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">openssl req &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -x509 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -nodes &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -days &lt;span class="m">3650&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -newkey rsa:2048 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -subj &lt;span class="s2">&amp;#34;/C=CN/ST=Beijing/L=Beijing/O=Meow&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -keyout root_ca.key &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -out root_ca.crt &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -reqexts v3_req &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -extensions v3_ca
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="创建域名证书">创建域名证书
&lt;/h2>&lt;p>创建文件夹&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir &lt;span class="si">${&lt;/span>&lt;span class="nv">service&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="创建域名私钥">创建域名私钥
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">openssl genrsa -out &lt;span class="si">${&lt;/span>&lt;span class="nv">service&lt;/span>&lt;span class="si">}&lt;/span>/server.key &lt;span class="m">2048&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="域名申请文件">域名申请文件
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">openssl req &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -new &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -key &lt;span class="si">${&lt;/span>&lt;span class="nv">service&lt;/span>&lt;span class="si">}&lt;/span>/server.key &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -subj &lt;span class="s2">&amp;#34;/C=CN/ST=Beijing/L=Beijing/O=Meow/CN=&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">service&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">.meow&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -sha256 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -out &lt;span class="si">${&lt;/span>&lt;span class="nv">service&lt;/span>&lt;span class="si">}&lt;/span>/server.csr
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="申请配置文件">申请配置文件
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vim config.ext
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[ req ]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">default_bits = 1024
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">distinguished_name = req_distinguished_name
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">req_extensions = san
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">extensions = san
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ req_distinguished_name ]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">countryName = CN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">stateOrProvinceName = Definesys
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">localityName = Definesys
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">organizationName = Definesys
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ SAN ]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">authorityKeyIdentifier=keyid,issuer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">basicConstraints=CA:FALSE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">keyUsage = digitalSignature, nonRepudiation, keyEncipherment, dataEncipherment
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">subjectAltName = @alt_names
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ alt_names ]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IP.1 = ${service_ip}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DNS.1 = ${service}.meow
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="申请证书">申请证书
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">openssl x509 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -req &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -days &lt;span class="m">3650&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -in &lt;span class="si">${&lt;/span>&lt;span class="nv">service&lt;/span>&lt;span class="si">}&lt;/span>/server.csr &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -CA root_ca.crt &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -CAkey root_ca.key &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -CAcreateserial &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -sha256 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -out &lt;span class="si">${&lt;/span>&lt;span class="nv">service&lt;/span>&lt;span class="si">}&lt;/span>/server.crt &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -extfile config.ext &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -extensions SAN
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="nginx-ssl-配置">Nginx SSL 配置
&lt;/h2>&lt;p>拷贝证书到 nginx 配置目录：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mv &lt;span class="si">${&lt;/span>&lt;span class="nv">service&lt;/span>&lt;span class="si">}&lt;/span> /etc/nginx/conf.d/&lt;span class="si">${&lt;/span>&lt;span class="nv">service&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>应用于 luci-nginx 时应注意取消配置自带的自签证书：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">config server &amp;#39;_lan&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> list listen &amp;#39;443 ssl default_server&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> list listen &amp;#39;[::]:443 ssl default_server&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> option server_name &amp;#39;_lan&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> list include &amp;#39;restrict_locally&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> list include &amp;#39;conf.d/*.locations&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> option ssl_certificate &amp;#39;/etc/nginx/conf.d/server.crt&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> option ssl_certificate_key &amp;#39;/etc/nginx/conf.d/server.key&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> option ssl_session_cache &amp;#39;shared:SSL:32k&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> option ssl_session_timeout &amp;#39;64m&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> option access_log &amp;#39;off; # logd openwrt&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> option ssl_ciphers &amp;#39;ECDHE-RSA-CNS128-GCM-SHA256:ECDHE:ECDH:CNS:HIGH:!NULL:!aNULL:!MD5:!ADH:!R
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> option ssl_protocols &amp;#39;TLSv1 TLSv1.1 TLSv1.2&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> option ssl_prefer_server_ciphers &amp;#39;on&amp;#39;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>其他服务 nginx 配置：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-nginx" data-lang="nginx">&lt;span class="line">&lt;span class="cl">&lt;span class="k">server&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">server_name&lt;/span> &lt;span class="nv">${service}.meow&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">set&lt;/span> &lt;span class="nv">$forward_scheme&lt;/span> &lt;span class="s">http&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">set&lt;/span> &lt;span class="nv">$server&lt;/span> &lt;span class="nv">$server_addr&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">set&lt;/span> &lt;span class="nv">$port&lt;/span> &lt;span class="nv">${service_port}&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">listen&lt;/span> &lt;span class="mi">443&lt;/span> &lt;span class="s">ssl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">listen&lt;/span> &lt;span class="s">[::]:443&lt;/span> &lt;span class="s">ssl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">ssl_certificate&lt;/span> &lt;span class="s">/etc/nginx/conf.d/&lt;/span>&lt;span class="nv">${service}/server.crt&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">ssl_certificate_key&lt;/span> &lt;span class="s">/etc/nginx/conf.d/&lt;/span>&lt;span class="nv">${service}/server.key&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">ssl_session_cache&lt;/span> &lt;span class="s">shared:SSL:32k&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">ssl_session_timeout&lt;/span> &lt;span class="mi">5m&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">ssl_ciphers&lt;/span> &lt;span class="s">ECDHE-RSA-CNS128-GCM-SHA256:ECDHE:ECDH:CNS:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">ssl_protocols&lt;/span> &lt;span class="s">TLSv1&lt;/span> &lt;span class="s">TLSv1.1&lt;/span> &lt;span class="s">TLSv1.2&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">ssl_prefer_server_ciphers&lt;/span> &lt;span class="no">on&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">include&lt;/span> &lt;span class="s">conf.d/proxy_include/location.conf&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>服务器 Docker 镜像</title><link>https://blog.nkit.eu.org/p/docker-server/</link><pubDate>Mon, 03 Jun 2024 21:59:06 +0800</pubDate><guid>https://blog.nkit.eu.org/p/docker-server/</guid><description>&lt;img src="https://blog.nkit.eu.org/p/docker-server/cover.webp" alt="Featured image of post 服务器 Docker 镜像" />&lt;h2 id="安装-docker">安装 Docker
&lt;/h2>&lt;p>安装 Docker 详见： &lt;a class="link" href="../debian-server#docker" >Debian 服务器搭建&lt;/a>&lt;/p>
&lt;h2 id="管理型容器">管理型容器
&lt;/h2>&lt;h3 id="portainer---docker-管理">Portainer - Docker 管理
&lt;/h3>&lt;p>Portainer 是一个 Docker 的网页管理工具，
可通过网页访问管理页面控制容器、镜像的启停、更新、创建删除等操作。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">docker run -d &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --name portainer &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --restart unless-stopped &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -p 9443:9443 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -v /var/run/docker.sock:/var/run/docker.sock &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -v portainer_data:/data &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> portainer/portainer-ce
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="portaineragent">PortainerAgent
&lt;/h3>&lt;p>Portainer 可通过 Agent 对其他 Docker 环境进行管理。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">docker run -d &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -p 9001:9001 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --name portainer_agent &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --restart unless-stopped &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -v /var/run/docker.sock:/var/run/docker.sock &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -v /var/lib/docker/volumes:/var/lib/docker/volumes &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> portainer/agent
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="轻量静态型容器">轻量静态型容器
&lt;/h2>&lt;p>轻量型容器或管理容器可直接部署在 openwrt 中。&lt;/p>
&lt;h3 id="flare---导航">Flare - 导航
&lt;/h3>&lt;p>轻量、快速、美观的个人导航页面。
无任何数据库依赖，
支持在线编辑。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">docker run -d &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --name flare &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --restart unless-stopped &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -p 5005:5005 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -v /opt/volume/flare:/app &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> soulteary/flare
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="memos---临时记事">Memos - 临时记事
&lt;/h3>&lt;p>隐私优先的轻量级笔记服务，
轻松捕捉并分享精彩想法。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">docker run -d &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --name memos &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --restart unless-stopped &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -p 5230:5230 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -v /opt/volume/memos:/var/opt/memos &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> neosmemo/memos
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="vaultwarden---密码管理">VaultWarden - 密码管理
&lt;/h3>&lt;p>使用 Bitwarden API 的轻量密码管理工具。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">docker run -d &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --name vaultwarden &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --restart unless-stopped &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -p 8100:80 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -v /opt/password:/data &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> vaultwarden/server
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="服务器容器组织">服务器容器组织
&lt;/h2>&lt;p>使用 docker compose 进行容器编排，使用 docker 映射 nfs 卷。&lt;/p>
&lt;h3 id="下载型容器">下载型容器
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;span class="lnt">81
&lt;/span>&lt;span class="lnt">82
&lt;/span>&lt;span class="lnt">83
&lt;/span>&lt;span class="lnt">84
&lt;/span>&lt;span class="lnt">85
&lt;/span>&lt;span class="lnt">86
&lt;/span>&lt;span class="lnt">87
&lt;/span>&lt;span class="lnt">88
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">services&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">aria2&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">aria2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">p3terx/aria2-pro&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">unless-stopped&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">6800&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">6800&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">6888&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">6888&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">6888&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">6888&lt;/span>&lt;span class="l">/udp&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./aria2:/config&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">nas_downloads:/downloads&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">PUID=1000&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">PGID=1000&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">UMASK_SET=022&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">RPC_SECRET=123456&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">RPC_PORT=6800&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">LISTEN_PORT=6888&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">DISK_CACHE=64M&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">IPV6_MODE=true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">UPDATE_TRACKERS=true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">TZ=Asia/Shanghai&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">logging&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">driver&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">json-file&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">options&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">max-size&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">1m&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ariang&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ariang&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">p3terx/ariang&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">unless-stopped&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>--&lt;span class="l">port 6880 --ipv6&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">depends_on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">aria2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">6880&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">6880&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">logging&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">driver&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">json-file&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">options&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">max-size&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">1m&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">qbittorrent&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">qbittorrent&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">p3terx/qbittorrent-enhanced&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">unless-stopped&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">28080&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">28080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">28888&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">28888&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">28888&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">28888&lt;/span>&lt;span class="l">/udp&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./qbittorrent:/qBittorrent&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">nas_downloads:/downloads&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">nas_bangumi:/bangumi&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">PUID=1000&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">PGID=1000&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">UMASK_SET=022&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">TZ=Asia/Shanghai&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">QBT_WEBUI_PORT=28080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">autobangumi&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">autobangumi&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">estrellaxd/auto_bangumi&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">unless-stopped&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">depends_on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">qbittorrent&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">7892&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">7892&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">PUID=1000&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">PGID=1000&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">TZ=Asia/Shanghai&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./autobangumi/config:/app/config&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./autobangumi/data:/app/data&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">nas_downloads&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">driver_opts&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;nfs&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">o&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;addr=192.168.10.254,nolock,soft,rw&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">device&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;:/mnt/buffer/downloads&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">nas_bangumi&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">driver_opts&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;nfs&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">o&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;addr=192.168.10.254,nolock,soft,rw&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">device&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;:/mnt/buffer/bangumi&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>因百度网盘流氓行为，单独控制启停。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">services&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">BaiduNetdisk&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">baidunetdisk&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">johngong/baidunetdisk&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">unless-stopped&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">5800&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">5800&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">5900&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">5900&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./netdisk:/config&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">nas_downloads:/downloads&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">USER_ID=1000&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">GROUP_ID=1000&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">nas_downloads&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">driver_opts&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;nfs&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">o&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;addr=192.168.10.254,nolock,soft,rw&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">device&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;:/mnt/buffer/downloads&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="资源型容器">资源型容器
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">services&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">alist&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">alist&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">xhofe/alist&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">unless-stopped&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">5244&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">5244&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./alist:/opt/alist/data&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">PUID=1000&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">PGID=1000&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">UMASK=022&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">xiaoya&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">xiaoya&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">xiaoyaliu/alist&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">unless-stopped&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">5678&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">80&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./xiaoya:/data&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="媒体容器">媒体容器
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;span class="lnt">81
&lt;/span>&lt;span class="lnt">82
&lt;/span>&lt;span class="lnt">83
&lt;/span>&lt;span class="lnt">84
&lt;/span>&lt;span class="lnt">85
&lt;/span>&lt;span class="lnt">86
&lt;/span>&lt;span class="lnt">87
&lt;/span>&lt;span class="lnt">88
&lt;/span>&lt;span class="lnt">89
&lt;/span>&lt;span class="lnt">90
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">services&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">calibreweb&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">calibre&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">linuxserver/calibre-web&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">unless-stopped&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">8083&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">8083&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./calibre:/config&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">nas_book:/books&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">PUID=1000&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">PGID=1000&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">TZ=Asia/Shanghai&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">navidrome&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">navidrome&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">deluan/navidrome&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">unless-stopped&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">4533&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">4533&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./navidrome:/data&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">nas_music:/music:ro&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ND_SCANSCHEDULE&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">1h&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ND_LOGLEVEL&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">info&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ND_BASEURL&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">komga&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">komga&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">gotson/komga&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">unless-stopped&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">25600&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">25600&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./komga:/config&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">nas_comic:/data&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">/etc/timezone:/etc/timezone:ro&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">user&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1000&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">1000&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">piwigo&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">piwigo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">linuxserver/piwigo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">unless-stopped&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">8001&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">80&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./piwigo:/config&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">nas_image:/gallery&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">PUID=1000&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">PGID=1000&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">TZ=Asia/Shanghai&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">mediadb&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mediadb&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">mariadb&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">unless-stopped&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">8000&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">3306&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./mediadb/log:/var/log/mysql&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./mediadb/data:/var/lib/mysql&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./mediadb/conf.d:/etc/mysql/conf.d&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">/etc/localtime:/etc/localtime:ro&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">MARIADB_ROOT_PASSWORD=Media@Meow&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">nas_book&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">driver_opts&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;nfs&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">o&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;addr=192.168.10.254,nolock,soft,rw&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">device&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;:/mnt/hddpool/book&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">nas_music&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">driver_opts&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;nfs&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">o&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;addr=192.168.10.254,nolock,soft,rw&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">device&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;:/mnt/hddpool/music&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">nas_comic&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">driver_opts&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;nfs&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">o&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;addr=192.168.10.254,nolock,soft,rw&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">device&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;:/mnt/hddpool/comic&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">nas_image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">driver_opts&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;nfs&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">o&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;addr=192.168.10.254,nolock,soft,rw&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">device&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;:/mnt/hddpool/image&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="rss-容器">rss 容器
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">services&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">rsshub&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rsshub&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">diygod/rsshub&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">unless-stopped&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">1200&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">1200&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">freshrss&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">freshrss&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">freshrss/freshrss&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">unless-stopped&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">1210&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">80&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">depends_on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">rsshub&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">logging&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">options&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">max-size&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">10m&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./freshrss/data:/var/www/FreshRSS/data&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./freshrss/extensions:/var/www/FreshRSS/extensions&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">TZ&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Asia/Shanghai&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">CRON_MIN&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;1,15,31&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">TRUSTED_PROXY&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">172.16.0.0&lt;/span>&lt;span class="l">/12 192.168.0.0/16&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="工具型容器">工具型容器
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">services&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c">#speedtest:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># container_name: speedtest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># image: adolfintel/speedtest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># restart: unless-stopped&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># ports:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - 8110:80&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># environment:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># MODE: standalone&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ittools&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ittools&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">corentinth/it-tools&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">unless-stopped&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">8120&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">80&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">webp2jpg&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">webp2jpg&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">wbsu2003/webp2jpg-online&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">unless-stopped&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">8130&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">80&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">picsmaller&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">picsmaller&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">vimiix/pic-smaller&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">unless-stopped&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">8140&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">3000&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">spdf&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">spdf&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">frooodle/s-pdf&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">unless-stopped&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">8150&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./spdf/trainingData:/usr/share/tessdata&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./spdf/extraConfigs:/configs&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">DOCKER_ENABLE_SECURITY=false&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">INSTALL_BOOK_AND_ADVANCED_HTML_OPS=false&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">LANGS=zh_CN&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">drawdb&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">drawdb&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">build&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">drawdb&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">unless-stopped&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">8160&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">80&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">plantuml&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">plantuml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">plantuml/plantuml-server&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">unless-stopped&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">8170&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">jsoncrack&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">jsoncrack&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">shokohsc/jsoncrack&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">unless-stopped&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">8180&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>网络环境配置</title><link>https://blog.nkit.eu.org/p/network-config/</link><pubDate>Mon, 03 Jun 2024 21:26:50 +0800</pubDate><guid>https://blog.nkit.eu.org/p/network-config/</guid><description>&lt;img src="https://blog.nkit.eu.org/p/network-config/cover.webp" alt="Featured image of post 网络环境配置" />&lt;h2 id="路由">路由
&lt;/h2>&lt;h3 id="软件包">软件包
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>包名&lt;/th>
&lt;th>描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>luci-app-dockerman&lt;/td>
&lt;td>Docker&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>luci-nginx&lt;/td>
&lt;td>Nginx&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>luci-app-nginx-manager&lt;/td>
&lt;td>Nginx 管理（可选）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>luci-app-openclash&lt;/td>
&lt;td>科学上网&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>luci-app-vlmcsd&lt;/td>
&lt;td>KMS 激活&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>luci-app-zerotier&lt;/td>
&lt;td>异地组网&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>luci-app-nfs&lt;/td>
&lt;td>NFS 服务器&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>luci-app-vsftpd&lt;/td>
&lt;td>SFTP 服务器&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>luci-app-samba4&lt;/td>
&lt;td>Samba 服务器&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>软件包使用 webui 安装，以方便安装多语言组件。之后关闭 &lt;code>系统&lt;/code> - &lt;code>启动项&lt;/code> 中的 &lt;code>uhttpd&lt;/code> 自动启动。&lt;/p>
&lt;h3 id="uci-defaults">uci-defaults
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Beware! This script will be in /rom/etc/uci-defaults/ as part of the image.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Uncomment lines to apply:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">wlan_name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;Eroneko&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">wlan_password&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">root_password&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">lan_address&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;192.168.11.1&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">lan_netmask&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;255.255.255.0&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">pppoe_username&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">pppoe_password&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># log potential errors&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">exec&lt;/span> &amp;gt;/tmp/setup.log 2&amp;gt;&lt;span class="p">&amp;amp;&lt;/span>&lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -n &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$root_password&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">(&lt;/span>&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$root_password&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> sleep 1&lt;span class="p">;&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$root_password&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="p">|&lt;/span> passwd &amp;gt; /dev/null
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Configure LAN&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># More options: https://openwrt.org/docs/guide-user/base-system/basic-networking&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -n &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$lan_address&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> network.lan.ipaddr&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$lan_address&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> network.lan.netmask&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$lan_netmask&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci commit network
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Configure WLAN&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># More options: https://openwrt.org/docs/guide-user/network/wifi/basic#wi-fi_interfaces&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -n &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$wlan_name&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> -a -n &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$wlan_password&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> -a &lt;span class="si">${#&lt;/span>&lt;span class="nv">wlan_password&lt;/span>&lt;span class="si">}&lt;/span> -ge &lt;span class="m">8&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> wireless.@wifi-device&lt;span class="o">[&lt;/span>0&lt;span class="o">]&lt;/span>.disabled&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;0&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> wireless.@wifi-iface&lt;span class="o">[&lt;/span>0&lt;span class="o">]&lt;/span>.disabled&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;0&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> wireless.@wifi-iface&lt;span class="o">[&lt;/span>0&lt;span class="o">]&lt;/span>.encryption&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;psk2&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> wireless.@wifi-iface&lt;span class="o">[&lt;/span>0&lt;span class="o">]&lt;/span>.ssid&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$wlan_name&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> wireless.@wifi-iface&lt;span class="o">[&lt;/span>0&lt;span class="o">]&lt;/span>.key&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$wlan_password&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> wireless.@wifi-device&lt;span class="o">[&lt;/span>1&lt;span class="o">]&lt;/span>.disabled&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;0&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> wireless.@wifi-iface&lt;span class="o">[&lt;/span>1&lt;span class="o">]&lt;/span>.disabled&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;0&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> wireless.@wifi-iface&lt;span class="o">[&lt;/span>1&lt;span class="o">]&lt;/span>.encryption&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;psk2&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> wireless.@wifi-iface&lt;span class="o">[&lt;/span>1&lt;span class="o">]&lt;/span>.ssid&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$wlan_name&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> wireless.@wifi-iface&lt;span class="o">[&lt;/span>1&lt;span class="o">]&lt;/span>.key&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$wlan_password&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci commit wireless
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Configure PPPoE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># More options: https://openwrt.org/docs/guide-user/network/wan/wan_interface_protocols#protocol_pppoe_ppp_over_ethernet&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -n &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$pppoe_username&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> -a &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$pppoe_password&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> network.wan.proto&lt;span class="o">=&lt;/span>pppoe
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> network.wan.username&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$pppoe_username&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> network.wan.password&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$pppoe_password&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci commit network
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;All done!&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="自定义配置">自定义配置
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;span class="lnt">134
&lt;/span>&lt;span class="lnt">135
&lt;/span>&lt;span class="lnt">136
&lt;/span>&lt;span class="lnt">137
&lt;/span>&lt;span class="lnt">138
&lt;/span>&lt;span class="lnt">139
&lt;/span>&lt;span class="lnt">140
&lt;/span>&lt;span class="lnt">141
&lt;/span>&lt;span class="lnt">142
&lt;/span>&lt;span class="lnt">143
&lt;/span>&lt;span class="lnt">144
&lt;/span>&lt;span class="lnt">145
&lt;/span>&lt;span class="lnt">146
&lt;/span>&lt;span class="lnt">147
&lt;/span>&lt;span class="lnt">148
&lt;/span>&lt;span class="lnt">149
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 删除全局 ipv6 前缀&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">delete_ula_prefix&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 配置访问桥接光猫服务器&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">modem_address&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;192.168.1.2&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">modem_netmask&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;255.255.255.0&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">modem_interface_address&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;192.168.1.1&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 启动 ntp 服务器&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">enable_ntp_server&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 启动 KMS 服务器&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">enable_kms_server&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ZeroTier 异地组网&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">zerotier_network&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">zerotier_address&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;192.168.192.10&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">zerotier_netmask&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;255.255.255.0&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">zerotier_allow_firewall_zones&lt;/span>&lt;span class="o">=(&lt;/span>&lt;span class="s1">&amp;#39;lan&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;docker&amp;#39;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># dnsmasq 劫持域名&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">dnsmasq_addresses&lt;/span>&lt;span class="o">=(&lt;/span>&lt;span class="s1">&amp;#39;/server.meow/192.168.10.2&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;/pve.meow/192.168.10.3&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;/nas.meow/192.168.10.254&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;/jellyfin.meow/192.168.10.201&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;/lsvr.meow/192.168.10.253&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;/nginx.meow/192.168.10.253&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;/alist.meow/xiaoya.meow/192.168.10.253&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;/rsshub.meow/rss.meow/192.168.10.253&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;/book.meow/comic.meow/music.meow/image.meow/192.168.10.253&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;/openwrt.meow/nav.meow/clash.meow/docker.meow/file.meow/password.meow/memos.meow/192.168.10.1&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;/ariang.meow/qbte.meow/bangumi.meow/baidu.meow/192.168.10.253&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;/drawdb.meow/plantuml.meow/jsoncrack.meow/speed.meow/ittools.meow/webp.meow/picsm.meow/pdf.meow/192.168.10.253&amp;#39;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 配置 Docker&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">enable_docker&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">docker_allow_firewall_zones&lt;/span>&lt;span class="o">=(&lt;/span>&lt;span class="s1">&amp;#39;lan&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;zerotier&amp;#39;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">docker_registry_mirror&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;https://hub-mirror.c.163.com&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$delete_ula_prefix&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> -eq &lt;span class="m">1&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;删除全局 ipv6 前缀...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci del network.globals.ula_prefix
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci commit network
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -n &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$modem_address&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> -a -n &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$modem_interface_address&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;配置桥接光猫访问...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> network.modem&lt;span class="o">=&lt;/span>interface
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> network.modem.proto&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;static&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> network.modem.device&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;eth1&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> network.modem.ipaddr&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$modem_interface_address&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> network.modem.netmask&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$modem_netmask&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> network.modem.defaultroute&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;0&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci add firewall zone
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci add_list firewall.@zone&lt;span class="o">[&lt;/span>1&lt;span class="o">]&lt;/span>.network&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;modem&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci add network route
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> network.@route&lt;span class="o">[&lt;/span>-1&lt;span class="o">]&lt;/span>.interface&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;lan&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> network.@route&lt;span class="o">[&lt;/span>-1&lt;span class="o">]&lt;/span>.target&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$modem_address&lt;/span>&lt;span class="s2">/32&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> network.@route&lt;span class="o">[&lt;/span>-1&lt;span class="o">]&lt;/span>.gateway&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$modem_interface_address&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci commit network
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci commit firewall
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$enable_ntp_server&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> -eq &lt;span class="m">1&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;启用 NTP 服务器...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> system.ntp.enable_server&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;1&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> system.ntp.interface&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;lan&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> system.ntp.use_dhcp&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;0&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci add_list system.ntp.server&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;ntp.aliyun.com&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci add_list system.ntp.server&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;ntp.ntsc.ac.cn&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci add_list system.ntp.server&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;cn.ntp.org.cn&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci commit system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$enable_kms_server&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> -eq &lt;span class="m">1&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;启用 KMS 服务器...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> vlmcsd.config.enabled&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;1&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> vlmcsd.config.autoactivate&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;1&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci commit vlmcsd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -n &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$zerotier_network&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;配置 ZeroTier 异地组网...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci add_list zerotier.sample_config.join&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$zerotier_network&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> zerotier.sample_config.enabled&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;1&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> zerotier.sample_config.nat&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;1&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci commit zerotier
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 取得 zerotier 接口&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;等待 ZeroTier 虚拟接口...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /etc/init.d/zerotier restart
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sleep &lt;span class="m">5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">zerotier_interface&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>ifconfig &lt;span class="p">|&lt;/span> grep &lt;span class="s1">&amp;#39;^zt&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> awk &lt;span class="s1">&amp;#39;{print $1}&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> network.zerotier&lt;span class="o">=&lt;/span>interface
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> network.zerotier.device&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$zerotier_interface&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> network.zerotier.proto&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;static&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> network.zerotier.ipaddr&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$zerotier_address&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> network.zerotier.netmask&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$zerotier_netmask&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci add firewall zone
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> firewall.@zone&lt;span class="o">[&lt;/span>-1&lt;span class="o">]&lt;/span>.name&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;zerotier&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> firewall.@zone&lt;span class="o">[&lt;/span>-1&lt;span class="o">]&lt;/span>.input&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;ACCEPT&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> firewall.@zone&lt;span class="o">[&lt;/span>-1&lt;span class="o">]&lt;/span>.output&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;ACCEPT&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> firewall.@zone&lt;span class="o">[&lt;/span>-1&lt;span class="o">]&lt;/span>.forward&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;ACCEPT&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci add_list firewall.@zone&lt;span class="o">[&lt;/span>-1&lt;span class="o">]&lt;/span>.network&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;zerotier&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> zone in &lt;span class="si">${&lt;/span>&lt;span class="nv">zerotier_allow_firewall_zones&lt;/span>&lt;span class="p">[@]&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$zone&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> -eq &lt;span class="s1">&amp;#39;lan&amp;#39;&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci add firewall forwarding
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> firewall.@forwarding&lt;span class="o">[&lt;/span>-1&lt;span class="o">]&lt;/span>.src&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$zone&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> firewall.@forwarding&lt;span class="o">[&lt;/span>-1&lt;span class="o">]&lt;/span>.dest&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;zerotier&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci add firewall forwarding
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> firewall.@forwarding&lt;span class="o">[&lt;/span>-1&lt;span class="o">]&lt;/span>.src&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;zerotier&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> firewall.@forwarding&lt;span class="o">[&lt;/span>-1&lt;span class="o">]&lt;/span>.dest&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$zone&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci commit network
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci commit firewall
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -n &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$dnsmasq_addresses&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;配置 dnsmasq...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> address in &lt;span class="si">${&lt;/span>&lt;span class="nv">dnsmasq_addresses&lt;/span>&lt;span class="p">[@]&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci add_list dhcp.@dnsmasq&lt;span class="o">[&lt;/span>0&lt;span class="o">]&lt;/span>.address&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$address&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci commit dhcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$enable_docker&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> -eq &lt;span class="m">1&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;配置 Docker...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> zone in &lt;span class="si">${&lt;/span>&lt;span class="nv">docker_allow_firewall_zones&lt;/span>&lt;span class="p">[@]&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$zone&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> -eq &lt;span class="s1">&amp;#39;lan&amp;#39;&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci add firewall forwarding
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> firewall.@forwarding&lt;span class="o">[&lt;/span>-1&lt;span class="o">]&lt;/span>.src&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$zone&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> firewall.@forwarding&lt;span class="o">[&lt;/span>-1&lt;span class="o">]&lt;/span>.dest&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;docker&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci add firewall forwarding
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> firewall.@forwarding&lt;span class="o">[&lt;/span>-1&lt;span class="o">]&lt;/span>.src&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;docker&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci &lt;span class="nb">set&lt;/span> firewall.@forwarding&lt;span class="o">[&lt;/span>-1&lt;span class="o">]&lt;/span>.dest&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$zone&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci commit firewall
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -n &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$docker_registry_mirror&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci del dockerd.globals.registry_mirrors
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci add_list dockerd.globals.registry_mirrors&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$docker_registry_mirror&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uci commit dockerd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="hosts">hosts
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># weiyun&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">101.89&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">39.11&lt;/span> &lt;span class="n">weiyun&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">109.244&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">157.5&lt;/span> &lt;span class="n">share&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">weiyun&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">109.244&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">173.140&lt;/span> &lt;span class="n">share&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">weiyun&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># blocked&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">127.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.1&lt;/span> &lt;span class="n">geo2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">adobe&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">127.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.1&lt;/span> &lt;span class="n">fpdownload2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">macromedia&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">127.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.1&lt;/span> &lt;span class="n">fpdownload&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">macromedia&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">127.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.1&lt;/span> &lt;span class="n">macromedia&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="nginx">Nginx
&lt;/h2>&lt;h3 id="file-server">File Server
&lt;/h3>&lt;p>&lt;code>conf.d/file.conf&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-nginx" data-lang="nginx">&lt;span class="line">&lt;span class="cl">&lt;span class="k">server&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">server_name&lt;/span> &lt;span class="s">file.meow&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">listen&lt;/span> &lt;span class="mi">80&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">listen&lt;/span> &lt;span class="s">[::]:80&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">root&lt;/span> &lt;span class="s">/opt/file&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">charset&lt;/span> &lt;span class="s">utf-8&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">location&lt;/span> &lt;span class="s">/&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">autoindex&lt;/span> &lt;span class="no">on&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1"># 启用自动首页功能
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kn">autoindex_format&lt;/span> &lt;span class="s">html&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1"># 首页格式为HTML
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kn">autoindex_exact_size&lt;/span> &lt;span class="no">off&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1"># 文件大小自动换算
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kn">autoindex_localtime&lt;/span> &lt;span class="no">on&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1"># 按照服务器时间显示文件时间
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kn">default_type&lt;/span> &lt;span class="s">application/octet-stream&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="c1"># 默认MIME类型设置
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kn">if&lt;/span> &lt;span class="s">(&lt;/span>&lt;span class="nv">$request_filename&lt;/span> &lt;span class="p">~&lt;/span>&lt;span class="sr">*&lt;/span> &lt;span class="s">^.*?\.(txt|doc|pdf|rar|gz|zip|docx|exe|xlsx|ppt|pptx)&lt;/span>$&lt;span class="s">)&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 当文件格式为上述格式时，将头字段属性Content-Disposition的值设置为&amp;#34;attachment&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kn">add_header&lt;/span> &lt;span class="s">Content-Disposition:&lt;/span> &lt;span class="s">&amp;#39;attachment&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="kn">&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">sendfile&lt;/span> &lt;span class="no">on&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1"># 开启零复制文件传输功能
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kn">sendfile_max_chunk&lt;/span> &lt;span class="mi">1m&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1"># 每个sendfile调用的最大传输量为1MB
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kn">tcp_nopush&lt;/span> &lt;span class="no">on&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1"># 启用最小传输限制功能
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kn">directio&lt;/span> &lt;span class="mi">5m&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1"># 当文件大于5MB时以直接读取磁盘的方式读取文件
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kn">directio_alignment&lt;/span> &lt;span class="mi">4096&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1"># 与磁盘的文件系统对齐
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kn">output_buffers&lt;/span> &lt;span class="mi">4&lt;/span> &lt;span class="mi">32k&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1"># 文件输出的缓冲区大小为128KB
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kn">max_ranges&lt;/span> &lt;span class="mi">4096&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1"># 客户端执行范围读取的最大值是4096B
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kn">send_timeout&lt;/span> &lt;span class="s">20s&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1"># 客户端引发传输超时时间为20s
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kn">postpone_output&lt;/span> &lt;span class="mi">2048&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1"># 当缓冲区的数据达到2048B时再向客户端发送
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kn">chunked_transfer_encoding&lt;/span> &lt;span class="no">on&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1"># 启用分块传输标识
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="password-server">Password Server
&lt;/h3>&lt;p>&lt;code>conf.d/password.conf&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-nginx" data-lang="nginx">&lt;span class="line">&lt;span class="cl">&lt;span class="k">server&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">server_name&lt;/span> &lt;span class="s">password.meow&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">set&lt;/span> &lt;span class="nv">$forward_scheme&lt;/span> &lt;span class="s">http&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">set&lt;/span> &lt;span class="nv">$server&lt;/span> &lt;span class="nv">$server_addr&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">set&lt;/span> &lt;span class="nv">$port&lt;/span> &lt;span class="mi">8100&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">listen&lt;/span> &lt;span class="mi">443&lt;/span> &lt;span class="s">ssl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">listen&lt;/span> &lt;span class="s">[::]:443&lt;/span> &lt;span class="s">ssl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">ssl_certificate&lt;/span> &lt;span class="s">/etc/nginx/conf.d/password/server.crt&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">ssl_certificate_key&lt;/span> &lt;span class="s">/etc/nginx/conf.d/password/server.key&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">ssl_session_cache&lt;/span> &lt;span class="s">shared:SSL:32k&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">ssl_session_timeout&lt;/span> &lt;span class="mi">5m&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">ssl_ciphers&lt;/span> &lt;span class="s">ECDHE-RSA-CNS128-GCM-SHA256:ECDHE:ECDH:CNS:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">ssl_protocols&lt;/span> &lt;span class="s">TLSv1&lt;/span> &lt;span class="s">TLSv1.1&lt;/span> &lt;span class="s">TLSv1.2&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">ssl_prefer_server_ciphers&lt;/span> &lt;span class="no">on&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">include&lt;/span> &lt;span class="s">conf.d/proxy_include/location.conf&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="meow">Meow
&lt;/h3>&lt;p>&lt;code>conf.d/proxy_include/location.conf&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-nginx" data-lang="nginx">&lt;span class="line">&lt;span class="cl">&lt;span class="k">location&lt;/span> &lt;span class="s">/&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">add_header&lt;/span> &lt;span class="s">X-Served-By&lt;/span> &lt;span class="nv">$host&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">proxy_set_header&lt;/span> &lt;span class="s">Host&lt;/span> &lt;span class="nv">$host&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">proxy_set_header&lt;/span> &lt;span class="s">X-Forwarded-Scheme&lt;/span> &lt;span class="nv">$scheme&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">proxy_set_header&lt;/span> &lt;span class="s">X-Forwarded-Proto&lt;/span> &lt;span class="nv">$scheme&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">proxy_set_header&lt;/span> &lt;span class="s">X-Forwarded-For&lt;/span> &lt;span class="nv">$proxy_add_x_forwarded_for&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">proxy_set_header&lt;/span> &lt;span class="s">X-Real-IP&lt;/span> &lt;span class="nv">$remote_addr&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">proxy_pass&lt;/span> &lt;span class="nv">$forward_scheme://$server:$port$request_uri&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>conf.d/meow.conf&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-nginx" data-lang="nginx">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># nav
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">server&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">server_name&lt;/span> &lt;span class="s">nav.meow&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">set&lt;/span> &lt;span class="nv">$forward_scheme&lt;/span> &lt;span class="s">http&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">set&lt;/span> &lt;span class="nv">$server&lt;/span> &lt;span class="nv">$server_addr&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">set&lt;/span> &lt;span class="nv">$port&lt;/span> &lt;span class="mi">5005&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">listen&lt;/span> &lt;span class="mi">80&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">listen&lt;/span> &lt;span class="s">[::]:80&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">include&lt;/span> &lt;span class="s">conf.d/proxy_include/location.conf&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># clash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">server&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">server_name&lt;/span> &lt;span class="s">clash.meow&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">set&lt;/span> &lt;span class="nv">$forward_scheme&lt;/span> &lt;span class="s">http&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">set&lt;/span> &lt;span class="nv">$server&lt;/span> &lt;span class="nv">$server_addr&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">set&lt;/span> &lt;span class="nv">$port&lt;/span> &lt;span class="mi">9090&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">listen&lt;/span> &lt;span class="mi">80&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">listen&lt;/span> &lt;span class="s">[::]:80&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">include&lt;/span> &lt;span class="s">conf.d/proxy_include/location.conf&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># docker
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">server&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">server_name&lt;/span> &lt;span class="s">docker.meow&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">set&lt;/span> &lt;span class="nv">$forward_scheme&lt;/span> &lt;span class="s">http&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">set&lt;/span> &lt;span class="nv">$server&lt;/span> &lt;span class="nv">$server_addr&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">set&lt;/span> &lt;span class="nv">$port&lt;/span> &lt;span class="mi">9000&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">listen&lt;/span> &lt;span class="mi">80&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">listen&lt;/span> &lt;span class="s">[::]:80&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">include&lt;/span> &lt;span class="s">conf.d/proxy_include/location.conf&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># memos
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">server&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">server_name&lt;/span> &lt;span class="s">memos.meow&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">set&lt;/span> &lt;span class="nv">$forward_scheme&lt;/span> &lt;span class="s">http&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">set&lt;/span> &lt;span class="nv">$server&lt;/span> &lt;span class="nv">$server_addr&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">set&lt;/span> &lt;span class="nv">$port&lt;/span> &lt;span class="mi">5230&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">listen&lt;/span> &lt;span class="mi">80&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">listen&lt;/span> &lt;span class="s">[::]:80&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">include&lt;/span> &lt;span class="s">conf.d/proxy_include/location.conf&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="openclash">OpenClash
&lt;/h2>&lt;h3 id="内核">内核
&lt;/h3>&lt;p>只需要用到 Meta 内核，其他内核不需要下载。&lt;/p>
&lt;h3 id="配置文件">配置文件
&lt;/h3>&lt;p>进入 &lt;code>配置管理&lt;/code> - &lt;code>配置文件编辑&lt;/code> 粘贴以下内容到编辑框：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">proxy-providers&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">PQJC&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">http&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;./proxy_provider/config.yaml&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">url&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${订阅地址}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">interval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">86400&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">exclude-filter&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;2倍|3倍|5倍|10倍&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">health-check&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">enable&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">url&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">https://www.gstatic.com/generate_204&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">interval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">86400&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">Yahaha&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">http&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;./proxy_provider/config.yaml&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">url&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${订阅地址}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">interval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">86400&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">exclude-filter&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;2倍|3倍|5倍|10倍&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">health-check&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">enable&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">url&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">https://www.gstatic.com/generate_204&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">interval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">86400&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">proxy-groups&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">PROXY&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">url-test&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">use&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">PQJC&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">Yahaha&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">rules&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">DST-PORT,0-442/444-65535,DIRECT&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">GEOIP,CN,DIRECT&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">MATCH,PROXY&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="插件设置">插件设置
&lt;/h3>&lt;p>&lt;code>插件设置&lt;/code> - &lt;code>模式设置&lt;/code>&lt;/p>
&lt;ul>
&lt;li>使用 FakeIp 模式&lt;/li>
&lt;li>使用 Meta 内核&lt;/li>
&lt;li>运行模式：Fake-IP（增强）模式&lt;/li>
&lt;li>取消 &lt;code>UDP 流量转发&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>&lt;code>插件设置&lt;/code> - &lt;code>流量控制&lt;/code>&lt;/p>
&lt;ul>
&lt;li>取消 &lt;code>路由本机代理&lt;/code>&lt;/li>
&lt;li>选定 &lt;code>实验性：绕过中国大陆 IP&lt;/code>&lt;/li>
&lt;li>大陆域名 DNS 服务器：使用运营商下发 DNS&lt;/li>
&lt;/ul>
&lt;p>&lt;code>覆写设置&lt;/code> - &lt;code>DNS 设置&lt;/code>&lt;/p>
&lt;ul>
&lt;li>选定 &lt;code>自定义上游 DNS 服务器&lt;/code>&lt;/li>
&lt;li>选定 &lt;code>Fake-IP 持久化&lt;/code>&lt;/li>
&lt;li>设置自定义上游 DNS 服务器：
&lt;ul>
&lt;li>NameServer：应用运营商下发 DNS 和一个公共 DNS&lt;/li>
&lt;li>FallBack：全部取消&lt;/li>
&lt;li>Default-NameServer：全部取消&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>微软搞笑 AI 应用——Recall</title><link>https://blog.nkit.eu.org/p/ms-recall/</link><pubDate>Mon, 27 May 2024 22:15:43 +0800</pubDate><guid>https://blog.nkit.eu.org/p/ms-recall/</guid><description>&lt;img src="https://blog.nkit.eu.org/p/ms-recall/cover.webp" alt="Featured image of post 微软搞笑 AI 应用——Recall" />&lt;p>2024 年 5 月 21 日，微软宣布基于骁龙 Elite 平台和 Copilot 的 AI 应用——Recall。&lt;/p>
&lt;p>看了一下这项技术的信息，简直不吐不快。&lt;/p>
&lt;p>首先是配置要求：&lt;/p>
&lt;ul>
&lt;li>骁龙 X Elite / Plus&lt;/li>
&lt;li>40 TOPs&lt;/li>
&lt;li>225 GB 存储&lt;/li>
&lt;li>16 G 内存&lt;/li>
&lt;/ul>
&lt;p>寻思这么高的要求用来干啥以及 AI 用在什么地方了。答案居然是：每 5 秒获得一次屏幕截图，并使用 AI 对进入进行分析？？？？&lt;/p>
&lt;p>WTF？？&lt;/p>
&lt;p>截图并对其进行分析？？？？&lt;/p>
&lt;p>什么时候软件的设计思路变成这样了？？&lt;/p>
&lt;p>微软是把现有程序员裁了，然后招用 ChatGPT 写代码的产品经理和程序员吧？？？&lt;/p>
&lt;p>什么垃圾东西？&lt;/p>
&lt;p>目前的 LLM 基于统计进行构建虽然距离真正理解词汇还有不小差距，
但是依靠巨量的样本，在多维空间中确实对词汇进行了系统化地分类，从而在一定程度上使得语言模型有了“理解力”这一结果。
而 Recall 整了个什么活？把屏幕记录下来，使用 AI 进行分析，这怕是本科毕业设计开题报告就会被打回来。&lt;/p>
&lt;p>需求：让用户搜索在电脑上现在或曾经的信息。
守序善良：各应用可以记录标题、路径以供用户搜索。
绝对中立：记录标题、路径、全文，允许对内容或图片进行总结以供用户搜索。
混乱邪恶：每五秒屏幕截图，使用截图进行 AI 分析以供用户搜索。&lt;/p>
&lt;p>真是脑子都笑萎缩了。&lt;/p>
&lt;p>先说截图成本：&lt;/p>
&lt;ul>
&lt;li>实时截图造成续航下降与瞬时可用性能下降&lt;/li>
&lt;li>存储空间，每张图按压缩后 100K 计算，每月为：100(KB/p)*12(p/min)*60(min/h)*8(h/day)*30(day/month)=16.4GB&lt;/li>
&lt;li>存储空间所带来的硬盘寿命降低&lt;/li>
&lt;/ul>
&lt;p>其次说分析成本：&lt;/p>
&lt;ul>
&lt;li>目前 LLM 生成对话都需要巨大的算力才能保证流畅，更别说每 5 秒一张图片，直接可以让 Soc 起飞&lt;/li>
&lt;li>每月 17 万张的图片就算是预先进行 AI 分析提取关键词，建立的索引也会是不小的负担&lt;/li>
&lt;li>放着目前市面显卡上百 Tops 的算力不用，强行只让 arm 平台独占，可以说就是一噱头了&lt;/li>
&lt;/ul>
&lt;p>最后是隐私问题，截至 2024 年 6 月，已经有人能够从 recall 的相关数据中提取隐私了。&lt;/p>
&lt;p>一句话总结：妈的，什么玩意？&lt;/p></description></item><item><title>为什么我认为 ChatGPT 不是未来</title><link>https://blog.nkit.eu.org/p/why-not-chatgpt/</link><pubDate>Mon, 15 Apr 2024 22:11:58 +0800</pubDate><guid>https://blog.nkit.eu.org/p/why-not-chatgpt/</guid><description>&lt;img src="https://blog.nkit.eu.org/p/why-not-chatgpt/cover.webp" alt="Featured image of post 为什么我认为 ChatGPT 不是未来" />&lt;h2 id="前言">前言
&lt;/h2>&lt;p>从 2022 年 ChatGPT 的诞生，到 2023 年的 AI 爆火，再到 2024 年的 AI 工具遍地开花，
人们似乎理所当然地将 Chatgpt 及其相似衍生物从一开始的聊天服务、翻译搜索的工具逐渐变成了百科全书、助理以及生成垃圾的机器。
少部分部分更是一旦遇到未知事物，便向 ChatGPT 提问，把生成的回答当作真理，
日后口中偶尔冒出「GPT 说 xxxx」并附带「AI 现在能够理解语言，未来将会颠覆世界」之类的言论，成为「时代的前沿者」。&lt;/p>
&lt;p>本文处特别说明外「AI」均指目前市面上所谓 AI，加引号是为了将目前的 AI 与真正的人工智能-自底向上型人工智能进行区分。
「目前」指 2024 年 4 月。&lt;/p>
&lt;p>对于目前普通使用者也逐渐支持「AI 能够理解需求并给予答案」这一概念的现象，
谨以此文表示担忧，并希望读者能够辨别自己手中的到底是「智能」还是工具。&lt;/p>
&lt;h2 id="gpt-诞生">GPT 诞生
&lt;/h2>&lt;p>GPT 的诞生离不开「NLP (Natural Language Processing) / 自然语言处理」领域的一篇重磅论文：&lt;a class="link" href="https://arxiv.org/pdf/1706.03762.pdf" target="_blank" rel="noopener"
>Attention Is All You Need / 你只是需要注意力&lt;/a>。
这篇论文提出了 「Transformer」模型架构，通过给模型增加注意力机制处理上下文之间的关联，使得训练成本大幅减少。&lt;/p>
&lt;p>其商业领域最大的成果则是 「GPT (Generative Pre-Training Transformer) / 生成式预训练」和「BERT (Bidirectional Encoder Representations from Transformers)」两个系列的语言模型。&lt;/p>
&lt;p>OpenAI 公司连续发表论文，并发布了 ChatGPT：&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://cdn.openai.com/research-covers/language-unsupervised/language_understanding_paper.pdf" target="_blank" rel="noopener"
>Improving Language Understanding by Generative Pre-Training / 通过生成式预训练提升语言理解能力&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://cdn.openai.com/better-language-models/language_models_are_unsupervised_multitask_learners.pdf" target="_blank" rel="noopener"
>Language Models are Unsupervised Multitask Learners / 语言模型即为无监督的多任务学习者&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://arxiv.org/pdf/2005.14165.pdf" target="_blank" rel="noopener"
>Language Models are Few-Shot Learners / 语言模型即为小样本学习者&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://arxiv.org/pdf/2203.02155.pdf" target="_blank" rel="noopener"
>Training language models to follow instructions with human feedback / 训练语言模型以遵循人类反馈的指令&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://arxiv.org/pdf/2303.08774v2.pdf" target="_blank" rel="noopener"
>GPT-4 Technical Report / GPT-4 技术报告&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://arxiv.org/pdf/2303.10130.pdf" target="_blank" rel="noopener"
>GPTs are GPTs: An Early Look at the Labor Market Impact Potential of Large Language Models / GPT 即为 GPT：大型语言模型对劳动力市场潜在影响力的早期观察&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>「训练」、「理解力」、「模型」、「遵循指令」这些词语仿佛将人们带入了未来，机器开始/已经理解人类话语，并且能够做出相应的反馈。&lt;/p>
&lt;h2 id="aigc">AIGC
&lt;/h2>&lt;p>自从有了理论基础，AI 发展高歌猛进，各个公司都在试图抢占这块蛋糕：&lt;/p>
&lt;ul>
&lt;li>Copilot&lt;/li>
&lt;li>Gemini&lt;/li>
&lt;li>Suno&lt;/li>
&lt;li>Stable Diffusion&lt;/li>
&lt;li>midjourney&lt;/li>
&lt;li>Sora&lt;/li>
&lt;li>文心一言&lt;/li>
&lt;li>云雀大模型&lt;/li>
&lt;li>……&lt;/li>
&lt;/ul>
&lt;p>从国外到国内，各式各样的语言服务遍地开花。&lt;/p>
&lt;p>有人云「原创从 PGC 到 UGC 再到 AIGC，内容生产时代变革」；&lt;/p>
&lt;p>有人云「AI 将无所不能，AI 承包一切工作后，人类还能干什么」；&lt;/p>
&lt;p>有人云「人工智能会学会人类思维并失控吗」；&lt;/p>
&lt;p>文字、图片、音频、视频，互联网最基础的媒体目前均可被 AI 生成，市场潜力巨大。&lt;/p>
&lt;p>PGC (Professional Generated Content / 专业生成内容) 时代由于需要专业人士进行内容创作，生产的速度比较缓慢，但同时在一定程度上保证了内容的专业性和正确性。&lt;/p>
&lt;p>UGC (User Generated Content / 用户生产内容) 时代普通用户也能自己藏于创作，内容的形式和数量开始增长，内容的质量层次不齐，正确性需要接收者具有一定的知识进行判断。&lt;/p>
&lt;p>AIGC (Artificial Intelligence Generated Content / 人工智能生成内容) 内容创作由于 AI 的加入，数量还是爆炸式增长。&lt;/p>
&lt;p>互联网的整体体验在经过两年有余的「AI 变革」中发生了哪些改变呢？
AI 拼凑文章铺天盖地；
AI 生成图被当作创作成果拳打毕设脚踢画师；
AI 配音的视频比比皆是，其中不乏 AI 文案甚至 AI 画面。&lt;/p>
&lt;p>这一切还有增强的趋势，甚至可以预测一切如此发展下去，世界的确可能会发生改变：上班使用 AI 工具创作由 AI 生成大纲的企划，下班后吃一餐由 AI 搭配的营养餐，脱下由 AI 设计的外套，打开电脑玩由 AI 翻译的 AI 是生成游戏。&lt;/p>
&lt;h2 id="目前ai的本质">目前「AI」的本质
&lt;/h2>&lt;p>目前很多人认为 AI 正变得更智能、更感性，正在理解人类。可惜的是，如果对于 NLP 领域有所了解，应该会知道：&lt;strong>目前几乎所有的的自然语言处理都是基于统计频率进行预测的模式&lt;/strong>。&lt;/p>
&lt;p>「目前」所有的所谓 AI 都是将字/词使用在不同场的张量表示，通过提示词和算法计算出一个个后继字/词的概率，并综合计算，输出概率最高的内容。&lt;/p>
&lt;p>而其他服务型 AI，也完全一样，其理论均为论文「Attention Is All You Need」，只不过将字/词替换为了部分画面特征（图片与视频型 AI）、声音的频率组合与间隔（音频型 AI）等或将其组合（人声型 AI）。&lt;/p>
&lt;p>即使经过了人类算法的加持，AI 其输入本质还是提示词和&lt;strong>大量样本的内部联系的频率&lt;/strong>。AI 并不会理解苹果是什么颜色，什么味道，AI 只知道与「苹果」这个词所代表的张量在「颜色」场下最接近的是「红」接着是「青」、「黄」，在「味觉」场下最接近的是「甜」、「酸」。「理解」与「张量」两种处理方式在宏观下可以得到近似的效果，但是两者完全是不同种类。&lt;/p>
&lt;p>上一个如此名不副实的东西，叫做「智能手机」。&lt;/p>
&lt;h2 id="目前ai服务对互联网内容的影响">目前「AI」服务对互联网内容的影响
&lt;/h2>&lt;p>商业公司始终是重利益的，不限定严格的所有人，大部分人类也是重利益的，他们知道数以十计的专业生成内容甚至用户生产内容远没有数以万计的人工智能生成内容来得简单快捷，甚至成本几乎为零。&lt;/p>
&lt;p>AIGC 作者中的确有专业生产者通过 AI 途径缩短工作流，但除了这些能保证内容质量的创作者，更多的还是希望通过最少的输入进行最大化输出的使用者，说白了就是达不到创作门槛的 AI 使用者尝试通过 AI 补齐创作门槛。
但不管前者还是后者，创作的内容远远没有商业公司多，数量级上都可能差几个零。&lt;/p>
&lt;p>对于以 1000 成本生成的 1 个质量为 1000 的内容与以 10 成本生成的 1000 个质量为 1 的内容，商业公司以利益考虑必然会选择后者，毕竟针对热点随意生成一些内容经由 SEO 优化后获得的点击远比认真做的 PGC 获得的点击要多，获得的广告收入也可以碾压 PGC。&lt;/p>
&lt;p>由于 AIGC 增多，而目前的 AI 远没达到完美的程度，所以互联网内容整体的质量和用户体验都是下降的。
与此同时，AIGC 还在阻碍 AI 和今后的自底向上人工智能的成长。
既然 AI 的输入之一是「大量样本」，并且内置于模型中，那么 AI 想要发展，就必然需要&lt;strong>持续的优质样本&lt;/strong>。那么这些样本的源头除了各个企业推出的数据集，就只有互联网了，并且各企业的数据集中几乎所有数据的最终来源必然也是互联网本身。而互联网内容质量的下降必然意味着在新算法/模型/体系提出之前，从长远的角度来看目前的 AI 发展会有一个峰值拐点。&lt;/p>
&lt;p>而各方平台也似乎多少能预见一些问题，开始对 AIGC 进行标注，但对于海量的 AIGC，和对不道德收益的诱惑，这仅仅是杯水车薪，AIGC 整体的低质，也导致「AIGC (Artificial Intelligence Generated Content / 人工智能生成内容)」变成了「AIGC (Artificial Intelligence Garbage Content / 人工智能垃圾内容)」。&lt;/p>
&lt;h2 id="碎碎念">碎碎念
&lt;/h2>&lt;p>目前的 AI 若能正常使用——特指经由 AI 生成后经人工修正与查证再进行内容的发布，确实能如所宣称的是生产力的重大进步，可是由于利益因素，不管是公司还是个人，大部分都将 AIGC 当作是自己的劳动成果，这是整条生产线上的重大缺陷。&lt;/p>
&lt;p>在绘图创作网站上能看到不少手部缺陷的 AIGC，作者声称这是自己「创作」；
在视频观看平台上出现了不少依靠标题和封面引流实际则是逻辑狗屁不通「作品」；
音乐平台也开始出现不少以 AI 为噱头的「血汗结晶」；
不少厂商使用 AI 进行绘图、配音、配乐、生成脚本、制作脚本快速发售「游戏」；
某游戏「汉化版」在标题界面将「コンティニュー / 继续」译为「孔帝纽」；
不经人工修正的 AIGC 不光是对行业质量的拉低，还是对认真的行业从业者的侮辱。
更搞笑的是某些公司推出 AI 论文生成工具，论文要是能生成还搞什么教育，科技全让 AI 发展得了。&lt;/p>
&lt;p>如果说内容的缺陷最终可以靠人工弥补，那么 AI 犯罪则是一个潜在的重大问题。
文字信息可由 AI 伪造，图片视频也能经由训练生成换脸的图片视频，声音也能经过非常少样本的训练模拟出不易分辨的发声。
单一个体如果在互联网留下一定信息样本，就能生成一个赛博克隆，这个赛博克隆的用法可太多了，相信公安国安部门都有过一定的案例了。&lt;/p>
&lt;p>本文并不是技术恐惧。
使用新技术提高生产力是值得推广之事，也是不可阻挡之事。
本文希望生产者通过了解或部分了解新技术的原理之后再「正确」使用新技术，
希望消费者能够辨别通过破坏行业长远潜能进行获利的「作品」。&lt;/p>
&lt;p>ChatGPT 或者说其他基于 Transformer 的所谓人工智能可能会发光不短一段时间，但它不是人工智能的未来。&lt;/p>
&lt;h2 id="胡言乱语">胡言乱语
&lt;/h2>&lt;p>最后，人类进步的动力来自涩涩，而不是怠惰。&lt;/p></description></item><item><title>你好，世界</title><link>https://blog.nkit.eu.org/p/hello-world/</link><pubDate>Mon, 01 Jan 2024 00:00:00 +0800</pubDate><guid>https://blog.nkit.eu.org/p/hello-world/</guid><description>&lt;img src="https://blog.nkit.eu.org/p/hello-world/cover.webp" alt="Featured image of post 你好，世界" />&lt;h2 id="格式">格式
&lt;/h2>&lt;ul>
&lt;li>&lt;strong>粗体&lt;/strong>&lt;/li>
&lt;li>&lt;em>斜体&lt;/em>&lt;/li>
&lt;li>&lt;del>删除线&lt;/del>&lt;/li>
&lt;li>&lt;mark>标记&lt;/mark>&lt;/li>
&lt;li>&lt;abbr title="原文">缩写&lt;/abbr>&lt;/li>
&lt;li>下标：H&lt;sub>2&lt;/sub>O&lt;/li>
&lt;li>上标：e&lt;sup>iπ&lt;/sup> = -1&lt;/li>
&lt;li>键盘：&lt;kbd>CTRL&lt;/kbd> + &lt;kbd>ALT&lt;/kbd> + &lt;kbd>Delete&lt;/kbd>&lt;/li>
&lt;/ul>
&lt;h2 id="链接">链接
&lt;/h2>&lt;ul>
&lt;li>&lt;a class="link" href="../../about/" >相对链接&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://blog.nkit.eu.org/about/" >绝对链接&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="../hello-world" >文章连接&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="引用">引用
&lt;/h2>&lt;blockquote>
&lt;p>人被杀，就会死。&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>&lt;/p>
&lt;p>- &lt;cite>衛宮 士郎&lt;/cite>&lt;/p>
&lt;/blockquote>
&lt;h2 id="代码块">代码块
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&amp;lt;!DOCTYPE html&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">html&lt;/span> &lt;span class="na">lang&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;zh-cmn-Hans&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">charset&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;utf-8&amp;#34;&lt;/span> &lt;span class="p">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>Example HTML5 Document&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>Test&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="图片">图片
&lt;/h2>&lt;p>&lt;img src="https://blog.nkit.eu.org/p/hello-world/img.webp"
width="600"
height="600"
srcset="https://blog.nkit.eu.org/p/hello-world/img_hu34499fc6b333989692e812258da131d9_136486_480x0_resize_q75_h2_box_2.webp 480w, https://blog.nkit.eu.org/p/hello-world/img_hu34499fc6b333989692e812258da131d9_136486_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="示例图片"
class="gallery-image"
data-flex-grow="100"
data-flex-basis="240px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.nkit.eu.org/p/hello-world/img.webp"
width="600"
height="600"
srcset="https://blog.nkit.eu.org/p/hello-world/img_hu34499fc6b333989692e812258da131d9_136486_480x0_resize_q75_h2_box_2.webp 480w, https://blog.nkit.eu.org/p/hello-world/img_hu34499fc6b333989692e812258da131d9_136486_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="示例图册-1"
class="gallery-image"
data-flex-grow="100"
data-flex-basis="240px"
> &lt;img src="https://blog.nkit.eu.org/p/hello-world/img.webp"
width="600"
height="600"
srcset="https://blog.nkit.eu.org/p/hello-world/img_hu34499fc6b333989692e812258da131d9_136486_480x0_resize_q75_h2_box_2.webp 480w, https://blog.nkit.eu.org/p/hello-world/img_hu34499fc6b333989692e812258da131d9_136486_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="示例图册-2"
class="gallery-image"
data-flex-grow="100"
data-flex-basis="240px"
> &lt;img src="https://blog.nkit.eu.org/p/hello-world/img.webp"
width="600"
height="600"
srcset="https://blog.nkit.eu.org/p/hello-world/img_hu34499fc6b333989692e812258da131d9_136486_480x0_resize_q75_h2_box_2.webp 480w, https://blog.nkit.eu.org/p/hello-world/img_hu34499fc6b333989692e812258da131d9_136486_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="示例图册-3"
class="gallery-image"
data-flex-grow="100"
data-flex-basis="240px"
>&lt;/p>
&lt;h2 id="表格">表格
&lt;/h2>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Command&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>git status&lt;/code>&lt;/td>
&lt;td>List all &lt;em>new or modified&lt;/em> files&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>git diff&lt;/code>&lt;/td>
&lt;td>Show file differences that &lt;strong>haven&amp;rsquo;t been&lt;/strong> staged&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="勾选框">勾选框
&lt;/h2>&lt;ul>
&lt;li>&lt;input checked="" disabled="" type="checkbox"> issue #799&lt;/li>
&lt;li>&lt;input disabled="" type="checkbox"> todo: 增加功能&lt;/li>
&lt;/ul>
&lt;h2 id="提示">提示
&lt;/h2>&lt;style type="text/css">
.notice {
--root-color: #444;
--root-background: #eff;
--title-color: #fff;
--title-background: #7bd;
--warning-title: #c33;
--warning-content: #fee;
--info-title: #fb7;
--info-content: #fec;
--note-title: #6be;
--note-content: #e7f2fa;
--tip-title: #5a5;
--tip-content: #efe
}
@media (prefers-color-scheme:dark) {
.notice {
--root-color: #ddd;
--root-background: #eff;
--title-color: #fff;
--title-background: #7bd;
--warning-title: #800;
--warning-content: #400;
--info-title: #a50;
--info-content: #420;
--note-title: #069;
--note-content: #023;
--tip-title: #363;
--tip-content: #121
}
}
body.dark .notice {
--root-color: #ddd;
--root-background: #eff;
--title-color: #fff;
--title-background: #7bd;
--warning-title: #800;
--warning-content: #400;
--info-title: #a50;
--info-content: #420;
--note-title: #069;
--note-content: #023;
--tip-title: #363;
--tip-content: #121
}
.notice {
padding: 18px;
line-height: 24px;
margin-bottom: 24px;
border-radius: 4px;
color: var(--root-color);
background: var(--root-background)
}
.notice p:last-child {
margin-bottom: 0
}
.notice-title {
margin: -18px -18px 12px;
padding: 4px 18px;
border-radius: 4px 4px 0 0;
font-weight: 700;
color: var(--title-color);
background: var(--title-background)
}
.notice.warning .notice-title {
background: var(--warning-title)
}
.notice.warning {
background: var(--warning-content)
}
.notice.info .notice-title {
background: var(--info-title)
}
.notice.info {
background: var(--info-content)
}
.notice.note .notice-title {
background: var(--note-title)
}
.notice.note {
background: var(--note-content)
}
.notice.tip .notice-title {
background: var(--tip-title)
}
.notice.tip {
background: var(--tip-content)
}
.icon-notice {
display: inline-flex;
align-self: center;
margin-right: 8px
}
.icon-notice img,
.icon-notice svg {
height: 1em;
width: 1em;
fill: currentColor
}
.icon-notice img,
.icon-notice.baseline svg {
top: .125em;
position: relative
}
&lt;/style>&lt;div class="notice tip" >
&lt;p class="notice-title">
&lt;span class="icon-notice baseline">
&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="300.5 134 300 300">
&lt;path d="M551.281 252.36c0-3.32-1.172-6.641-3.515-8.985l-17.774-17.578c-2.344-2.344-5.469-3.711-8.789-3.711-3.32 0-6.445 1.367-8.789 3.71l-79.687 79.493-44.141-44.14c-2.344-2.344-5.469-3.712-8.79-3.712-3.32 0-6.444 1.368-8.788 3.711l-17.774 17.579c-2.343 2.343-3.515 5.664-3.515 8.984 0 3.32 1.172 6.445 3.515 8.789l70.704 70.703c2.343 2.344 5.664 3.711 8.789 3.711 3.32 0 6.64-1.367 8.984-3.71l106.055-106.056c2.343-2.343 3.515-5.468 3.515-8.789ZM600.5 284c0 82.813-67.188 150-150 150-82.813 0-150-67.188-150-150 0-82.813 67.188-150 150-150 82.813 0 150 67.188 150 150Z"/>
&lt;/svg>
&lt;/span>提示&lt;/p>&lt;p>小提示&lt;/p>&lt;/div>
&lt;div class="notice note" >
&lt;p class="notice-title">
&lt;span class="icon-notice baseline">
&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 128 300 300">
&lt;path d="M150 128c82.813 0 150 67.188 150 150 0 82.813-67.188 150-150 150C67.187 428 0 360.812 0 278c0-82.813 67.188-150 150-150Zm25 243.555v-37.11c0-3.515-2.734-6.445-6.055-6.445h-37.5c-3.515 0-6.445 2.93-6.445 6.445v37.11c0 3.515 2.93 6.445 6.445 6.445h37.5c3.32 0 6.055-2.93 6.055-6.445Zm-.39-67.188 3.515-121.289c0-1.367-.586-2.734-1.953-3.516-1.172-.976-2.93-1.562-4.688-1.562h-42.968c-1.758 0-3.516.586-4.688 1.563-1.367.78-1.953 2.148-1.953 3.515l3.32 121.29c0 2.734 2.93 4.882 6.64 4.882h36.134c3.515 0 6.445-2.148 6.64-4.883Z"/>
&lt;/svg>
&lt;/span>注释&lt;/p>&lt;p>笔记&lt;/p>&lt;/div>
&lt;div class="notice info" >
&lt;p class="notice-title">
&lt;span class="icon-notice baseline">
&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="92 59.5 300 300">
&lt;path d="M292 303.25V272c0-3.516-2.734-6.25-6.25-6.25H267v-100c0-3.516-2.734-6.25-6.25-6.25h-62.5c-3.516 0-6.25 2.734-6.25 6.25V197c0 3.516 2.734 6.25 6.25 6.25H217v62.5h-18.75c-3.516 0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h87.5c3.516 0 6.25-2.734 6.25-6.25Zm-25-175V97c0-3.516-2.734-6.25-6.25-6.25h-37.5c-3.516 0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h37.5c3.516 0 6.25-2.734 6.25-6.25Zm125 81.25c0 82.813-67.188 150-150 150-82.813 0-150-67.188-150-150 0-82.813 67.188-150 150-150 82.813 0 150 67.188 150 150Z"/>
&lt;/svg>
&lt;/span>信息&lt;/p>&lt;p>醒目提醒&lt;/p>&lt;/div>
&lt;div class="notice warning" >
&lt;p class="notice-title">
&lt;span class="icon-notice baseline">
&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="126 76.5 300 300">
&lt;path d="M297.431 324.397v-34.255c0-3.245-2.344-5.95-5.358-5.95h-32.146c-3.014 0-5.358 2.705-5.358 5.95v34.255c0 3.245 2.344 5.95 5.358 5.95h32.146c3.014 0 5.358-2.705 5.358-5.95Zm-.335-67.428 3.014-82.753c0-1.081-.502-2.524-1.674-3.425-1.005-.902-2.512-1.983-4.019-1.983h-36.834c-1.507 0-3.014 1.081-4.019 1.983-1.172.901-1.674 2.704-1.674 3.786l2.846 82.392c0 2.344 2.512 4.146 5.693 4.146h30.975c3.013 0 5.525-1.803 5.692-4.146Zm-2.344-168.39L423.34 342.425c3.683 7.032 3.516 15.686-.335 22.717-3.85 7.031-10.883 11.358-18.417 11.358H147.413c-7.534 0-14.566-4.327-18.417-11.358-3.85-7.031-4.018-15.685-.335-22.716L257.248 88.578C260.93 81.188 268.13 76.5 276 76.5c7.87 0 15.069 4.688 18.752 12.08Z"/>
&lt;/svg>
&lt;/span>警告&lt;/p>&lt;p>警告提醒&lt;/p>&lt;/div>
&lt;h2 id="公式">公式
&lt;/h2>&lt;p>行内公式：$E=mc^2$&lt;/p>
&lt;p>块状公式：&lt;/p>
&lt;p>$$e^{i\pi}=\cos{x}+i\sin{x}$$&lt;/p>
&lt;h2 id="mermaid">Mermaid
&lt;/h2>&lt;div class="mermaid">
flowchart LR
a --> b &amp; c --> d
&lt;/div>
&lt;h2 id="视频">视频
&lt;/h2>&lt;div class="video-wrapper">
&lt;video
controls
src="%e5%9d%82%e6%9c%ac%e7%9c%9f%e7%b6%be-%e8%8f%ab.mp4"
>
&lt;p>
Your browser doesn't support HTML5 video. Here is a
&lt;a href="%e5%9d%82%e6%9c%ac%e7%9c%9f%e7%b6%be-%e8%8f%ab.mp4">link to the video&lt;/a> instead.
&lt;/p>
&lt;/video>
&lt;/div>
&lt;h2 id="音频">音频
&lt;/h2>
&lt;link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">
&lt;script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js">&lt;/script>
&lt;div id="aplayer">&lt;/div>
&lt;script>
const ap = new APlayer({
container: document.getElementById('aplayer'),
lrcType: 3 ,
audio: [
{
name: "君に逢えたから",
url: "eufonius-君に逢えたから.mp3",
artist: "eufonius",
cover: "eufonius-君に逢えたから.webp",
lrc: "eufonius-君に逢えたから.lrc",
}]
});
&lt;/script>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>这是对应的脚注&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>Manajaro i3wm 配置</title><link>https://blog.nkit.eu.org/p/manjaro-i3wm/</link><pubDate>Tue, 12 Dec 2023 18:27:30 +0800</pubDate><guid>https://blog.nkit.eu.org/p/manjaro-i3wm/</guid><description>&lt;img src="https://blog.nkit.eu.org/p/manjaro-i3wm/cover.webp" alt="Featured image of post Manajaro i3wm 配置" />&lt;h2 id="安装系统">安装系统
&lt;/h2>&lt;style type="text/css">
.notice {
--root-color: #444;
--root-background: #eff;
--title-color: #fff;
--title-background: #7bd;
--warning-title: #c33;
--warning-content: #fee;
--info-title: #fb7;
--info-content: #fec;
--note-title: #6be;
--note-content: #e7f2fa;
--tip-title: #5a5;
--tip-content: #efe
}
@media (prefers-color-scheme:dark) {
.notice {
--root-color: #ddd;
--root-background: #eff;
--title-color: #fff;
--title-background: #7bd;
--warning-title: #800;
--warning-content: #400;
--info-title: #a50;
--info-content: #420;
--note-title: #069;
--note-content: #023;
--tip-title: #363;
--tip-content: #121
}
}
body.dark .notice {
--root-color: #ddd;
--root-background: #eff;
--title-color: #fff;
--title-background: #7bd;
--warning-title: #800;
--warning-content: #400;
--info-title: #a50;
--info-content: #420;
--note-title: #069;
--note-content: #023;
--tip-title: #363;
--tip-content: #121
}
.notice {
padding: 18px;
line-height: 24px;
margin-bottom: 24px;
border-radius: 4px;
color: var(--root-color);
background: var(--root-background)
}
.notice p:last-child {
margin-bottom: 0
}
.notice-title {
margin: -18px -18px 12px;
padding: 4px 18px;
border-radius: 4px 4px 0 0;
font-weight: 700;
color: var(--title-color);
background: var(--title-background)
}
.notice.warning .notice-title {
background: var(--warning-title)
}
.notice.warning {
background: var(--warning-content)
}
.notice.info .notice-title {
background: var(--info-title)
}
.notice.info {
background: var(--info-content)
}
.notice.note .notice-title {
background: var(--note-title)
}
.notice.note {
background: var(--note-content)
}
.notice.tip .notice-title {
background: var(--tip-title)
}
.notice.tip {
background: var(--tip-content)
}
.icon-notice {
display: inline-flex;
align-self: center;
margin-right: 8px
}
.icon-notice img,
.icon-notice svg {
height: 1em;
width: 1em;
fill: currentColor
}
.icon-notice img,
.icon-notice.baseline svg {
top: .125em;
position: relative
}
&lt;/style>&lt;div class="notice note" >
&lt;p class="notice-title">
&lt;span class="icon-notice baseline">
&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 128 300 300">
&lt;path d="M150 128c82.813 0 150 67.188 150 150 0 82.813-67.188 150-150 150C67.187 428 0 360.812 0 278c0-82.813 67.188-150 150-150Zm25 243.555v-37.11c0-3.515-2.734-6.445-6.055-6.445h-37.5c-3.515 0-6.445 2.93-6.445 6.445v37.11c0 3.515 2.93 6.445 6.445 6.445h37.5c3.32 0 6.055-2.93 6.055-6.445Zm-.39-67.188 3.515-121.289c0-1.367-.586-2.734-1.953-3.516-1.172-.976-2.93-1.562-4.688-1.562h-42.968c-1.758 0-3.516.586-4.688 1.563-1.367.78-1.953 2.148-1.953 3.515l3.32 121.29c0 2.734 2.93 4.882 6.64 4.882h36.134c3.515 0 6.445-2.148 6.64-4.883Z"/>
&lt;/svg>
&lt;/span>注释&lt;/p>&lt;p>Todo:&lt;/p>
&lt;ul>
&lt;li>无人值守安装&lt;/li>
&lt;/ul>&lt;/div>
&lt;p>本文为 Manjaro i3wm 版的配置指南，语言环境为 &lt;code>zh_CN.UTF-8&lt;/code>。&lt;/p>
&lt;p>在 Livecd 中启动安装程序前先针对 Livecd 换源和安装字体：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo pacman-mirrors -i -c China -m rank
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo pacman -Syy
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="系统配置">系统配置
&lt;/h2>&lt;h3 id="基础配置">基础配置
&lt;/h3>&lt;p>源与字体显示问题：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 换源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo pacman-mirrors -i -c China -m rank
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 增加 archlinuxcn 源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo &lt;span class="nb">echo&lt;/span> -e &lt;span class="s2">&amp;#34;\n[archlinuxcn]\nServer = https://mirrors.ustc.edu.cn/archlinuxcn/\$arch\n&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> sudo tee -a /etc/pacman.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo pacman -Syy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pacman -Sy archlinuxcn-keyring yay
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 安装字体&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yay -Sy noto-fonts noto-fonts-cjk noto-fonts-emoji ttf-dejavu-nerd ttf-sarasa-gothic nerd-fonts-sarasa-term
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>intel 核显加速：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">yay -Sy intel-media-driver libva-utils
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>intel 核显垂直同步：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo &lt;span class="nb">echo&lt;/span> -e &lt;span class="s2">&amp;#34;\nSection &amp;#34;&lt;/span>Device&lt;span class="s2">&amp;#34;\nIdentifier &amp;#34;&lt;/span>Intel Graphics&lt;span class="s2">&amp;#34;\nDriver &amp;#34;&lt;/span>intel&lt;span class="s2">&amp;#34;\nOption &amp;#34;&lt;/span>TearFree&lt;span class="s2">&amp;#34; &amp;#34;&lt;/span>true&lt;span class="s2">&amp;#34;\nEndSection&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> sudo tee -a /etc/X11/xorg.conf.d/20-intel.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>hdmi 声音输出问题&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 获得声卡和通道 id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">aplay -l
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 根据上面的情报更改下面的 `${CARD_NUM}` `${DEVICE_NUM}`：&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo &lt;span class="nb">echo&lt;/span> -e &lt;span class="s2">&amp;#34;\ndefaults.pcm.card &lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">CARD_NUM&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">\ndefaults.pcm.device &lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">DEVICE_NUM&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">\ndefaults.ctl.card &lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">CARD_NUM&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">\n&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> sudo tee -a ~/.asoundrc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 默认为最大音量，可开启一个音频后迅速关掉，通过 alsamixer 调整到合适音量&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">alsamixer
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>若错误时机箱发出蜂鸣声则可通过设置消除：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo sed -i &lt;span class="s2">&amp;#34;s/#set bell-style none/set bell-style none/g&amp;#34;&lt;/span> /etc/inputrc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>设置主文件夹为英文：&lt;/p>
&lt;div class="notice info" >
&lt;p class="notice-title">
&lt;span class="icon-notice baseline">
&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="92 59.5 300 300">
&lt;path d="M292 303.25V272c0-3.516-2.734-6.25-6.25-6.25H267v-100c0-3.516-2.734-6.25-6.25-6.25h-62.5c-3.516 0-6.25 2.734-6.25 6.25V197c0 3.516 2.734 6.25 6.25 6.25H217v62.5h-18.75c-3.516 0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h87.5c3.516 0 6.25-2.734 6.25-6.25Zm-25-175V97c0-3.516-2.734-6.25-6.25-6.25h-37.5c-3.516 0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h37.5c3.516 0 6.25-2.734 6.25-6.25Zm125 81.25c0 82.813-67.188 150-150 150-82.813 0-150-67.188-150-150 0-82.813 67.188-150 150-150 82.813 0 150 67.188 150 150Z"/>
&lt;/svg>
&lt;/span>信息&lt;/p>&lt;p>建议将主文件夹设置为英文，避免在命令行中频繁切换输入法。&lt;/p>&lt;/div>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">yay xdg-user-dirs-gtk
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 临时改变语言环境变量&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">LANG&lt;/span>&lt;span class="o">=&lt;/span>en_US.UTF-8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 使用 xdg-user-dirs-gtk 改变配置文件并修改文件夹&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 在弹出的窗口中确认操作&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xdg-user-dirs-gtk-update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 改回语言环境变量&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">LANG&lt;/span>&lt;span class="o">=&lt;/span>zh_CN.UTF-8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 检查是否正确设置&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cat /etc/xdg/user-dirs.defaults
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cat ~/.config/user-dirs.dirs
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="notice info" >
&lt;p class="notice-title">
&lt;span class="icon-notice baseline">
&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="92 59.5 300 300">
&lt;path d="M292 303.25V272c0-3.516-2.734-6.25-6.25-6.25H267v-100c0-3.516-2.734-6.25-6.25-6.25h-62.5c-3.516 0-6.25 2.734-6.25 6.25V197c0 3.516 2.734 6.25 6.25 6.25H217v62.5h-18.75c-3.516 0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h87.5c3.516 0 6.25-2.734 6.25-6.25Zm-25-175V97c0-3.516-2.734-6.25-6.25-6.25h-37.5c-3.516 0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h37.5c3.516 0 6.25-2.734 6.25-6.25Zm125 81.25c0 82.813-67.188 150-150 150-82.813 0-150-67.188-150-150 0-82.813 67.188-150 150-150 82.813 0 150 67.188 150 150Z"/>
&lt;/svg>
&lt;/span>信息&lt;/p>&lt;p>系统基础配置完成后建议重启系统。&lt;/p>&lt;/div>
&lt;h3 id="基础软件">基础软件
&lt;/h3>&lt;p>安装 fcitx5 输入法：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">yay -Sy fcitx5 fcitx5-configtool fcitx5-qt fcitx5-gtk fcitx5-chinese-addons kcm-fcitx5 fcitx5-lua
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo &lt;span class="nb">echo&lt;/span> -e &lt;span class="s2">&amp;#34;\nGTK_IM_MODULE=fcitx\nQT_IM_MODULE=fcitx\nXMODIFIERS=@im=fcitx\nINPUT_METHOD=fcitx\nSDL_IM_MODULE=fcitx\n&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> sudo tee -a /etc/environment
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git clone https://github.com/tonyfettes/fcitx5-nord.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkdir -p ~/.local/share/fcitx5/themes/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cp -r ./fcitx5-nord/Nord-Dark/ ./fcitx5-nord/Nord-Light/ ~/.local/share/fcitx5/themes/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>安装 chrome 浏览器：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">yay -Sy google-chrome
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 设置 chrome 为默认应用&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sed -i &lt;span class="s2">&amp;#34;s/userapp-Pale Moon.desktop/google-chrome-stable.desktop/g&amp;#34;&lt;/span> ~/.config/mimeapps.list
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sed -i &lt;span class="s2">&amp;#34;s/export BROWSER=\/usr\/bin\/palemoon/export BROWSER=\/usr\/bin\/google-chrome-stable/g&amp;#34;&lt;/span> ~/.profile
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>其他基础工具和软件：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo pacman -Sy gedit git curl gcc neofetch alacritty fish manjaro-settings-manager lightdm-settings nemo cinnamon-translations nemo-preview nemo-fileroller nitrogen picom rofi file-roller neovim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 设置默认终端为 alacritty&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gsettings &lt;span class="nb">set&lt;/span> org.cinnamon.desktop.default-applications.terminal &lt;span class="nb">exec&lt;/span> alacritty
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 设置默认编辑器为 gedit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sed -i &lt;span class="s2">&amp;#34;s/mousepad.desktop/org.gnome.gedit.desktop/g&amp;#34;&lt;/span> ~/.config/mimeapps.list
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 切换默认 shell&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chsh -s /usr/bin/fish
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>完毕后重启，之后的 shell 为 &lt;code>fish&lt;/code>：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 安装 ohmyfish&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl https://raw.githubusercontent.com/oh-my-fish/oh-my-fish/master/bin/install &lt;span class="p">|&lt;/span> fish
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># fish 使用 ays 主题&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">omf install ays
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">omf theme ays
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 切换 fish 配色为 nord&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fish_config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 设置 vim 别名&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">alias&lt;/span> -s vim nvim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">alias&lt;/span> -s vi nvim
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>主题等：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git clone https://github.com/TheDistroHopper/i3wm-nord.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo cp -r ./i3wm-nord/themes /usr/share/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo cp -r ./i3wm-nord/icons /usr/share/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -O https://raw.githubusercontent.com/nordtheme/gedit/develop/src/xml/nord.xml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkdir -p ~/.local/share/gedit/styles
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mv ./nord.xml ~/.local/share/gedit/styles/nord.xml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git clone https://github.com/nekokit/i3wm-dotfiles.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo cp -r ./i3wm-dotfiles/backgrounds /usr/share/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cp -r ./i3wm-dotfiles/.config ~/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cp ./i3wm-dotfiles/.Xresources ~/.Xresources
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xrdb -load ~/.Xresources
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cp ./i3wm-dotfiles/.dir_colors ~/.dir_colors
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>至此已经安装大部分软件，软件需要经过以下设置：&lt;/p>
&lt;ul>
&lt;li>&lt;code>mousepad&lt;/code>：设置配色并取消菜单栏&lt;/li>
&lt;li>&lt;code>gedit&lt;/code>：设置主题并隐藏菜单栏&lt;/li>
&lt;li>&lt;code>fcitx5-configtool&lt;/code>：设置输入法皮肤&lt;/li>
&lt;li>&lt;code>lxappearance&lt;/code>：设置主题、字体、图标&lt;/li>
&lt;li>&lt;code>nitrogen&lt;/code>：设置桌面背景&lt;/li>
&lt;li>&lt;code>lightdm-settings&lt;/code>：设置锁屏界面&lt;/li>
&lt;li>&lt;code>nemo&lt;/code>：设置文件管理器&lt;/li>
&lt;li>&lt;code>google-chrome-stable&lt;/code>：设置 &lt;code>Google Chrome Nord Theme&lt;/code> 主题&lt;/li>
&lt;/ul>
&lt;h2 id="其他软件">其他软件
&lt;/h2>&lt;h3 id="应用">应用
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">yay -Ss jellyfin-media-player sonixd qimgv
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 设置默认看图工具&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sed -i &lt;span class="s2">&amp;#34;s/viewnior.desktop;gpicview.desktop/qimgv.desktop/g&amp;#34;&lt;/span> ~/.config/mimeapps.list
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="现代-shell-工具">现代 shell 工具
&lt;/h3>&lt;ul>
&lt;li>&lt;code>eza&lt;/code>：文件列表，替换 &lt;code>ls&lt;/code>&lt;/li>
&lt;li>&lt;code>zoxide&lt;/code>：文件夹跳转，替换 &lt;code>cd&lt;/code>&lt;/li>
&lt;li>&lt;code>bat&lt;/code>：文件查看，替换 &lt;code>cat&lt;/code>&lt;/li>
&lt;li>&lt;code>hexyl&lt;/code>：16 进制查看器&lt;/li>
&lt;li>&lt;code>fx&lt;/code>：json 解析&lt;/li>
&lt;li>&lt;code>fd&lt;/code>：文件查找，替换 &lt;code>find&lt;/code>&lt;/li>
&lt;li>&lt;code>fzf&lt;/code>：模糊查找&lt;/li>
&lt;li>&lt;code>ripgrep&lt;/code>：字符串查找，替换 &lt;code>grep&lt;/code>&lt;/li>
&lt;li>&lt;code>duf&lt;/code>：挂载点，替换 &lt;code>df&lt;/code>&lt;/li>
&lt;li>&lt;code>dust&lt;/code>：文件占用，替换 &lt;code>du&lt;/code>&lt;/li>
&lt;li>&lt;code>dua-cli&lt;/code>：文件管理&lt;/li>
&lt;li>&lt;code>htop&lt;/code>：列出进程，替换 &lt;code>top&lt;/code>&lt;/li>
&lt;li>&lt;code>procs&lt;/code>：列出进程，替换 &lt;code>ps&lt;/code>&lt;/li>
&lt;li>&lt;code>dog&lt;/code>：DNS 查询，替换 &lt;code>dig&lt;/code>&lt;/li>
&lt;li>&lt;code>sd&lt;/code>：字符串替换，替换 &lt;code>sed&lt;/code>&lt;/li>
&lt;li>&lt;code>broot&lt;/code>：列出树状文件夹，替换 &lt;code>tree&lt;/code>&lt;/li>
&lt;li>&lt;code>the_silver_searcher&lt;/code>字符串搜索：，替换 &lt;code>ack&lt;/code>&lt;/li>
&lt;li>&lt;code>choose&lt;/code>：字符串提取，替换 &lt;code>cut&lt;/code>&lt;/li>
&lt;li>&lt;code>gping&lt;/code>：ping 可视化工具，替换 &lt;code>ping&lt;/code>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">yay -Ss eza zoxide bat hexyl fx fd fzf ripgrep duf dust dua-cli htop procs dog sd broot the_silver_searcher choose gping
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">alias&lt;/span> -s ls &lt;span class="s2">&amp;#34;eza&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">alias&lt;/span> -s ll &lt;span class="s2">&amp;#34;eza -l -g -h --time-style long-iso&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">alias&lt;/span> -s la &lt;span class="s2">&amp;#34;eza -a -l -g -h --time-style long-iso&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> -e &lt;span class="s2">&amp;#34;\nzoxide init fish | source\n&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> tee -a ~/.config/fish/config.fish
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">broot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>数据库中的 7 种 join 操作</title><link>https://blog.nkit.eu.org/p/join-in-database/</link><pubDate>Thu, 27 Oct 2022 16:30:21 +0800</pubDate><guid>https://blog.nkit.eu.org/p/join-in-database/</guid><description>&lt;img src="https://blog.nkit.eu.org/p/join-in-database/cover.webp" alt="Featured image of post 数据库中的 7 种 join 操作" />&lt;h2 id="源数据">源数据
&lt;/h2>&lt;h3 id="表结构">表结构
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">create&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">table&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">not&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">exists&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">auto_increment&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">astr1&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">varchar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">astr2&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">varchar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">bid&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">primary&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">key&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">create&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">table&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">not&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">exists&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">auto_increment&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">bstr1&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">varchar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">bstr2&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">varchar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">primary&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">key&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="表-a">表 a
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>id&lt;/th>
&lt;th>astr1&lt;/th>
&lt;th>astr2&lt;/th>
&lt;th>bid&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>1&lt;/td>
&lt;td>A&lt;/td>
&lt;td>AA&lt;/td>
&lt;td>1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>2&lt;/td>
&lt;td>B&lt;/td>
&lt;td>BB&lt;/td>
&lt;td>2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>3&lt;/td>
&lt;td>C&lt;/td>
&lt;td>CC&lt;/td>
&lt;td>3&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>4&lt;/td>
&lt;td>D&lt;/td>
&lt;td>DD&lt;/td>
&lt;td>4&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>5&lt;/td>
&lt;td>E&lt;/td>
&lt;td>EE&lt;/td>
&lt;td>1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>6&lt;/td>
&lt;td>F&lt;/td>
&lt;td>FF&lt;/td>
&lt;td>2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>7&lt;/td>
&lt;td>X&lt;/td>
&lt;td>XX&lt;/td>
&lt;td>11&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>8&lt;/td>
&lt;td>Y&lt;/td>
&lt;td>YY&lt;/td>
&lt;td>12&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>9&lt;/td>
&lt;td>Z&lt;/td>
&lt;td>ZZ&lt;/td>
&lt;td>11&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="表-b">表 b
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>id&lt;/th>
&lt;th>bstr1&lt;/th>
&lt;th>bstr2&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>1&lt;/td>
&lt;td>aa&lt;/td>
&lt;td>a&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>2&lt;/td>
&lt;td>bb&lt;/td>
&lt;td>b&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>3&lt;/td>
&lt;td>cc&lt;/td>
&lt;td>c&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>4&lt;/td>
&lt;td>dd&lt;/td>
&lt;td>d&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>5&lt;/td>
&lt;td>ee&lt;/td>
&lt;td>e&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>6&lt;/td>
&lt;td>ff&lt;/td>
&lt;td>f&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>7&lt;/td>
&lt;td>xx&lt;/td>
&lt;td>x&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>8&lt;/td>
&lt;td>yy&lt;/td>
&lt;td>y&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>9&lt;/td>
&lt;td>zz&lt;/td>
&lt;td>z&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="a--b">A ∩ B
&lt;/h2>&lt;p>使用 inner join&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">inner&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">join&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">bid&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>也可使用笛卡尔乘积，然后指定条件&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">bid&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="inner-join-结果">inner join 结果
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>a.id&lt;/th>
&lt;th>astr1&lt;/th>
&lt;th>astr2&lt;/th>
&lt;th>bid&lt;/th>
&lt;th>b.id&lt;/th>
&lt;th>bstr1&lt;/th>
&lt;th>bstr2&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>1&lt;/td>
&lt;td>A&lt;/td>
&lt;td>AA&lt;/td>
&lt;td>1&lt;/td>
&lt;td>1&lt;/td>
&lt;td>aa&lt;/td>
&lt;td>a&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>2&lt;/td>
&lt;td>B&lt;/td>
&lt;td>BB&lt;/td>
&lt;td>2&lt;/td>
&lt;td>2&lt;/td>
&lt;td>bb&lt;/td>
&lt;td>b&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>3&lt;/td>
&lt;td>C&lt;/td>
&lt;td>CC&lt;/td>
&lt;td>3&lt;/td>
&lt;td>3&lt;/td>
&lt;td>cc&lt;/td>
&lt;td>c&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>4&lt;/td>
&lt;td>D&lt;/td>
&lt;td>DD&lt;/td>
&lt;td>4&lt;/td>
&lt;td>4&lt;/td>
&lt;td>dd&lt;/td>
&lt;td>d&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>5&lt;/td>
&lt;td>E&lt;/td>
&lt;td>EE&lt;/td>
&lt;td>1&lt;/td>
&lt;td>1&lt;/td>
&lt;td>aa&lt;/td>
&lt;td>a&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>6&lt;/td>
&lt;td>F&lt;/td>
&lt;td>FF&lt;/td>
&lt;td>2&lt;/td>
&lt;td>2&lt;/td>
&lt;td>bb&lt;/td>
&lt;td>b&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>结果显示：&lt;/p>
&lt;ul>
&lt;li>若 a.bid 中有在 b.id 中找不到的记录，丢弃&lt;/li>
&lt;li>若 b.id 中有在 a.bid 中找不到的记录，丢弃&lt;/li>
&lt;li>在 a.bid 和 b.id 都存在的记录，保留&lt;/li>
&lt;/ul>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>结果是否包含记录&lt;/th>
&lt;th>b.id 有&lt;/th>
&lt;th>b.id 无&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>a.bid 有&lt;/td>
&lt;td>是&lt;/td>
&lt;td>否&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>a.bid 无&lt;/td>
&lt;td>否&lt;/td>
&lt;td>-&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="a-a--b--a">A (A ∩ B + A*)
&lt;/h2>&lt;p>使用 left join&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">left&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">join&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">bid&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="left-join-结果">left join 结果
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>a.id&lt;/th>
&lt;th>astr1&lt;/th>
&lt;th>astr2&lt;/th>
&lt;th>bid&lt;/th>
&lt;th>b.id&lt;/th>
&lt;th>bstr1&lt;/th>
&lt;th>bstr2&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>1&lt;/td>
&lt;td>A&lt;/td>
&lt;td>AA&lt;/td>
&lt;td>1&lt;/td>
&lt;td>1&lt;/td>
&lt;td>aa&lt;/td>
&lt;td>a&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>2&lt;/td>
&lt;td>B&lt;/td>
&lt;td>BB&lt;/td>
&lt;td>2&lt;/td>
&lt;td>2&lt;/td>
&lt;td>bb&lt;/td>
&lt;td>b&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>3&lt;/td>
&lt;td>C&lt;/td>
&lt;td>CC&lt;/td>
&lt;td>3&lt;/td>
&lt;td>3&lt;/td>
&lt;td>cc&lt;/td>
&lt;td>c&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>4&lt;/td>
&lt;td>D&lt;/td>
&lt;td>DD&lt;/td>
&lt;td>4&lt;/td>
&lt;td>4&lt;/td>
&lt;td>dd&lt;/td>
&lt;td>d&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>5&lt;/td>
&lt;td>E&lt;/td>
&lt;td>EE&lt;/td>
&lt;td>1&lt;/td>
&lt;td>1&lt;/td>
&lt;td>aa&lt;/td>
&lt;td>a&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>6&lt;/td>
&lt;td>F&lt;/td>
&lt;td>FF&lt;/td>
&lt;td>2&lt;/td>
&lt;td>2&lt;/td>
&lt;td>bb&lt;/td>
&lt;td>b&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>7&lt;/td>
&lt;td>X&lt;/td>
&lt;td>XX&lt;/td>
&lt;td>11&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>8&lt;/td>
&lt;td>Y&lt;/td>
&lt;td>YY&lt;/td>
&lt;td>12&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>9&lt;/td>
&lt;td>Z&lt;/td>
&lt;td>ZZ&lt;/td>
&lt;td>11&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>结果显示：&lt;/p>
&lt;ul>
&lt;li>若 a.bid 中有在 b.id 中找不到的记录，保留&lt;/li>
&lt;li>若 b.id 中有在 a.bid 中找不到的记录，丢弃&lt;/li>
&lt;li>在 a.bid 和 b.id 都存在的记录，保留&lt;/li>
&lt;/ul>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>结果是否包含记录&lt;/th>
&lt;th>b.id 有&lt;/th>
&lt;th>b.id 无&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>a.bid 有&lt;/td>
&lt;td>是&lt;/td>
&lt;td>是&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>a.bid 无&lt;/td>
&lt;td>否&lt;/td>
&lt;td>-&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="b-a--b--b">B (A ∩ B + B*)
&lt;/h2>&lt;p>使用 right join&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">right&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">join&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">bid&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="right-join-结果">right join 结果
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>a.id&lt;/th>
&lt;th>astr1&lt;/th>
&lt;th>astr2&lt;/th>
&lt;th>bid&lt;/th>
&lt;th>b.id&lt;/th>
&lt;th>bstr1&lt;/th>
&lt;th>bstr2&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>5&lt;/td>
&lt;td>E&lt;/td>
&lt;td>EE&lt;/td>
&lt;td>1&lt;/td>
&lt;td>1&lt;/td>
&lt;td>aa&lt;/td>
&lt;td>a&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>1&lt;/td>
&lt;td>A&lt;/td>
&lt;td>AA&lt;/td>
&lt;td>1&lt;/td>
&lt;td>1&lt;/td>
&lt;td>aa&lt;/td>
&lt;td>a&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>6&lt;/td>
&lt;td>F&lt;/td>
&lt;td>FF&lt;/td>
&lt;td>2&lt;/td>
&lt;td>2&lt;/td>
&lt;td>bb&lt;/td>
&lt;td>b&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>2&lt;/td>
&lt;td>B&lt;/td>
&lt;td>BB&lt;/td>
&lt;td>2&lt;/td>
&lt;td>2&lt;/td>
&lt;td>bb&lt;/td>
&lt;td>b&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>3&lt;/td>
&lt;td>C&lt;/td>
&lt;td>CC&lt;/td>
&lt;td>3&lt;/td>
&lt;td>3&lt;/td>
&lt;td>cc&lt;/td>
&lt;td>c&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>4&lt;/td>
&lt;td>D&lt;/td>
&lt;td>DD&lt;/td>
&lt;td>4&lt;/td>
&lt;td>4&lt;/td>
&lt;td>dd&lt;/td>
&lt;td>d&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>5&lt;/td>
&lt;td>ee&lt;/td>
&lt;td>e&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>6&lt;/td>
&lt;td>ff&lt;/td>
&lt;td>f&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>7&lt;/td>
&lt;td>xx&lt;/td>
&lt;td>x&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>8&lt;/td>
&lt;td>yy&lt;/td>
&lt;td>y&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>9&lt;/td>
&lt;td>zz&lt;/td>
&lt;td>z&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>结果显示：&lt;/p>
&lt;ul>
&lt;li>若 a.bid 中有在 b.id 中找不到的记录，丢弃&lt;/li>
&lt;li>若 b.id 中有在 a.bid 中找不到的记录，保留&lt;/li>
&lt;li>在 a.bid 和 b.id 都存在的记录，保留&lt;/li>
&lt;/ul>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>结果是否包含记录&lt;/th>
&lt;th>b.id 有&lt;/th>
&lt;th>b.id 无&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>a.bid 有&lt;/td>
&lt;td>是&lt;/td>
&lt;td>否&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>a.bid 无&lt;/td>
&lt;td>是&lt;/td>
&lt;td>-&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="a-a---a--b">A* (A - A ∩ B)
&lt;/h2>&lt;p>使用 left join&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">left&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">join&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">bid&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">is&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">null&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="a-left-join-结果">A* left join 结果
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>a.id&lt;/th>
&lt;th>astr1&lt;/th>
&lt;th>astr2&lt;/th>
&lt;th>bid&lt;/th>
&lt;th>b.id&lt;/th>
&lt;th>bstr1&lt;/th>
&lt;th>bstr2&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>7&lt;/td>
&lt;td>X&lt;/td>
&lt;td>XX&lt;/td>
&lt;td>11&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>8&lt;/td>
&lt;td>Y&lt;/td>
&lt;td>YY&lt;/td>
&lt;td>12&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>9&lt;/td>
&lt;td>Z&lt;/td>
&lt;td>ZZ&lt;/td>
&lt;td>11&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>结果显示：&lt;/p>
&lt;ul>
&lt;li>若 a.bid 中有在 b.id 中找不到的记录，保留&lt;/li>
&lt;li>若 b.id 中有在 a.bid 中找不到的记录，丢弃&lt;/li>
&lt;li>在 a.bid 和 b.id 都存在的记录，丢弃&lt;/li>
&lt;/ul>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>结果是否包含记录&lt;/th>
&lt;th>b.id 有&lt;/th>
&lt;th>b.id 无&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>a.bid 有&lt;/td>
&lt;td>否&lt;/td>
&lt;td>是&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>a.bid 无&lt;/td>
&lt;td>否&lt;/td>
&lt;td>-&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="b-b---a--b">B* (B - A ∩ B)
&lt;/h2>&lt;p>使用 right join&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">right&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">join&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">bid&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">bid&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">is&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">null&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="b-right-join-结果">B* right join 结果
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>a.id&lt;/th>
&lt;th>astr1&lt;/th>
&lt;th>astr2&lt;/th>
&lt;th>bid&lt;/th>
&lt;th>b.id&lt;/th>
&lt;th>bstr1&lt;/th>
&lt;th>bstr2&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>5&lt;/td>
&lt;td>ee&lt;/td>
&lt;td>e&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>6&lt;/td>
&lt;td>ff&lt;/td>
&lt;td>f&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>7&lt;/td>
&lt;td>xx&lt;/td>
&lt;td>x&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>8&lt;/td>
&lt;td>yy&lt;/td>
&lt;td>y&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>9&lt;/td>
&lt;td>zz&lt;/td>
&lt;td>z&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>结果显示：&lt;/p>
&lt;ul>
&lt;li>若 a.bid 中有在 b.id 中找不到的记录，丢弃&lt;/li>
&lt;li>若 b.id 中有在 a.bid 中找不到的记录，保留&lt;/li>
&lt;li>在 a.bid 和 b.id 都存在的记录，丢弃&lt;/li>
&lt;/ul>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>结果是否包含记录&lt;/th>
&lt;th>b.id 有&lt;/th>
&lt;th>b.id 无&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>a.bid 有&lt;/td>
&lt;td>否&lt;/td>
&lt;td>否&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>a.bid 无&lt;/td>
&lt;td>是&lt;/td>
&lt;td>-&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="a--b-1">A ∪ B
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- 仅 Oracle 支持
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">full&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">outer&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">join&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">bid&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- MySQL 写法
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">left&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">join&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">bid&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">union&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">right&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">join&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">bid&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="outer-join-结果">outer join 结果
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>a.id&lt;/th>
&lt;th>astr1&lt;/th>
&lt;th>astr2&lt;/th>
&lt;th>bid&lt;/th>
&lt;th>b.id&lt;/th>
&lt;th>bstr1&lt;/th>
&lt;th>bstr2&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>1&lt;/td>
&lt;td>A&lt;/td>
&lt;td>AA&lt;/td>
&lt;td>1&lt;/td>
&lt;td>1&lt;/td>
&lt;td>aa&lt;/td>
&lt;td>a&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>2&lt;/td>
&lt;td>B&lt;/td>
&lt;td>BB&lt;/td>
&lt;td>2&lt;/td>
&lt;td>2&lt;/td>
&lt;td>bb&lt;/td>
&lt;td>b&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>3&lt;/td>
&lt;td>C&lt;/td>
&lt;td>CC&lt;/td>
&lt;td>3&lt;/td>
&lt;td>3&lt;/td>
&lt;td>cc&lt;/td>
&lt;td>c&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>4&lt;/td>
&lt;td>D&lt;/td>
&lt;td>DD&lt;/td>
&lt;td>4&lt;/td>
&lt;td>4&lt;/td>
&lt;td>dd&lt;/td>
&lt;td>d&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>5&lt;/td>
&lt;td>E&lt;/td>
&lt;td>EE&lt;/td>
&lt;td>1&lt;/td>
&lt;td>1&lt;/td>
&lt;td>aa&lt;/td>
&lt;td>a&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>6&lt;/td>
&lt;td>F&lt;/td>
&lt;td>FF&lt;/td>
&lt;td>2&lt;/td>
&lt;td>2&lt;/td>
&lt;td>bb&lt;/td>
&lt;td>b&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>7&lt;/td>
&lt;td>X&lt;/td>
&lt;td>XX&lt;/td>
&lt;td>11&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>8&lt;/td>
&lt;td>Y&lt;/td>
&lt;td>YY&lt;/td>
&lt;td>12&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>9&lt;/td>
&lt;td>Z&lt;/td>
&lt;td>ZZ&lt;/td>
&lt;td>11&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>5&lt;/td>
&lt;td>ee&lt;/td>
&lt;td>e&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>6&lt;/td>
&lt;td>ff&lt;/td>
&lt;td>f&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>7&lt;/td>
&lt;td>xx&lt;/td>
&lt;td>x&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>8&lt;/td>
&lt;td>yy&lt;/td>
&lt;td>y&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>9&lt;/td>
&lt;td>zz&lt;/td>
&lt;td>z&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>结果显示：&lt;/p>
&lt;ul>
&lt;li>若 a.bid 中有在 b.id 中找不到的记录，保留&lt;/li>
&lt;li>若 b.id 中有在 a.bid 中找不到的记录，保留&lt;/li>
&lt;li>在 a.bid 和 b.id 都存在的记录，保留&lt;/li>
&lt;/ul>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>结果是否包含记录&lt;/th>
&lt;th>b.id 有&lt;/th>
&lt;th>b.id 无&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>a.bid 有&lt;/td>
&lt;td>是&lt;/td>
&lt;td>是&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>a.bid 无&lt;/td>
&lt;td>是&lt;/td>
&lt;td>-&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>{% note info %}
提示&lt;/p>
&lt;ul>
&lt;li>JOIN 相当于表的横向连接&lt;/li>
&lt;li>UNION 相当于表的纵向连接&lt;/li>
&lt;li>UNION 在两表的字段没有相同时会报错，所以不要直接使用
&lt;code>select * from a UNION select * from b&lt;/code>
{% endnote %}&lt;/li>
&lt;/ul>
&lt;h2 id="a--b---a--b">A ∪ B - A ∩ B
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- 仅 Oracle 支持
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">full&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">outer&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">join&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">bid&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">bid&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">is&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">null&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">or&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">is&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">null&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- MySQL 写法
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">left&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">join&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">bid&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">is&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">null&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">union&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">right&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">join&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">bid&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">bid&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">is&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">null&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="full-outer-join-结果">full outer join 结果
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>a.id&lt;/th>
&lt;th>astr1&lt;/th>
&lt;th>astr2&lt;/th>
&lt;th>bid&lt;/th>
&lt;th>b.id&lt;/th>
&lt;th>bstr1&lt;/th>
&lt;th>bstr2&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>7&lt;/td>
&lt;td>X&lt;/td>
&lt;td>XX&lt;/td>
&lt;td>11&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>8&lt;/td>
&lt;td>Y&lt;/td>
&lt;td>YY&lt;/td>
&lt;td>12&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>9&lt;/td>
&lt;td>Z&lt;/td>
&lt;td>ZZ&lt;/td>
&lt;td>11&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>5&lt;/td>
&lt;td>ee&lt;/td>
&lt;td>e&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>6&lt;/td>
&lt;td>ff&lt;/td>
&lt;td>f&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>7&lt;/td>
&lt;td>xx&lt;/td>
&lt;td>x&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>8&lt;/td>
&lt;td>yy&lt;/td>
&lt;td>y&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>&lt;code>NULL&lt;/code>&lt;/td>
&lt;td>9&lt;/td>
&lt;td>zz&lt;/td>
&lt;td>z&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>结果显示：&lt;/p>
&lt;ul>
&lt;li>若 a.bid 中有在 b.id 中找不到的记录，保留&lt;/li>
&lt;li>若 b.id 中有在 a.bid 中找不到的记录，保留&lt;/li>
&lt;li>在 a.bid 和 b.id 都存在的记录，保留&lt;/li>
&lt;/ul>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>结果是否包含记录&lt;/th>
&lt;th>b.id 有&lt;/th>
&lt;th>b.id 无&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>a.bid 有&lt;/td>
&lt;td>否&lt;/td>
&lt;td>是&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>a.bid 无&lt;/td>
&lt;td>是&lt;/td>
&lt;td>-&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="总结">总结
&lt;/h2>&lt;p>数据库的七种 JOIN 操作分别是作为两个表 &lt;code>连接字段&lt;/code> 的 &lt;code>记录集合&lt;/code> A 、 B 的七种操作关系，对应下图：&lt;/p>
&lt;p>&lt;img src="https://blog.nkit.eu.org/p/join-in-database/sql-join.webp"
width="1363"
height="869"
srcset="https://blog.nkit.eu.org/p/join-in-database/sql-join_huae4531757e780ed192f3ed4d00654fa2_91472_480x0_resize_q75_h2_box_2.webp 480w, https://blog.nkit.eu.org/p/join-in-database/sql-join_huae4531757e780ed192f3ed4d00654fa2_91472_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="7 中 join 操作"
class="gallery-image"
data-flex-grow="156"
data-flex-basis="376px"
>&lt;/p></description></item><item><title>SQL 基础</title><link>https://blog.nkit.eu.org/p/sql-learning/</link><pubDate>Wed, 26 Oct 2022 10:09:01 +0800</pubDate><guid>https://blog.nkit.eu.org/p/sql-learning/</guid><description>&lt;img src="https://blog.nkit.eu.org/p/sql-learning/cover.webp" alt="Featured image of post SQL 基础" />&lt;h2 id="简介">简介
&lt;/h2>&lt;p>本文主要记录学习 SQL 的过程以及基础 SQL 语法。&lt;/p>
&lt;h2 id="ddl---date-definition-language">DDL - Date Definition Language
&lt;/h2>&lt;p>数据库定义语言用于数据库与表的创建，用于组织数据结构与逻辑。&lt;/p>
&lt;h3 id="数据库操作">数据库操作
&lt;/h3>&lt;h4 id="创建数据库">创建数据库
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DATABASE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IF&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NOT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">EXISTS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">sql_study&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">DEFAULT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">CHARACTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SET&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">utf8mb4&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">COLLATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">utf8mb4_0900_ai_ci&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 语句结构
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DATABASE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="k">IF&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NOT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">EXISTS&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${数据库名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">DEFAULT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">CHARACTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SET&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">${字符集}&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">COLLATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">${排序}&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;style type="text/css">
.notice {
--root-color: #444;
--root-background: #eff;
--title-color: #fff;
--title-background: #7bd;
--warning-title: #c33;
--warning-content: #fee;
--info-title: #fb7;
--info-content: #fec;
--note-title: #6be;
--note-content: #e7f2fa;
--tip-title: #5a5;
--tip-content: #efe
}
@media (prefers-color-scheme:dark) {
.notice {
--root-color: #ddd;
--root-background: #eff;
--title-color: #fff;
--title-background: #7bd;
--warning-title: #800;
--warning-content: #400;
--info-title: #a50;
--info-content: #420;
--note-title: #069;
--note-content: #023;
--tip-title: #363;
--tip-content: #121
}
}
body.dark .notice {
--root-color: #ddd;
--root-background: #eff;
--title-color: #fff;
--title-background: #7bd;
--warning-title: #800;
--warning-content: #400;
--info-title: #a50;
--info-content: #420;
--note-title: #069;
--note-content: #023;
--tip-title: #363;
--tip-content: #121
}
.notice {
padding: 18px;
line-height: 24px;
margin-bottom: 24px;
border-radius: 4px;
color: var(--root-color);
background: var(--root-background)
}
.notice p:last-child {
margin-bottom: 0
}
.notice-title {
margin: -18px -18px 12px;
padding: 4px 18px;
border-radius: 4px 4px 0 0;
font-weight: 700;
color: var(--title-color);
background: var(--title-background)
}
.notice.warning .notice-title {
background: var(--warning-title)
}
.notice.warning {
background: var(--warning-content)
}
.notice.info .notice-title {
background: var(--info-title)
}
.notice.info {
background: var(--info-content)
}
.notice.note .notice-title {
background: var(--note-title)
}
.notice.note {
background: var(--note-content)
}
.notice.tip .notice-title {
background: var(--tip-title)
}
.notice.tip {
background: var(--tip-content)
}
.icon-notice {
display: inline-flex;
align-self: center;
margin-right: 8px
}
.icon-notice img,
.icon-notice svg {
height: 1em;
width: 1em;
fill: currentColor
}
.icon-notice img,
.icon-notice.baseline svg {
top: .125em;
position: relative
}
&lt;/style>&lt;div class="notice tip" >
&lt;p class="notice-title">
&lt;span class="icon-notice baseline">
&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="300.5 134 300 300">
&lt;path d="M551.281 252.36c0-3.32-1.172-6.641-3.515-8.985l-17.774-17.578c-2.344-2.344-5.469-3.711-8.789-3.711-3.32 0-6.445 1.367-8.789 3.71l-79.687 79.493-44.141-44.14c-2.344-2.344-5.469-3.712-8.79-3.712-3.32 0-6.444 1.368-8.788 3.711l-17.774 17.579c-2.343 2.343-3.515 5.664-3.515 8.984 0 3.32 1.172 6.445 3.515 8.789l70.704 70.703c2.343 2.344 5.664 3.711 8.789 3.711 3.32 0 6.64-1.367 8.984-3.71l106.055-106.056c2.343-2.343 3.515-5.468 3.515-8.789ZM600.5 284c0 82.813-67.188 150-150 150-82.813 0-150-67.188-150-150 0-82.813 67.188-150 150-150 82.813 0 150 67.188 150 150Z"/>
&lt;/svg>
&lt;/span>提示&lt;/p>&lt;p>在使用工具创建 SQL 时可能会出现如 &lt;code>/*!40100 */&lt;/code> 的特殊注释，这里使用 DataGrip 连接 MySQL 创建，代表服务器 MySQL 版本大于 4.0.1 时执行。&lt;/p>&lt;/div>
&lt;div class="notice info" >
&lt;p class="notice-title">
&lt;span class="icon-notice baseline">
&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="92 59.5 300 300">
&lt;path d="M292 303.25V272c0-3.516-2.734-6.25-6.25-6.25H267v-100c0-3.516-2.734-6.25-6.25-6.25h-62.5c-3.516 0-6.25 2.734-6.25 6.25V197c0 3.516 2.734 6.25 6.25 6.25H217v62.5h-18.75c-3.516 0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h87.5c3.516 0 6.25-2.734 6.25-6.25Zm-25-175V97c0-3.516-2.734-6.25-6.25-6.25h-37.5c-3.516 0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h37.5c3.516 0 6.25-2.734 6.25-6.25Zm125 81.25c0 82.813-67.188 150-150 150-82.813 0-150-67.188-150-150 0-82.813 67.188-150 150-150 82.813 0 150 67.188 150 150Z"/>
&lt;/svg>
&lt;/span>信息&lt;/p>&lt;p>创建数据库时最好加上 &lt;code>IF NOT EXISTS&lt;/code> 条件，避免数据库已存在导致报错&lt;/p>&lt;/div>
&lt;h4 id="删除数据库">删除数据库
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">DROP&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DATABASE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IF&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">EXISTS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">sql_study&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 语句结构
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">DROP&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DATABASE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="k">IF&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">EXISTS&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${数据库名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="notice info" >
&lt;p class="notice-title">
&lt;span class="icon-notice baseline">
&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="92 59.5 300 300">
&lt;path d="M292 303.25V272c0-3.516-2.734-6.25-6.25-6.25H267v-100c0-3.516-2.734-6.25-6.25-6.25h-62.5c-3.516 0-6.25 2.734-6.25 6.25V197c0 3.516 2.734 6.25 6.25 6.25H217v62.5h-18.75c-3.516 0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h87.5c3.516 0 6.25-2.734 6.25-6.25Zm-25-175V97c0-3.516-2.734-6.25-6.25-6.25h-37.5c-3.516 0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h37.5c3.516 0 6.25-2.734 6.25-6.25Zm125 81.25c0 82.813-67.188 150-150 150-82.813 0-150-67.188-150-150 0-82.813 67.188-150 150-150 82.813 0 150 67.188 150 150Z"/>
&lt;/svg>
&lt;/span>信息&lt;/p>&lt;p>删除数据库时最好加上 &lt;code>IF EXISTS&lt;/code> 条件，避免数据库不存在导致报错&lt;/p>&lt;/div>
&lt;h4 id="查看所有数据库">查看所有数据库
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">SHOW&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">DATABAS&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="使用数据库">使用数据库
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">USE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">sql_study&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 语句结构
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n">USE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${数据库名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="查看数据库的定义语句">查看数据库的定义语句
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">SHOW&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DATABASE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">sql_study&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 语句结构
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">SHOW&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DATABASE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${数据库名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="表操作">表操作
&lt;/h3>&lt;h4 id="创建表">创建表
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IF&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NOT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">EXISTS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">user_info&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NOT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NULL&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">AUTO_INCREMENT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">COMMENT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;序列号&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">varchar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NOT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NULL&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DEFAULT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">COMMENT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;姓名&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">age&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DEFAULT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;0&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">COMMENT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;年龄&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">PRIMARY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">KEY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ENGINE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">InnoDB&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">AUTO_INCREMENT&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DEFAULT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">CHARSET&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">utf8mb4&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">COLLATE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">utf8mb4_0900_ai_ci&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">COMMENT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;用户表&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 语句结构
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="k">IF&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NOT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">EXISTS&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${表名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${字段名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">${字段类型}&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="err">${字段属性}&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">COMMENT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;${字段备注}&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">...&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${字段名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">${字段类型}&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="err">${字段属性}&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">COMMENT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;${字段备注}&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">PRIMARY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">KEY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${字段名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">${引擎}&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="err">${表属性}&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DEFAULT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">CHARSET&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="err">${字符集}&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">COLLATE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="err">${排序规则}&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">COMMENT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;${表备注}&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="notice info" >
&lt;p class="notice-title">
&lt;span class="icon-notice baseline">
&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="92 59.5 300 300">
&lt;path d="M292 303.25V272c0-3.516-2.734-6.25-6.25-6.25H267v-100c0-3.516-2.734-6.25-6.25-6.25h-62.5c-3.516 0-6.25 2.734-6.25 6.25V197c0 3.516 2.734 6.25 6.25 6.25H217v62.5h-18.75c-3.516 0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h87.5c3.516 0 6.25-2.734 6.25-6.25Zm-25-175V97c0-3.516-2.734-6.25-6.25-6.25h-37.5c-3.516 0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h37.5c3.516 0 6.25-2.734 6.25-6.25Zm125 81.25c0 82.813-67.188 150-150 150-82.813 0-150-67.188-150-150 0-82.813 67.188-150 150-150 82.813 0 150 67.188 150 150Z"/>
&lt;/svg>
&lt;/span>信息&lt;/p>&lt;p>创建表时最好加上 &lt;code>IF NOT EXISTS&lt;/code> 条件，避免表已存在导致报错&lt;/p>&lt;/div>
&lt;h4 id="删除表">删除表
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">DROP&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IF&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">EXISTS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="k">user&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 语句结构
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">DROP&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="k">IF&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">EXISTS&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${表名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="notice info" >
&lt;p class="notice-title">
&lt;span class="icon-notice baseline">
&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="92 59.5 300 300">
&lt;path d="M292 303.25V272c0-3.516-2.734-6.25-6.25-6.25H267v-100c0-3.516-2.734-6.25-6.25-6.25h-62.5c-3.516 0-6.25 2.734-6.25 6.25V197c0 3.516 2.734 6.25 6.25 6.25H217v62.5h-18.75c-3.516 0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h87.5c3.516 0 6.25-2.734 6.25-6.25Zm-25-175V97c0-3.516-2.734-6.25-6.25-6.25h-37.5c-3.516 0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h37.5c3.516 0 6.25-2.734 6.25-6.25Zm125 81.25c0 82.813-67.188 150-150 150-82.813 0-150-67.188-150-150 0-82.813 67.188-150 150-150 82.813 0 150 67.188 150 150Z"/>
&lt;/svg>
&lt;/span>信息&lt;/p>&lt;p>删除表时最好加上 &lt;code>IF EXISTS&lt;/code> 条件，避免表不存在导致报错&lt;/p>&lt;/div>
&lt;h4 id="查看所有表">查看所有表
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">SHOW&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">TABLES&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="查看表结构">查看表结构
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">DESC&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="k">user&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 语句结构
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">DESC&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${表名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="查看表定义语句">查看表定义语句
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">SHOW&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="k">user&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 语句结构
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">SHOW&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${表名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="修改表结构">修改表结构
&lt;/h4>&lt;h5 id="修改表名">修改表名
&lt;/h5>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">ALTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="k">user&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">RENAME&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">user1&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 语句结构
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">ALTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${旧表名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">RENAME&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${新表名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="编辑字段">编辑字段
&lt;/h5>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- 添加字段
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">ALTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="k">user&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ADD&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">score&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">INT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DEFAULT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;0&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">COMMENT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;成绩&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 修改字段类型
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">ALTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="k">user&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">MODIFY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">score&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">FLOAT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DEFAULT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;0&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">COMMENT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;成绩&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 重命名字段
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">ALTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="k">user&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">CHANGE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">score&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">math_score&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">FLOAT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DEFAULT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;0&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">COMMENT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;成绩&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 语句结构
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- 添加字段
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">ALTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${表名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ADD&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${字段名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">${字段类型}&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="err">${字段属性}&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">COMMENT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;${字段备注}&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 修改字段类型
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">ALTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${表名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">MODIFY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${字段名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">${新字段类型}&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="err">${新字段属性}&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">COMMENT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;${新字段备注}&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 重命名字段
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">ALTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${表名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">CHANGE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${旧字段名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${新字段名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">${新字段类型}&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="err">${新字段属性}&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">COMMENT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;${新字段备注}&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="notice warning" >
&lt;p class="notice-title">
&lt;span class="icon-notice baseline">
&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="126 76.5 300 300">
&lt;path d="M297.431 324.397v-34.255c0-3.245-2.344-5.95-5.358-5.95h-32.146c-3.014 0-5.358 2.705-5.358 5.95v34.255c0 3.245 2.344 5.95 5.358 5.95h32.146c3.014 0 5.358-2.705 5.358-5.95Zm-.335-67.428 3.014-82.753c0-1.081-.502-2.524-1.674-3.425-1.005-.902-2.512-1.983-4.019-1.983h-36.834c-1.507 0-3.014 1.081-4.019 1.983-1.172.901-1.674 2.704-1.674 3.786l2.846 82.392c0 2.344 2.512 4.146 5.693 4.146h30.975c3.013 0 5.525-1.803 5.692-4.146Zm-2.344-168.39L423.34 342.425c3.683 7.032 3.516 15.686-.335 22.717-3.85 7.031-10.883 11.358-18.417 11.358H147.413c-7.534 0-14.566-4.327-18.417-11.358-3.85-7.031-4.018-15.685-.335-22.716L257.248 88.578C260.93 81.188 268.13 76.5 276 76.5c7.87 0 15.069 4.688 18.752 12.08Z"/>
&lt;/svg>
&lt;/span>警告&lt;/p>&lt;p>不要使用 &lt;code>CHANGE&lt;/code> 字段进行字段重命名以外的操作&lt;/p>
&lt;p>使用 &lt;code>MODIFY&lt;/code> 来修改字段类型和属性&lt;/p>&lt;/div>
&lt;h5 id="删除字段">删除字段
&lt;/h5>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">ALTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="k">user&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DROP&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">score&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 语句结构
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">ALTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${表名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DROP&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${字段名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="设置外键">设置外键
&lt;/h4>&lt;div class="notice info" >
&lt;p class="notice-title">
&lt;span class="icon-notice baseline">
&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="92 59.5 300 300">
&lt;path d="M292 303.25V272c0-3.516-2.734-6.25-6.25-6.25H267v-100c0-3.516-2.734-6.25-6.25-6.25h-62.5c-3.516 0-6.25 2.734-6.25 6.25V197c0 3.516 2.734 6.25 6.25 6.25H217v62.5h-18.75c-3.516 0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h87.5c3.516 0 6.25-2.734 6.25-6.25Zm-25-175V97c0-3.516-2.734-6.25-6.25-6.25h-37.5c-3.516 0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h37.5c3.516 0 6.25-2.734 6.25-6.25Zm125 81.25c0 82.813-67.188 150-150 150-82.813 0-150-67.188-150-150 0-82.813 67.188-150 150-150 82.813 0 150 67.188 150 150Z"/>
&lt;/svg>
&lt;/span>信息&lt;/p>&lt;p>里演示的时数据库级别的外键，有引用关系时主表无法删除，故在实际生产中不建议使用&lt;/p>
&lt;p>生产上数据库只是单纯的数据，只有字段和记录&lt;/p>
&lt;p>生产上若想使用多张表数据，可使用应用程序来实现&lt;/p>&lt;/div>
&lt;p>方式一：
创建表的时候增加约束&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- 创建年级表
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IF&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NOT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">EXISTS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">grade&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NOT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NULL&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">AUTO_INCREMENT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">COMMENT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;序列号&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">varchar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NOT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NULL&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DEFAULT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">COMMENT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;年级名&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="k">comment&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">varchar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">40&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DEFAULT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NULL&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">COMMENT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;备注&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">PRIMARY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">KEY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ENGINE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">InnoDB&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DEFAULT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">CHARSET&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">utf8mb4&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">COLLATE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">utf8mb4_0900_ai_ci&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">COMMENT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;年级表表&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 创建学生表
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IF&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NOT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">EXISTS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">student&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NOT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NULL&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">AUTO_INCREMENT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">COMMENT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;序列号&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">age&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DEFAULT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;0&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">COMMENT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;年龄&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">varchar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NOT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NULL&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DEFAULT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">COMMENT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;姓名&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">grade_id&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DEFAULT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NULL&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">COMMENT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;年级id&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">PRIMARY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">KEY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">-- 定义外键 Key 并将添加引用字段
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">KEY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">FK_grade_id&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">grade_id&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">-- 创建外键约束，指定被引用表和字段名
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">CONSTRAINT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">FK_grade_id&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FOREIGN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">KEY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">grade_id&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">REFERENCES&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">grade&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ENGINE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">InnoDB&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DEFAULT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">CHARSET&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">utf8mb4&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">COLLATE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">utf8mb4_0900_ai_ci&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">COMMENT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;年级表表&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 语句结构
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">-- 定义外键 Key 并将添加引用字段
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">KEY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${&lt;/span>&lt;span class="n">FK_外键名&lt;/span>&lt;span class="err">}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${从字段名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">-- 创建外键约束，指定被引用表和字段名
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">CONSTRAINT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${&lt;/span>&lt;span class="n">FK_外键名&lt;/span>&lt;span class="err">}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FOREIGN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">KEY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${从字段名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">REFERENCES&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${主表名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${主字段名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="notice tip" >
&lt;p class="notice-title">
&lt;span class="icon-notice baseline">
&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="300.5 134 300 300">
&lt;path d="M551.281 252.36c0-3.32-1.172-6.641-3.515-8.985l-17.774-17.578c-2.344-2.344-5.469-3.711-8.789-3.711-3.32 0-6.445 1.367-8.789 3.71l-79.687 79.493-44.141-44.14c-2.344-2.344-5.469-3.712-8.79-3.712-3.32 0-6.444 1.368-8.788 3.711l-17.774 17.579c-2.343 2.343-3.515 5.664-3.515 8.984 0 3.32 1.172 6.445 3.515 8.789l70.704 70.703c2.343 2.344 5.664 3.711 8.789 3.711 3.32 0 6.64-1.367 8.984-3.71l106.055-106.056c2.343-2.343 3.515-5.468 3.515-8.789ZM600.5 284c0 82.813-67.188 150-150 150-82.813 0-150-67.188-150-150 0-82.813 67.188-150 150-150 82.813 0 150 67.188 150 150Z"/>
&lt;/svg>
&lt;/span>提示&lt;/p>&lt;p>约定成俗的，将外键定义成 &lt;code>FK_&lt;/code> 开头&lt;/p>
&lt;p>被引用数据的表称为 &lt;code>主表&lt;/code>&lt;/p>
&lt;p>引用数据的表称为 &lt;code>从表&lt;/code>&lt;/p>
&lt;p>删除直接删除主表会报错，必须先解除引用关系&lt;/p>&lt;/div>
&lt;p>方式一：
先创建正常表，再通过命令创建外键引用关系&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">ALTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">student&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ADD&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">CONSTRAINT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">FK_grade_id&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FOREIGN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">KEY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">grade_id&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">REFERENCES&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">grade&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 语句结构
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">ALTER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${从表名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ADD&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">CONSTRAINT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${&lt;/span>&lt;span class="n">FK_外键名&lt;/span>&lt;span class="err">}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FOREIGN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">KEY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${从字段名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">REFERENCES&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${主表名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${主字段名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="dml---data-manipulation-language">DML - Data Manipulation Language
&lt;/h2>&lt;h3 id="insert">INSERT
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- 插入单条数据
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">INSERT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INTO&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">grade&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="k">comment&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">VALUE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;大一&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;第一年&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 插入多条数据
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">INSERT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INTO&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">grade&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="k">comment&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">VALUE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;大二&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;第二年&amp;#39;&lt;/span>&lt;span class="p">),(&lt;/span>&lt;span class="s1">&amp;#39;大三&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;第三年&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 语句结构
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">INSERT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INTO&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${表名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${字段}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${字段}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">VALUE&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;${值}&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;${值}&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;${值}&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;${值}&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="notice info" >
&lt;p class="notice-title">
&lt;span class="icon-notice baseline">
&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="92 59.5 300 300">
&lt;path d="M292 303.25V272c0-3.516-2.734-6.25-6.25-6.25H267v-100c0-3.516-2.734-6.25-6.25-6.25h-62.5c-3.516 0-6.25 2.734-6.25 6.25V197c0 3.516 2.734 6.25 6.25 6.25H217v62.5h-18.75c-3.516 0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h87.5c3.516 0 6.25-2.734 6.25-6.25Zm-25-175V97c0-3.516-2.734-6.25-6.25-6.25h-37.5c-3.516 0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h37.5c3.516 0 6.25-2.734 6.25-6.25Zm125 81.25c0 82.813-67.188 150-150 150-82.813 0-150-67.188-150-150 0-82.813 67.188-150 150-150 82.813 0 150 67.188 150 150Z"/>
&lt;/svg>
&lt;/span>信息&lt;/p>&lt;p>数据会与字段一一匹配&lt;/p>
&lt;p>当没有指定字段名时，将会按照所有字段顺序匹配&lt;/p>&lt;/div>
&lt;h3 id="update">UPDATE
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">UPDATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">student&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SET&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">`=&lt;/span>&lt;span class="s1">&amp;#39;李四&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">age&lt;/span>&lt;span class="o">`=&lt;/span>&lt;span class="s1">&amp;#39;22&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">`=&lt;/span>&lt;span class="s1">&amp;#39;李4&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 语句结构
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">UPDATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${表名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">SET&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${字段}&lt;/span>&lt;span class="o">`=&lt;/span>&lt;span class="s1">&amp;#39;${值}&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">...&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${字段}&lt;/span>&lt;span class="o">`=&lt;/span>&lt;span class="s1">&amp;#39;${值}&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">${条件}&lt;/span>&lt;span class="p">];&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="notice warning" >
&lt;p class="notice-title">
&lt;span class="icon-notice baseline">
&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="126 76.5 300 300">
&lt;path d="M297.431 324.397v-34.255c0-3.245-2.344-5.95-5.358-5.95h-32.146c-3.014 0-5.358 2.705-5.358 5.95v34.255c0 3.245 2.344 5.95 5.358 5.95h32.146c3.014 0 5.358-2.705 5.358-5.95Zm-.335-67.428 3.014-82.753c0-1.081-.502-2.524-1.674-3.425-1.005-.902-2.512-1.983-4.019-1.983h-36.834c-1.507 0-3.014 1.081-4.019 1.983-1.172.901-1.674 2.704-1.674 3.786l2.846 82.392c0 2.344 2.512 4.146 5.693 4.146h30.975c3.013 0 5.525-1.803 5.692-4.146Zm-2.344-168.39L423.34 342.425c3.683 7.032 3.516 15.686-.335 22.717-3.85 7.031-10.883 11.358-18.417 11.358H147.413c-7.534 0-14.566-4.327-18.417-11.358-3.85-7.031-4.018-15.685-.335-22.716L257.248 88.578C260.93 81.188 268.13 76.5 276 76.5c7.87 0 15.069 4.688 18.752 12.08Z"/>
&lt;/svg>
&lt;/span>警告&lt;/p>&lt;p>修改数据时&lt;strong>一定要带条件&lt;/strong>&lt;/p>
&lt;p>不带条件&lt;strong>默认修改所有记录&lt;/strong>&lt;/p>
&lt;p>每一行条件结果为一个布尔值，结果为 &lt;code>True&lt;/code> 的行才会修改&lt;/p>&lt;/div>
&lt;h3 id="delete">DELETE
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">DELETE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">student&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">`=&lt;/span>&lt;span class="s1">&amp;#39;5&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 语句结构
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">DELETE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${表名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">${条件}&lt;/span>&lt;span class="p">];&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="notice warning" >
&lt;p class="notice-title">
&lt;span class="icon-notice baseline">
&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="126 76.5 300 300">
&lt;path d="M297.431 324.397v-34.255c0-3.245-2.344-5.95-5.358-5.95h-32.146c-3.014 0-5.358 2.705-5.358 5.95v34.255c0 3.245 2.344 5.95 5.358 5.95h32.146c3.014 0 5.358-2.705 5.358-5.95Zm-.335-67.428 3.014-82.753c0-1.081-.502-2.524-1.674-3.425-1.005-.902-2.512-1.983-4.019-1.983h-36.834c-1.507 0-3.014 1.081-4.019 1.983-1.172.901-1.674 2.704-1.674 3.786l2.846 82.392c0 2.344 2.512 4.146 5.693 4.146h30.975c3.013 0 5.525-1.803 5.692-4.146Zm-2.344-168.39L423.34 342.425c3.683 7.032 3.516 15.686-.335 22.717-3.85 7.031-10.883 11.358-18.417 11.358H147.413c-7.534 0-14.566-4.327-18.417-11.358-3.85-7.031-4.018-15.685-.335-22.716L257.248 88.578C260.93 81.188 268.13 76.5 276 76.5c7.87 0 15.069 4.688 18.752 12.08Z"/>
&lt;/svg>
&lt;/span>警告&lt;/p>&lt;p>删除表中的记录一般不使用 &lt;code>DELETE&lt;/code> 语句&lt;/p>
&lt;p>生产环境中删除数据一般使用 &lt;code>is_delete&lt;/code> 字段作为标识符进行伪删除&lt;/p>&lt;/div>
&lt;h3 id="truncate">TRUNCATE
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- 清空数据表，结构与外键约束不变
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">TRUNCATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">test&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 语句结构
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">TRUNCATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${表名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="notice tip" >
&lt;p class="notice-title">
&lt;span class="icon-notice baseline">
&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="300.5 134 300 300">
&lt;path d="M551.281 252.36c0-3.32-1.172-6.641-3.515-8.985l-17.774-17.578c-2.344-2.344-5.469-3.711-8.789-3.711-3.32 0-6.445 1.367-8.789 3.71l-79.687 79.493-44.141-44.14c-2.344-2.344-5.469-3.712-8.79-3.712-3.32 0-6.444 1.368-8.788 3.711l-17.774 17.579c-2.343 2.343-3.515 5.664-3.515 8.984 0 3.32 1.172 6.445 3.515 8.789l70.704 70.703c2.343 2.344 5.664 3.711 8.789 3.711 3.32 0 6.64-1.367 8.984-3.71l106.055-106.056c2.343-2.343 3.515-5.468 3.515-8.789ZM600.5 284c0 82.813-67.188 150-150 150-82.813 0-150-67.188-150-150 0-82.813 67.188-150 150-150 82.813 0 150 67.188 150 150Z"/>
&lt;/svg>
&lt;/span>提示&lt;/p>&lt;p>TRUNCATE 与 DELETE 的区别&lt;/p>
&lt;ul>
&lt;li>都能删除数据&lt;/li>
&lt;li>都会保留表结构&lt;/li>
&lt;li>TRUNCATE 会重新设置自增列&lt;/li>
&lt;li>DELETE 不会重新设置自增列&lt;/li>
&lt;li>TRUNCATE 不会影响事务&lt;/li>
&lt;li>DELETE 会影响事务&lt;/li>
&lt;/ul>&lt;/div>
&lt;h2 id="dql---data-query-language">DQL - Data Query Language
&lt;/h2>&lt;p>数据库中最核心的语言，语句： &lt;code>SELECT&lt;/code> 。&lt;/p>
&lt;h3 id="基本查询">基本查询
&lt;/h3>&lt;p>查询数据库：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- 查询所有字段和记录
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">student&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 查询指定字段和记录
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">grade_id&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">student&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">`=&lt;/span>&lt;span class="s1">&amp;#39;2&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 使用字段别名
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;学生姓名&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">grade_id&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;年级id&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">student&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 语句结构
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${字段名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;${字段别名}&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">...&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${字段名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;${字段别名}&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${表名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;${表别名}&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">${条件}&lt;/span>&lt;span class="p">];&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>除了查询数据库中的数据外， SELECT 还能查询一些其他项目：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- 去重结果
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DISTINCT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">student&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 查询函数结果
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">VERSION&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 查询计算结果
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;计算结果&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 查询系统变量
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">@@&lt;/span>&lt;span class="n">auto_increment_increment&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="使用函数">使用函数
&lt;/h3>&lt;h4 id="常用函数">常用函数
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ABS&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">-- 绝对值
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">CEILING&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">-- 向上取整
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">FLOOR&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">-- 向下取整
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">RAND&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">-- 生成随机数
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">SIGN&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">-- 判断符号
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">LENGTH&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;hello,word!&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">-- 计算字符串长度
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INSERT&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;hello,word!&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;neko&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">-- 删除插入字符串
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">REPLACE&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;hello,word!&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;word&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;neko&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">-- 替换字符串
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">UPPER&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;hello,word!&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">-- 转为大写
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">LOWER&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;INSERT&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">-- 转为小写
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">CURDATE&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">-- 当前日期
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">NOW&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">-- 当前时间
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">LOCALTIME&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">-- 本地时间
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">SYSDATE&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">-- 系统日期
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">USER&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">-- 当前用户
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">VERSION&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">-- 当前版本
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 拼接字段
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">CONCAT&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;姓名：&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;；年级id：&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">grade_id&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">学生信息&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">student&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 数据加密
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">INSERT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">INTO&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">testmd5&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="k">user&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">pwd&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">VALUES&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">neko&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">MD5&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;123456&amp;#39;&lt;/span>&lt;span class="p">))&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 函数语法
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="err">${函数名}&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="err">${参数}&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="聚合函数">聚合函数
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">COUNT&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">student&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">-- 统计所有的字段，不会忽略 BULL 值，慢
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">COUNT&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">student&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">-- 忽略所有的字段，用 1 代替，不会忽略 NULL 值，最快
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">COUNT&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">student&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">-- 值统计指定的字段，会忽略 NULL 值，快
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SUM&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">age&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;年龄总和&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">student&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">-- 求和
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AVG&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">age&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;年龄总和&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">student&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">-- 平均
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">MAX&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">age&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;年龄总和&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">student&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">-- 最高
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">MIN&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">age&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;年龄总和&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">student&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">-- 最低
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 函数语法
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="err">${函数名}&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="err">${参数}&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="条件子句">条件子句
&lt;/h3>&lt;h4 id="模糊查询">模糊查询
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- % 表示任意个字符
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- _ 表示一个字符
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">student&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">LIKE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;王%&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 语句结构
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${字段名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">LIKE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">${匹配字符}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="在集合中">在集合中
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- IN 后面的合集应为一个具体的值
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">student&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 语句结构
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${字段名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">${集合}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="查询空值">查询空值
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- 应考虑 NULL 和空字符串两种情况
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">student&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">`=&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">OR&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NULL&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 语句结构
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${字段名}&lt;/span>&lt;span class="o">`=&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">OR&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${字段名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NULL&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="联表查询">联表查询
&lt;/h3>&lt;h4 id="多表连接">多表连接
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- 查询多个表的情况，应先从两个表的连接写起
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;学生id&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;学生姓名&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="k">g&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;年级&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">student&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">INNER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">JOIN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">grade&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">g&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">ON&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">grade_id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">g&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 语句结构
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="err">${表名&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="err">表别名}&lt;/span>&lt;span class="p">.]&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${字段名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;${字段别名}&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">...,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="err">${表名&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="err">表别名}&lt;/span>&lt;span class="p">.]&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${字段名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;${字段别名}&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${表名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[[&lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">${表别名}&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">${联表方式}&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">JOIN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${表名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[[&lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">${表别名}&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">ON&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="err">${表名&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="err">表别名}&lt;/span>&lt;span class="p">.]&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${字段名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="err">${表名&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="err">表别名}&lt;/span>&lt;span class="p">.]&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${字段名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">...&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">${联表方式}&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">JOIN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${表名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[[&lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">${表别名}&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">ON&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="err">${表名&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="err">表别名}&lt;/span>&lt;span class="p">.]&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${字段名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="err">${表名&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="err">表别名}&lt;/span>&lt;span class="p">.]&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${字段名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">${条件}&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>联表操作包含 7 种 JOIN 类型，详细请查看：
&lt;a class="link" href="../join-in-database" >数据库中的 7 种 join 操作&lt;/a>&lt;/p>
&lt;h4 id="自连接">自连接
&lt;/h4>&lt;p>有这样一张表：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">create&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">table&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">not&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">exists&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">category&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">category_id&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">auto_increment&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">pid&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">varchar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">40&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">primary&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">key&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">category_id&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>category_id&lt;/th>
&lt;th>pid&lt;/th>
&lt;th>name&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>2&lt;/td>
&lt;td>1&lt;/td>
&lt;td>信息技术&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>3&lt;/td>
&lt;td>1&lt;/td>
&lt;td>软件开发&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>4&lt;/td>
&lt;td>3&lt;/td>
&lt;td>数据库&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>5&lt;/td>
&lt;td>1&lt;/td>
&lt;td>美术设计&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>6&lt;/td>
&lt;td>3&lt;/td>
&lt;td>Web 开发&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>7&lt;/td>
&lt;td>5&lt;/td>
&lt;td>PS 技术&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>8&lt;/td>
&lt;td>2&lt;/td>
&lt;td>办公信息&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>进行自连接，可将目录的层次关系列出：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">p&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;父目录&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;子目录&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">category&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">p&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">category&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">p&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">category_id&lt;/span>&lt;span class="o">`=&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">pid&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>结果：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>父目录&lt;/th>
&lt;th>子目录&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>软件开发&lt;/td>
&lt;td>数据库&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>软件开发&lt;/td>
&lt;td>Web 开发&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>美术设计&lt;/td>
&lt;td>PS 技术&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>信息技术&lt;/td>
&lt;td>办公信息&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>自连接是将自身看作两张完全一样的表进行连接操作。&lt;/p>
&lt;h3 id="子查询">子查询
&lt;/h3>&lt;p>当要查询的字段在同一张表中，但是筛选条件在其他的表中时，可以使用子查询简化查询语句&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;学生id&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;学生姓名&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">student&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">grade_id&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">grade&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;大二&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;大三&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 语句结构
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">${字段名}&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">${运算}&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="err">${子查询}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="notice tip" >
&lt;p class="notice-title">
&lt;span class="icon-notice baseline">
&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="300.5 134 300 300">
&lt;path d="M551.281 252.36c0-3.32-1.172-6.641-3.515-8.985l-17.774-17.578c-2.344-2.344-5.469-3.711-8.789-3.711-3.32 0-6.445 1.367-8.789 3.71l-79.687 79.493-44.141-44.14c-2.344-2.344-5.469-3.712-8.79-3.712-3.32 0-6.444 1.368-8.788 3.711l-17.774 17.579c-2.343 2.343-3.515 5.664-3.515 8.984 0 3.32 1.172 6.445 3.515 8.789l70.704 70.703c2.343 2.344 5.664 3.711 8.789 3.711 3.32 0 6.64-1.367 8.984-3.71l106.055-106.056c2.343-2.343 3.515-5.468 3.515-8.789ZM600.5 284c0 82.813-67.188 150-150 150-82.813 0-150-67.188-150-150 0-82.813 67.188-150 150-150 82.813 0 150 67.188 150 150Z"/>
&lt;/svg>
&lt;/span>提示&lt;/p>&lt;p>子查询就是在 &lt;code>WHERE&lt;/code> 子句中嵌入 &lt;code>SELETE&lt;/code> 查询&lt;/p>
&lt;p>子查询可能会多次遍历表，一般情况下性能会低于联表查询&lt;/p>
&lt;p>一般通过联表查询来替换多个子查询以提高性能&lt;/p>
&lt;p>正确编写联表查询是高性能的前提，不正确的联表方式可能导致性能降低&lt;/p>&lt;/div>
&lt;h3 id="分组">分组
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">g&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;年级&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">avg&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">age&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;平均年龄&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">student&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">INNER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">JOIN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">grade&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">g&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">ON&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">grade_id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">g&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">GROUP&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">BY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">grade_id&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">HAVING&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">平均年龄&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;gt;=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 语句结构
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">${聚合函数}&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${表名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">GROUP&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">BY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">${字段名}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">HAVING&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">${筛选聚合条件}&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>根据指定的字段名的不同的值进行分组，每组记录根据聚合函数计算结果。&lt;/p>
&lt;h3 id="排序">排序
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="k">g&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">student&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">INNER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">JOIN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">grade&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">g&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">ON&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">grade_id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">g&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">ORDER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">BY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DESC&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 语句结构
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">ORDER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">BY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="err">${表名&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="err">表别名}&lt;/span>&lt;span class="p">.]&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${字段名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="err">${&lt;/span>&lt;span class="k">ASC&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="k">DESC&lt;/span>&lt;span class="err">}&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>关键字&lt;/th>
&lt;th>排序方式&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>ACS&lt;/td>
&lt;td>顺序&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>DESC&lt;/td>
&lt;td>逆序&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="分页">分页
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="k">g&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">student&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">INNER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">JOIN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">grade&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">g&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">ON&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">grade_id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">g&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">ORDER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">BY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">DESC&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">LiMIT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 语句结构
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">LiMIT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">${起始位置}&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="err">${查询条数}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="notice tip" >
&lt;p class="notice-title">
&lt;span class="icon-notice baseline">
&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="300.5 134 300 300">
&lt;path d="M551.281 252.36c0-3.32-1.172-6.641-3.515-8.985l-17.774-17.578c-2.344-2.344-5.469-3.711-8.789-3.711-3.32 0-6.445 1.367-8.789 3.71l-79.687 79.493-44.141-44.14c-2.344-2.344-5.469-3.712-8.79-3.712-3.32 0-6.444 1.368-8.788 3.711l-17.774 17.579c-2.343 2.343-3.515 5.664-3.515 8.984 0 3.32 1.172 6.445 3.515 8.789l70.704 70.703c2.343 2.344 5.664 3.711 8.789 3.711 3.32 0 6.64-1.367 8.984-3.71l106.055-106.056c2.343-2.343 3.515-5.468 3.515-8.789ZM600.5 284c0 82.813-67.188 150-150 150-82.813 0-150-67.188-150-150 0-82.813 67.188-150 150-150 82.813 0 150 67.188 150 150Z"/>
&lt;/svg>
&lt;/span>提示&lt;/p>&lt;p>对于 &lt;code>LIMIT x,y&lt;/code>&lt;/p>
&lt;ul>
&lt;li>x 查询的位置，从第 x 条开始&lt;/li>
&lt;li>y 查询的条数，本次查询 y 条记录&lt;/li>
&lt;/ul>&lt;/div>
&lt;h3 id="短语顺序">短语顺序
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="k">DISTINCT&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="err">${表名&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="err">表别名}&lt;/span>&lt;span class="p">.]&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${字段名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[[&lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">${字段别名}&lt;/span>&lt;span class="p">][,...]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${表名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[[&lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">${表别名}&lt;/span>&lt;span class="p">][,...]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="err">${联表方式}&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">JOIN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${表名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[[&lt;/span>&lt;span class="k">AS&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">${表别名}&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ON&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="err">${表名&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="err">表别名}&lt;/span>&lt;span class="p">.]&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${字段名}&lt;/span>&lt;span class="o">`=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="err">${表名&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="err">表别名}&lt;/span>&lt;span class="p">.]&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${字段名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">${条件语句}&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="k">GROUP&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">BY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="err">${表名&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="err">表别名}&lt;/span>&lt;span class="p">.]&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${字段名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="k">HAVING&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">${筛选聚合条件}&lt;/span>&lt;span class="p">]]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="k">ORDER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">BY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="err">${表名&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="err">表别名}&lt;/span>&lt;span class="p">.]&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="err">${字段名}&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="k">ASC&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">SESC&lt;/span>&lt;span class="p">]]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="k">LiMIT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">${起始记录数}&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="err">${读取记录数}&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="k">UNION&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">${查询}&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="dcl---data-control-language">DCL - Data Control Language
&lt;/h2>&lt;h3 id="用户操作">用户操作
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">USER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;neko&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">IDENTIFIED&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">BY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;123456&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">SET&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">PASSWORD&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FOR&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;neko&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">PASSWORD&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;123456&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">RENAME&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">USER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;neko&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TO&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;neko1&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">DROP&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">USER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;neko&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 语句结构
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">CREATE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">USER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;${用户名}&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">IDENTIFIED&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">BY&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;${密码}&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">SET&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">PASSWORD&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="k">FOR&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;${用户名}&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">PASSWORD&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;${密码}&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">RENAME&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">USER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;${旧用户名}&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TO&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;${新用户名}&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">DROP&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">USER&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;${用户名}&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="权限管理">权限管理
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">GRANT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ALL&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">PRIVILEGES&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ON&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TO&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;neko&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">-- 授予权限
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">SHOW&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">GRANTS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FOR&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;neko&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">-- 查看权限
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">REVOKE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ALL&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">PRIVILEGES&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TO&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;neko&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">-- 撤销权限
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 语句结构
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">GRANT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">${权限列表}&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ON&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">${数据库名}&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="err">${表名}&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TO&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;${用户名}&amp;#39;&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="s1">&amp;#39;${主机}&amp;#39;&lt;/span>&lt;span class="p">];&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">SHOW&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">GRANTS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FOR&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">${用户名}&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="s1">&amp;#39;${主机}&amp;#39;&lt;/span>&lt;span class="p">];&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">REVOKE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">${权限列表}&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">ON&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">${数据库名}&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="err">${表名}&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;${用户名}&amp;#39;&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="s1">&amp;#39;${主机}&amp;#39;&lt;/span>&lt;span class="p">];&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="知识点">知识点
&lt;/h2>&lt;h3 id="表类型">表类型
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>表类型&lt;/th>
&lt;th>MyISAM&lt;/th>
&lt;th>&lt;strong>InnoDB&lt;/strong>&lt;/th>
&lt;th>Memory&lt;/th>
&lt;th>CSV&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>事务支持&lt;/td>
&lt;td>不支持&lt;/td>
&lt;td>支持&lt;/td>
&lt;td>不支持&lt;/td>
&lt;td>不支持&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>行锁&lt;/td>
&lt;td>不支持&lt;/td>
&lt;td>支持&lt;/td>
&lt;td>不支持&lt;/td>
&lt;td>不支持&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>外键索引&lt;/td>
&lt;td>不支持&lt;/td>
&lt;td>支持&lt;/td>
&lt;td>不支持&lt;/td>
&lt;td>不支持&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>全文索引&lt;/td>
&lt;td>支持&lt;/td>
&lt;td>不支持&lt;/td>
&lt;td>不支持&lt;/td>
&lt;td>不支持&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>占用空间&lt;/td>
&lt;td>100%&lt;/td>
&lt;td>200%&lt;/td>
&lt;td>内存读写&lt;/td>
&lt;td>用于数据交互&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="字符集">字符集
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>字符集&lt;/th>
&lt;th>长度&lt;/th>
&lt;th>说明&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>latin1&lt;/td>
&lt;td>1&lt;/td>
&lt;td>老版本 MySQL 默认字符集&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>GBK&lt;/td>
&lt;td>2&lt;/td>
&lt;td>支持中文，但是不是国际通用字符集&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>utf8mb3&lt;/td>
&lt;td>3&lt;/td>
&lt;td>支持中英文混合场景，是国际通用字符集&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>utf8mb4&lt;/strong>&lt;/td>
&lt;td>4&lt;/td>
&lt;td>默认字符集，完全兼容 utf8mb3，可存储 emoji 等特殊字符&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="排序规则">排序规则
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>规则&lt;/th>
&lt;th>解释&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;strong>utf8mb4_0900_ai_ci&lt;/strong>&lt;/td>
&lt;td>Unicode 9.0 规范，不区分音调，不区分大小写，相同字母的大小和音调写在排序时视为相同。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>utf8mb4_0900_as_cs&lt;/td>
&lt;td>Unicode 9.0 规范，区分音调，区分大小写，相同字母的大小写和音调在排序时视为不同。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>utf8mb4_0900_bin&lt;/td>
&lt;td>Unicode 9.0 规范，通过字符串的二进制进行比较&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>utf8mb4_unicode_ci&lt;/td>
&lt;td>根据 unicode 编码规则实行排序，准确性高&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="字段">字段
&lt;/h3>&lt;p>在生产环境中，每个表通常会有默认的几个字段：&lt;/p>
&lt;ul>
&lt;li>&lt;code>id&lt;/code> // 主键&lt;/li>
&lt;li>&lt;code>version&lt;/code> // 版本，用于乐观锁&lt;/li>
&lt;li>&lt;code>is_delete&lt;/code> // 伪删除&lt;/li>
&lt;li>&lt;code>gmt_create&lt;/code> // 记录的创建时间&lt;/li>
&lt;li>&lt;code>gmt_update&lt;/code> // 记录的更新时间&lt;/li>
&lt;/ul>
&lt;h3 id="字段类型">字段类型
&lt;/h3>&lt;h4 id="数值">数值
&lt;/h4>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>类型&lt;/th>
&lt;th>解释&lt;/th>
&lt;th>长度&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>tinyint&lt;/td>
&lt;td>微型整数&lt;/td>
&lt;td>1 Byte&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>smallint&lt;/td>
&lt;td>小型整数&lt;/td>
&lt;td>2 Byte&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>mediumint&lt;/td>
&lt;td>中小型整数&lt;/td>
&lt;td>3 Byte&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>int&lt;/strong>&lt;/td>
&lt;td>整数&lt;/td>
&lt;td>4 Byte&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>big&lt;/td>
&lt;td>大型整数&lt;/td>
&lt;td>8 Byte&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>float&lt;/td>
&lt;td>单精度浮点数&lt;/td>
&lt;td>4 Byte&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>double&lt;/td>
&lt;td>双精度浮点数&lt;/td>
&lt;td>8 Byte&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>decimal&lt;/td>
&lt;td>字符串形式浮点数&lt;/td>
&lt;td>-&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="notice tip" >
&lt;p class="notice-title">
&lt;span class="icon-notice baseline">
&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="300.5 134 300 300">
&lt;path d="M551.281 252.36c0-3.32-1.172-6.641-3.515-8.985l-17.774-17.578c-2.344-2.344-5.469-3.711-8.789-3.711-3.32 0-6.445 1.367-8.789 3.71l-79.687 79.493-44.141-44.14c-2.344-2.344-5.469-3.712-8.79-3.712-3.32 0-6.444 1.368-8.788 3.711l-17.774 17.579c-2.343 2.343-3.515 5.664-3.515 8.984 0 3.32 1.172 6.445 3.515 8.789l70.704 70.703c2.343 2.344 5.664 3.711 8.789 3.711 3.32 0 6.64-1.367 8.984-3.71l106.055-106.056c2.343-2.343 3.515-5.468 3.515-8.789ZM600.5 284c0 82.813-67.188 150-150 150-82.813 0-150-67.188-150-150 0-82.813 67.188-150 150-150 82.813 0 150 67.188 150 150Z"/>
&lt;/svg>
&lt;/span>提示&lt;/p>&lt;p>int 类型为常用类型&lt;/p>
&lt;p>decimal 类型使用字符串形式来存储数值，使用的时候再转化为数值，避免精度问题，一般用于金融领域&lt;/p>
&lt;p>数值类型诸如 &lt;code>int(8)&lt;/code> 的 &lt;code>Type(M)&lt;/code> 形式，&lt;code>M&lt;/code> 指的是数据的显示宽度，与零填充有关，与数据的值大小无关&lt;/p>&lt;/div>
&lt;h4 id="字符串">字符串
&lt;/h4>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>类型&lt;/th>
&lt;th>解释&lt;/th>
&lt;th>长度&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>char&lt;/td>
&lt;td>固定长度字符串&lt;/td>
&lt;td>2^8-1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>varchar&lt;/strong>&lt;/td>
&lt;td>可变长字符串&lt;/td>
&lt;td>0 ~ 2^16-1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>tinytext&lt;/td>
&lt;td>微型文本&lt;/td>
&lt;td>0 ~ 2^8-1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>text&lt;/td>
&lt;td>文本&lt;/td>
&lt;td>0 ~ 2^16-1&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="notice tip" >
&lt;p class="notice-title">
&lt;span class="icon-notice baseline">
&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="300.5 134 300 300">
&lt;path d="M551.281 252.36c0-3.32-1.172-6.641-3.515-8.985l-17.774-17.578c-2.344-2.344-5.469-3.711-8.789-3.711-3.32 0-6.445 1.367-8.789 3.71l-79.687 79.493-44.141-44.14c-2.344-2.344-5.469-3.712-8.79-3.712-3.32 0-6.444 1.368-8.788 3.711l-17.774 17.579c-2.343 2.343-3.515 5.664-3.515 8.984 0 3.32 1.172 6.445 3.515 8.789l70.704 70.703c2.343 2.344 5.664 3.711 8.789 3.711 3.32 0 6.64-1.367 8.984-3.71l106.055-106.056c2.343-2.343 3.515-5.468 3.515-8.789ZM600.5 284c0 82.813-67.188 150-150 150-82.813 0-150-67.188-150-150 0-82.813 67.188-150 150-150 82.813 0 150 67.188 150 150Z"/>
&lt;/svg>
&lt;/span>提示&lt;/p>&lt;p>char / varchar 类型一般用作存储经常读写的变量性质的值&lt;/p>
&lt;p>text / tinytext 类型一般用于关联性不强的整体文本，如文章等&lt;/p>
&lt;p>能用 varchar 就不用其他的类型&lt;/p>
&lt;p>字符串类型的诸如 &lt;code>varchar(20)&lt;/code> 的 &lt;code>Type(M)&lt;/code> 形式，&lt;code>M&lt;/code> 指的是字符床的最大长度&lt;/p>&lt;/div>
&lt;h4 id="时间和日期">时间和日期
&lt;/h4>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>类型&lt;/th>
&lt;th>解释&lt;/th>
&lt;th>形式&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>date&lt;/td>
&lt;td>日期&lt;/td>
&lt;td>yyyy-mm-dd&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>time&lt;/td>
&lt;td>时间&lt;/td>
&lt;td>hh:mm:ss&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>datetime&lt;/strong>&lt;/td>
&lt;td>日期时间&lt;/td>
&lt;td>yyyy-mm-dd hh:mm:ss&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>timestamp&lt;/strong>&lt;/td>
&lt;td>时间戳&lt;/td>
&lt;td>1666760950&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>year&lt;/td>
&lt;td>年份&lt;/td>
&lt;td>yyyy&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="notice tip" >
&lt;p class="notice-title">
&lt;span class="icon-notice baseline">
&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="300.5 134 300 300">
&lt;path d="M551.281 252.36c0-3.32-1.172-6.641-3.515-8.985l-17.774-17.578c-2.344-2.344-5.469-3.711-8.789-3.711-3.32 0-6.445 1.367-8.789 3.71l-79.687 79.493-44.141-44.14c-2.344-2.344-5.469-3.712-8.79-3.712-3.32 0-6.444 1.368-8.788 3.711l-17.774 17.579c-2.343 2.343-3.515 5.664-3.515 8.984 0 3.32 1.172 6.445 3.515 8.789l70.704 70.703c2.343 2.344 5.664 3.711 8.789 3.711 3.32 0 6.64-1.367 8.984-3.71l106.055-106.056c2.343-2.343 3.515-5.468 3.515-8.789ZM600.5 284c0 82.813-67.188 150-150 150-82.813 0-150-67.188-150-150 0-82.813 67.188-150 150-150 82.813 0 150 67.188 150 150Z"/>
&lt;/svg>
&lt;/span>提示&lt;/p>&lt;p>datetime 类型为常用类型&lt;/p>
&lt;p>timestamp 类型为 1970-01-01 00:00:00 到现在时间点的&lt;strong>秒数&lt;/strong>&lt;/p>&lt;/div>
&lt;h4 id="null">NULL
&lt;/h4>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>类型&lt;/th>
&lt;th>解释&lt;/th>
&lt;th>形式&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>NULL&lt;/td>
&lt;td>无值，未知&lt;/td>
&lt;td>(NULL)&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="notice info" >
&lt;p class="notice-title">
&lt;span class="icon-notice baseline">
&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="92 59.5 300 300">
&lt;path d="M292 303.25V272c0-3.516-2.734-6.25-6.25-6.25H267v-100c0-3.516-2.734-6.25-6.25-6.25h-62.5c-3.516 0-6.25 2.734-6.25 6.25V197c0 3.516 2.734 6.25 6.25 6.25H217v62.5h-18.75c-3.516 0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h87.5c3.516 0 6.25-2.734 6.25-6.25Zm-25-175V97c0-3.516-2.734-6.25-6.25-6.25h-37.5c-3.516 0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h37.5c3.516 0 6.25-2.734 6.25-6.25Zm125 81.25c0 82.813-67.188 150-150 150-82.813 0-150-67.188-150-150 0-82.813 67.188-150 150-150 82.813 0 150 67.188 150 150Z"/>
&lt;/svg>
&lt;/span>信息&lt;/p>&lt;p>不要使用 &lt;code>NULL&lt;/code> 进行计算，计算结果一律为 &lt;code>NULL&lt;/code> ，无意义&lt;/p>&lt;/div>
&lt;h3 id="字段属性">字段属性
&lt;/h3>&lt;p>UNSIGNED&lt;/p>
&lt;ul>
&lt;li>声明该字段不能为负数&lt;/li>
&lt;li>只有整数类型能用&lt;/li>
&lt;/ul>
&lt;p>ZEROFILL&lt;/p>
&lt;ul>
&lt;li>声明该字段位数不足时用 &lt;code>0&lt;/code> 填充&lt;/li>
&lt;/ul>
&lt;p>AUTO_INCREMENT&lt;/p>
&lt;ul>
&lt;li>自动在上一条记录的基础上增加，默认为 &lt;code>1&lt;/code>&lt;/li>
&lt;li>只有整数类型能用&lt;/li>
&lt;li>通常用于设置唯一的主键&lt;/li>
&lt;/ul>
&lt;p>NOT NULL&lt;/p>
&lt;ul>
&lt;li>声明该字段不能为 &lt;code>NULL&lt;/code>&lt;/li>
&lt;li>该字段若不赋值则报错&lt;/li>
&lt;/ul>
&lt;p>NULL&lt;/p>
&lt;ul>
&lt;li>声明该字段允许 &lt;code>NULL&lt;/code>&lt;/li>
&lt;li>该字段若不赋值且未设置默认值时则记录为 &lt;code>NULL&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>DEFAULT&lt;/p>
&lt;ul>
&lt;li>声明该字段的默认值&lt;/li>
&lt;li>该字段若不赋值则记录为 &lt;code>指定的值&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>PRIMARY KEY&lt;/p>
&lt;ul>
&lt;li>声明该字段为主键&lt;/li>
&lt;li>一般一张表只有一个&lt;/li>
&lt;li>一般写在字段声明的最后 &lt;code>PRIMARY KEY(`字段`)&lt;/code>&lt;/li>
&lt;/ul>
&lt;h3 id="运算操作">运算操作
&lt;/h3>&lt;h4 id="算数运算">算数运算
&lt;/h4>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>算数运算符&lt;/th>
&lt;th>含义&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>+&lt;/code>&lt;/td>
&lt;td>加&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>-&lt;/code>&lt;/td>
&lt;td>减&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>*&lt;/code>&lt;/td>
&lt;td>乘&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>/&lt;/code> &lt;code>DIV&lt;/code>&lt;/td>
&lt;td>求商&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>%&lt;/code> &lt;code>MOD&lt;/code>&lt;/td>
&lt;td>求余&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="比较运算">比较运算
&lt;/h4>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>比较运算符&lt;/th>
&lt;th>含义&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>=&lt;/code>&lt;/td>
&lt;td>等于&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>&amp;lt;&amp;gt;&lt;/code> &lt;code>!=&lt;/code>&lt;/td>
&lt;td>不等于&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>&amp;gt;&lt;/code>&lt;/td>
&lt;td>大于&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>&amp;gt;=&lt;/code>&lt;/td>
&lt;td>大于等于&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>&amp;lt;&lt;/code>&lt;/td>
&lt;td>小于&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>&amp;lt;=&lt;/code>&lt;/td>
&lt;td>小于等于&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>比较运算符&lt;/th>
&lt;th>含义&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>IS NULL&lt;/code>&lt;/td>
&lt;td>为 NULL&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>IS NOT NULL&lt;/code>&lt;/td>
&lt;td>不为 NULL&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>BETWEEN&lt;/code> x &lt;code>AND&lt;/code> y&lt;/td>
&lt;td>在 [x, y] 范围中&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>LIKE&lt;/code>&lt;/td>
&lt;td>模糊匹配&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>IN&lt;/code>&lt;/td>
&lt;td>在集合中&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="逻辑运算">逻辑运算
&lt;/h4>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>逻辑运算符&lt;/th>
&lt;th>含义&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>AND&lt;/code> &lt;code>&amp;amp;&amp;amp;&lt;/code>&lt;/td>
&lt;td>与运算&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>OR&lt;/code> &lt;code>⏐⏐&lt;/code>&lt;/td>
&lt;td>或运算&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>NOT&lt;/code> &lt;code>!&lt;/code>&lt;/td>
&lt;td>非运算&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>XOR&lt;/code>&lt;/td>
&lt;td>异或运算&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="事务">事务
&lt;/h3>&lt;p>事务是指将一系列数据库操作结合成一个整体，要么同时成功，要么同时失败。&lt;/p>
&lt;h4 id="acid-原则">ACID 原则
&lt;/h4>&lt;ul>
&lt;li>Atomic - 原子性
事务中各项操作，要么全做要么全不做，任何一项操作的失败都会导致整个事务的失败&lt;/li>
&lt;li>Consistent - 一致性
事务结束后系统状态是一致的&lt;/li>
&lt;li>Isolated - 隔离性
并发执行的事务彼此无法看到对方的中间状态，各种操作彼此互不影响&lt;/li>
&lt;li>Durable - 持久性
事务完成后所做的改动都会被持久化，即使发生灾难性的失败&lt;/li>
&lt;/ul>
&lt;h4 id="隔离所导致的问题">隔离所导致的问题
&lt;/h4>&lt;p>由于事务在操作数据库时会向数据库加锁，不同的锁可对其他事务的读写有着不同的效果。
在数据库中提供了几种事务的隔离级别：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>隔离级别&lt;/th>
&lt;th>级别&lt;/th>
&lt;th>描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>read uncommitted - 读未提交&lt;/td>
&lt;td>低&lt;/td>
&lt;td>允许其他事务读取当前事务修改但未提交的数据&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>read committed - 读已提交&lt;/td>
&lt;td>中&lt;/td>
&lt;td>允许其他事务读取当前事务已经提交的数据，但数据库可能并未操作完成，会发生短时间内两次查询不一致的情况&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>repeatable read - 可重复读&lt;/td>
&lt;td>高&lt;/td>
&lt;td>确保同一事务的多个实例在并发读取数据时，会看到同样的数据行&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>serializable - 序列化&lt;/td>
&lt;td>最高&lt;/td>
&lt;td>强制事务排序，解决相互冲突，可能导致大量的超时现象的和锁竞争，效率低下&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>相应的，也会出现几种问题：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>隔离级别&lt;/th>
&lt;th>严重级别&lt;/th>
&lt;th>描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>回滚覆盖&lt;/td>
&lt;td>高&lt;/td>
&lt;td>事务失败回滚时，数据被其他事务修改，导致一致性被破坏&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>脏读&lt;/td>
&lt;td>高&lt;/td>
&lt;td>事务读取了其他事务被修改还未提交的数据，该事务可能失败，读取的数据不安全&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>不可重复读&lt;/td>
&lt;td>中&lt;/td>
&lt;td>事务读取了其他事务已经提交但数据库未处理完毕的数据，可能导致在该事务中，两次读取的值不同&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>提交覆盖&lt;/td>
&lt;td>低&lt;/td>
&lt;td>事务读取数据后，其他事务更改了该数据，当前事务在写入时再次更改该数据，导致其他事务的更改失效&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>幻读&lt;/td>
&lt;td>低&lt;/td>
&lt;td>事务读取后，其他事务向该表增加记录，可能导致该事务中后续读取增加记录&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>不同的隔离级别可能会导致不同的问题，事务隔离级别越高，并发问题就越小，但是并发处理能力越差；&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>隔离级别&lt;/th>
&lt;th>回滚覆盖&lt;/th>
&lt;th>脏读&lt;/th>
&lt;th>不可重复读&lt;/th>
&lt;th>提交覆盖&lt;/th>
&lt;th>幻读&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>read uncommitted - 读未提交&lt;/td>
&lt;td>不会发生&lt;/td>
&lt;td>可能发生&lt;/td>
&lt;td>可能发生&lt;/td>
&lt;td>可能发生&lt;/td>
&lt;td>可能发生&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>read committed - 读已提交&lt;/td>
&lt;td>不会发生&lt;/td>
&lt;td>不会发生&lt;/td>
&lt;td>可能发生&lt;/td>
&lt;td>可能发生&lt;/td>
&lt;td>可能发生&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>repeatable read - 可重复读&lt;/td>
&lt;td>不会发生&lt;/td>
&lt;td>不会发生&lt;/td>
&lt;td>不会发生&lt;/td>
&lt;td>不会发生&lt;/td>
&lt;td>可能发生&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>serializable - 序列化&lt;/td>
&lt;td>不会发生&lt;/td>
&lt;td>不会发生&lt;/td>
&lt;td>不会发生&lt;/td>
&lt;td>不会发生&lt;/td>
&lt;td>不会发生&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="事务的操作">事务的操作
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- mysql 默认开启事务并自动提交
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">SET&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">autocommit&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">-- 关闭自动提交
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">START&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TRANSACTION&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">-- 事务开始
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="err">执行语句&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">SAVEPOINT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">${检查点名}&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">-- 生成检查点
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="err">执行语句&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">ROLLBACK&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TO&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">SAVEPOINT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">${检查点名}&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">-- 回滚到检查点
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="err">执行语句&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">RELEASE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">SAVEPOINT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">${检查点名}&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">-- 释放检查点
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="err">执行语句&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">-- 事务只能以回滚或提交结束
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">COMMIT&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">-- 提交，完成事务
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">ROLLBACK&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">-- 回滚，撤销事务
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">SET&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">autocommit&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">-- 打开自动提交
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="索引">索引
&lt;/h3>&lt;blockquote>
&lt;p>索引(Index)是帮助 MySQL 高效获取数据的数据结构.
提取句子的主干索引(Index)是一种数据结构。&lt;/p>
&lt;/blockquote>
&lt;h4 id="分类">分类
&lt;/h4>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>索引分类&lt;/th>
&lt;th>描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>主键索引&lt;/td>
&lt;td>一张表只能有一个，字段中所有的记录不能相同&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>唯一索引&lt;/td>
&lt;td>一张表可以有多个，字段中所有的记录不能相同&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>常规索引&lt;/td>
&lt;td>一张表可以有多个，字段中所有的记录可以相同&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>全文索引&lt;/td>
&lt;td>一般用于字符串，遍历所有的文字&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="索引原则">索引原则
&lt;/h4>&lt;ul>
&lt;li>索引不是越多越好&lt;/li>
&lt;li>不要对经常变动的数据加索引&lt;/li>
&lt;li>小数据量（十万条以下）不用加索引&lt;/li>
&lt;li>索引一般家在经常查询的字段上&lt;/li>
&lt;/ul>
&lt;h3 id="数据库设计">数据库设计
&lt;/h3>&lt;p>当数据较多且关系较为复杂时，需要进行数据库的设计。&lt;/p>
&lt;ul>
&lt;li>糟糕的数据库设计
&lt;ul>
&lt;li>数据冗余&lt;/li>
&lt;li>有较多外键，数据插入和删除都会很麻烦&lt;/li>
&lt;li>程序性能差&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>良好的数据库设计
&lt;ul>
&lt;li>节省空间&lt;/li>
&lt;li>能保证数据库完整性&lt;/li>
&lt;li>方便开发系统&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>软件开发中，数据库设计流程：&lt;/p>
&lt;ol>
&lt;li>分析需求
&lt;ul>
&lt;li>分析业务和数据库处理的需求&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>概要设计
&lt;ul>
&lt;li>设计 E-R 关系图&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h4 id="三大范式">三大范式
&lt;/h4>&lt;p>为何需要数据规范化？&lt;/p>
&lt;ul>
&lt;li>信息重复&lt;/li>
&lt;li>更新异常&lt;/li>
&lt;li>插入异常&lt;/li>
&lt;li>删除异常&lt;/li>
&lt;/ul>
&lt;h5 id="第一范式---1nf">第一范式 - 1NF
&lt;/h5>&lt;ul>
&lt;li>要求：每一个字段均为&lt;strong>不可再分&lt;/strong>的原子数据项。&lt;/li>
&lt;/ul>
&lt;h5 id="第二范式---2nf">第二范式 - 2NF
&lt;/h5>&lt;ul>
&lt;li>前提：满足第一范式&lt;/li>
&lt;li>要求：一张表只描述一件事，每一个字段均与主键&lt;strong>相关&lt;/strong>，而不是与主键的&lt;strong>某一部分&lt;/strong>相关&lt;/li>
&lt;/ul>
&lt;h5 id="第三范式---3nf">第三范式 - 3NF
&lt;/h5>&lt;ul>
&lt;li>前提：满足第二范式&lt;/li>
&lt;li>要求：消除传递依赖，每一个字段均与主键&lt;strong>直接相关&lt;/strong>，而不能&lt;strong>间接&lt;/strong>相关。&lt;/li>
&lt;/ul>
&lt;div class="notice info" >
&lt;p class="notice-title">
&lt;span class="icon-notice baseline">
&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="92 59.5 300 300">
&lt;path d="M292 303.25V272c0-3.516-2.734-6.25-6.25-6.25H267v-100c0-3.516-2.734-6.25-6.25-6.25h-62.5c-3.516 0-6.25 2.734-6.25 6.25V197c0 3.516 2.734 6.25 6.25 6.25H217v62.5h-18.75c-3.516 0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h87.5c3.516 0 6.25-2.734 6.25-6.25Zm-25-175V97c0-3.516-2.734-6.25-6.25-6.25h-37.5c-3.516 0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h37.5c3.516 0 6.25-2.734 6.25-6.25Zm125 81.25c0 82.813-67.188 150-150 150-82.813 0-150-67.188-150-150 0-82.813 67.188-150 150-150 82.813 0 150 67.188 150 150Z"/>
&lt;/svg>
&lt;/span>信息&lt;/p>&lt;p>规范与性能时不可兼得的&lt;/p>
&lt;p>在严格满足范式规范的情况下，一次查询可能关联很多表，导致性能问题&lt;/p>&lt;/div></description></item><item><title>PVE 中 Openwrt 安装</title><link>https://blog.nkit.eu.org/p/pve-openwrt/</link><pubDate>Thu, 30 Jun 2022 19:28:44 +0800</pubDate><guid>https://blog.nkit.eu.org/p/pve-openwrt/</guid><description>&lt;img src="https://blog.nkit.eu.org/p/pve-openwrt/cover.webp" alt="Featured image of post PVE 中 Openwrt 安装" />&lt;h2 id="简介">简介
&lt;/h2>&lt;p>PVE 运行 Openwrt 有两种方式：虚拟机或 LXC 方式。&lt;/p>
&lt;p>虚拟机方式能够更好地控制内外网的管理，能方便的直通硬盘和网卡，缺点是效率不如 LXC 方式，故适用于作为控制内外网的网关主路由模式；
LXC 方式资源浪费较小，配置较为麻烦，更适用于作为旁路由模式使用。&lt;/p>
&lt;h2 id="虚拟机安装">虚拟机安装
&lt;/h2>&lt;p>首先准备 openwrt 固件镜像，
可在 &lt;a class="link" href="https://supes.top/" target="_blank" rel="noopener"
>supes.top&lt;/a> 进行构建，或使用原版、恩山论坛第三方固件。
推荐使用 &lt;code>x86-64-generic-squashfs-combined-efi&lt;/code> 固件，拥有以下特性：&lt;/p>
&lt;ul>
&lt;li>x86_64&lt;/li>
&lt;li>squashfs&lt;/li>
&lt;li>efi&lt;/li>
&lt;/ul>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">变量名&lt;/th>
&lt;th style="text-align:left">示例&lt;/th>
&lt;th style="text-align:left">描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">&lt;code>${IMG_NAME}&lt;/code>&lt;/td>
&lt;td style="text-align:left">x86-64-generic-squashfs-combined-efi&lt;/td>
&lt;td style="text-align:left">openwrt 镜像文件名&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>${VM_ID}&lt;/code>&lt;/td>
&lt;td style="text-align:left">100&lt;/td>
&lt;td style="text-align:left">虚拟机 ID&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>${OPENWRT_IP}&lt;/code>&lt;/td>
&lt;td style="text-align:left">10.0.0.1&lt;/td>
&lt;td style="text-align:left">openwrt IP&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>${MARSK}&lt;/code>&lt;/td>
&lt;td style="text-align:left">255.0.0.0&lt;/td>
&lt;td style="text-align:left">子网掩码&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>解压得到 &lt;code>${IMG_NAME}.img&lt;/code> 镜像，将其通过 PVE WebUI 上传到 &lt;code>Local&lt;/code> - &lt;code>ISO 镜像&lt;/code> 中。&lt;/p>
&lt;p>创建如下虚拟机：&lt;/p>
&lt;ul>
&lt;li>不使用 ISO 介质&lt;/li>
&lt;li>q35 机型 UEFI&lt;/li>
&lt;li>不添加 EFI 磁盘&lt;/li>
&lt;li>硬盘按需添加&lt;/li>
&lt;li>host CPU&lt;/li>
&lt;li>512M - 1G 内存&lt;/li>
&lt;/ul>
&lt;p>使用命令将 img 镜像转化为硬盘：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">qm importdisk &lt;span class="si">${&lt;/span>&lt;span class="nv">VM_ID&lt;/span>&lt;span class="si">}&lt;/span> /var/lib/vz/template/iso/&lt;span class="si">${&lt;/span>&lt;span class="nv">IMG_NAME&lt;/span>&lt;span class="si">}&lt;/span>.img local-lvm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在 PVE WebUI 中编辑虚拟机的硬件配置，编辑 &lt;code>未引用的磁盘&lt;/code> 设置到 &lt;code>SCSI 总线&lt;/code> 上。
在 PVE WebUI 中添加好需要直通的网卡，这里设置直通两个网口，连接情况如下：&lt;/p>
&lt;ul>
&lt;li>虚拟网卡 eth0 -&amp;gt; 虚拟网桥 vmbr0 -&amp;gt; 交换机&lt;/li>
&lt;li>直通 eth1 -&amp;gt; AP&lt;/li>
&lt;li>直通 eth2 -&amp;gt; 外部网络&lt;/li>
&lt;/ul>
&lt;h2 id="配置">配置
&lt;/h2>&lt;p>通过固件给出的默认 ip 和密码，通过 WebUI 或 ssh 登录到 openwrt 中。
ip 未与本地网络对应的情况，可通过控制台或 ssh 编辑 &lt;code>/etc/config/network&lt;/code> 修改 ip 地址：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">config interface &amp;#39;lan&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> option device &amp;#39;br-lan&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> option proto &amp;#39;static&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> option ipaddr &amp;#39;${OPENWRT_IP}&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> option netmask &amp;#39;${MARSK}&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Debian 服务器搭建</title><link>https://blog.nkit.eu.org/p/debian-server/</link><pubDate>Sat, 14 May 2022 19:50:16 +0800</pubDate><guid>https://blog.nkit.eu.org/p/debian-server/</guid><description>&lt;img src="https://blog.nkit.eu.org/p/debian-server/cover.webp" alt="Featured image of post Debian 服务器搭建" />&lt;h2 id="配置-debian">配置 Debian
&lt;/h2>&lt;style type="text/css">
.notice {
--root-color: #444;
--root-background: #eff;
--title-color: #fff;
--title-background: #7bd;
--warning-title: #c33;
--warning-content: #fee;
--info-title: #fb7;
--info-content: #fec;
--note-title: #6be;
--note-content: #e7f2fa;
--tip-title: #5a5;
--tip-content: #efe
}
@media (prefers-color-scheme:dark) {
.notice {
--root-color: #ddd;
--root-background: #eff;
--title-color: #fff;
--title-background: #7bd;
--warning-title: #800;
--warning-content: #400;
--info-title: #a50;
--info-content: #420;
--note-title: #069;
--note-content: #023;
--tip-title: #363;
--tip-content: #121
}
}
body.dark .notice {
--root-color: #ddd;
--root-background: #eff;
--title-color: #fff;
--title-background: #7bd;
--warning-title: #800;
--warning-content: #400;
--info-title: #a50;
--info-content: #420;
--note-title: #069;
--note-content: #023;
--tip-title: #363;
--tip-content: #121
}
.notice {
padding: 18px;
line-height: 24px;
margin-bottom: 24px;
border-radius: 4px;
color: var(--root-color);
background: var(--root-background)
}
.notice p:last-child {
margin-bottom: 0
}
.notice-title {
margin: -18px -18px 12px;
padding: 4px 18px;
border-radius: 4px 4px 0 0;
font-weight: 700;
color: var(--title-color);
background: var(--title-background)
}
.notice.warning .notice-title {
background: var(--warning-title)
}
.notice.warning {
background: var(--warning-content)
}
.notice.info .notice-title {
background: var(--info-title)
}
.notice.info {
background: var(--info-content)
}
.notice.note .notice-title {
background: var(--note-title)
}
.notice.note {
background: var(--note-content)
}
.notice.tip .notice-title {
background: var(--tip-title)
}
.notice.tip {
background: var(--tip-content)
}
.icon-notice {
display: inline-flex;
align-self: center;
margin-right: 8px
}
.icon-notice img,
.icon-notice svg {
height: 1em;
width: 1em;
fill: currentColor
}
.icon-notice img,
.icon-notice.baseline svg {
top: .125em;
position: relative
}
&lt;/style>&lt;div class="notice note" >
&lt;p class="notice-title">
&lt;span class="icon-notice baseline">
&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 128 300 300">
&lt;path d="M150 128c82.813 0 150 67.188 150 150 0 82.813-67.188 150-150 150C67.187 428 0 360.812 0 278c0-82.813 67.188-150 150-150Zm25 243.555v-37.11c0-3.515-2.734-6.445-6.055-6.445h-37.5c-3.515 0-6.445 2.93-6.445 6.445v37.11c0 3.515 2.93 6.445 6.445 6.445h37.5c3.32 0 6.055-2.93 6.055-6.445Zm-.39-67.188 3.515-121.289c0-1.367-.586-2.734-1.953-3.516-1.172-.976-2.93-1.562-4.688-1.562h-42.968c-1.758 0-3.516.586-4.688 1.563-1.367.78-1.953 2.148-1.953 3.515l3.32 121.29c0 2.734 2.93 4.882 6.64 4.882h36.134c3.515 0 6.445-2.148 6.64-4.883Z"/>
&lt;/svg>
&lt;/span>注释&lt;/p>&lt;p>Todo:&lt;/p>
&lt;ul>
&lt;li>无人值守安装&lt;/li>
&lt;/ul>&lt;/div>
&lt;p>使用 netinst ISO 镜像最小化安装 Debian，仅安装 &lt;code>ssh server&lt;/code> 和 &lt;code>standard system utilities&lt;/code>。
配置通过以下命令进行。&lt;/p>
&lt;h3 id="使用-root-修改普通用户-sudo-权限">使用 root 修改普通用户 sudo 权限
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">su -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apt update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apt install sudo -y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpasswd -a neko sudo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="notice info" >
&lt;p class="notice-title">
&lt;span class="icon-notice baseline">
&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="92 59.5 300 300">
&lt;path d="M292 303.25V272c0-3.516-2.734-6.25-6.25-6.25H267v-100c0-3.516-2.734-6.25-6.25-6.25h-62.5c-3.516 0-6.25 2.734-6.25 6.25V197c0 3.516 2.734 6.25 6.25 6.25H217v62.5h-18.75c-3.516 0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h87.5c3.516 0 6.25-2.734 6.25-6.25Zm-25-175V97c0-3.516-2.734-6.25-6.25-6.25h-37.5c-3.516 0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h37.5c3.516 0 6.25-2.734 6.25-6.25Zm125 81.25c0 82.813-67.188 150-150 150-82.813 0-150-67.188-150-150 0-82.813 67.188-150 150-150 82.813 0 150 67.188 150 150Z"/>
&lt;/svg>
&lt;/span>信息&lt;/p>&lt;p>完成后建议重启系统。&lt;/p>&lt;/div>
&lt;h3 id="安装基础软件">安装基础软件
&lt;/h3>&lt;p>安装 &lt;code>vim&lt;/code> &lt;code>git&lt;/code> &lt;code>zsh&lt;/code> &lt;code>curl&lt;/code> &lt;code>samba&lt;/code>，并安装 &lt;code>oh-my-zsh&lt;/code> 插件。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo apt install vim git zsh curl samba -y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sh -c &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> ~/.oh-my-zsh/custom/plugins
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git clone https://github.com/zsh-users/zsh-autosuggestions.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git clone https://github.com/zsh-users/zsh-syntax-highlighting.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> ~
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cp ~/.zshrc ~/.zshrc.bak
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sed -i &lt;span class="s1">&amp;#39;s/ZSH_THEME=\&amp;#34;robbyrussell\&amp;#34;/ZSH_THEME=\&amp;#34;ys\&amp;#34;/g&amp;#39;&lt;/span> ~/.zshrc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sed -i &lt;span class="s1">&amp;#39;s/plugins=(git)/plugins=(git z sudo extract zsh-autosuggestions zsh-syntax-highlighting)/g&amp;#39;&lt;/span> ~/.zshrc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sed -i &lt;span class="s1">&amp;#39;/source $ZSH\/oh-my-zsh.sh/a source ~\/.oh-my-zsh\/custom\/plugins\/zsh-syntax-highlighting\/zsh-syntax-highlighting.zsh&amp;#39;&lt;/span> ~/.zshrc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sed -i &lt;span class="s1">&amp;#39;/source $ZSH\/oh-my-zsh.sh/a source ~\/.oh-my-zsh\/custom\/plugins\/zsh-autosuggestions\/zsh-autosuggestions.zsh&amp;#39;&lt;/span> ~/.zshrc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">source&lt;/span> ~/.zshrc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="samba-共享">samba 共享
&lt;/h2>&lt;h3 id="创建-samba-用户">创建 samba 用户
&lt;/h3>&lt;div class="notice note" >
&lt;p class="notice-title">
&lt;span class="icon-notice baseline">
&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 128 300 300">
&lt;path d="M150 128c82.813 0 150 67.188 150 150 0 82.813-67.188 150-150 150C67.187 428 0 360.812 0 278c0-82.813 67.188-150 150-150Zm25 243.555v-37.11c0-3.515-2.734-6.445-6.055-6.445h-37.5c-3.515 0-6.445 2.93-6.445 6.445v37.11c0 3.515 2.93 6.445 6.445 6.445h37.5c3.32 0 6.055-2.93 6.055-6.445Zm-.39-67.188 3.515-121.289c0-1.367-.586-2.734-1.953-3.516-1.172-.976-2.93-1.562-4.688-1.562h-42.968c-1.758 0-3.516.586-4.688 1.563-1.367.78-1.953 2.148-1.953 3.515l3.32 121.29c0 2.734 2.93 4.882 6.64 4.882h36.134c3.515 0 6.445-2.148 6.64-4.883Z"/>
&lt;/svg>
&lt;/span>注释&lt;/p>&lt;p>首先创建 Linux 用户，然后需要转为 Samba 用户才能使用。&lt;/p>&lt;/div>
&lt;p>创建 Linux 用户：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 添加 Linux 用户&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">useradd neko
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 设置 Linux 用户的密码&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">passwd neko
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>将 Linux 用户设置为 samba 用户，并设置 samba 密码&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo smbpasswd -a nako
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>删除用户可使用：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 删除 Linux 用户&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># -r 表示删除主目录&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">userdel -r &lt;span class="si">${&lt;/span>&lt;span class="nv">USER&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 删除 samba 用户&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">smbpasswd -x &lt;span class="si">${&lt;/span>&lt;span class="nv">USER&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="配置-samba-共享">配置 samba 共享
&lt;/h3>&lt;p>Samba 的配置文件为 &lt;code>/etc/samba/smb.conf&lt;/code>，修改此文件增加共享。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">[hdd]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> path = /mnt/hdd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> browseable = yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> available = yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> writable = yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> admin users = neko
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> valid users = neko
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> create mask = 0775
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> directory mask = 0775
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ssd]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> path = /mnt/ssd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> browseable = yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> available = yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> writable = yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> admin users = neko
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> valid users = neko
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> create mask = 0775
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> directory mask = 0775
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>修改文件后应测试配置文件是否正确：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">testparm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>可在 windows 客户机中通过 &lt;code>Internet选项&lt;/code> 中的 &lt;code>安全&lt;/code> - &lt;code>本地 intranet&lt;/code> 添加本地域名，可绕过安全警告。&lt;/p>
&lt;h2 id="docker">Docker
&lt;/h2>&lt;h3 id="安装-docker">安装 Docker
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo apt update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt install ca-certificates curl gnupg lsb-release -y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo mkdir -p /etc/apt/keyrings
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -fsSL https://download.docker.com/linux/debian/gpg &lt;span class="p">|&lt;/span> sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;deb [arch=&lt;/span>&lt;span class="k">$(&lt;/span>dpkg --print-architecture&lt;span class="k">)&lt;/span>&lt;span class="s2"> signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/debian &lt;/span>&lt;span class="k">$(&lt;/span>lsb_release -cs&lt;span class="k">)&lt;/span>&lt;span class="s2"> stable&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> sudo tee /etc/apt/sources.list.d/docker.list &amp;gt; /dev/null
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt install docker-ce docker-ce-cli containerd.io docker-compose-plugin -y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s1">&amp;#39;{&amp;#34;registry-mirrors&amp;#34;: [&amp;#34;http://hub-mirror.c.163.com&amp;#34;]}&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> sudo tee -a /etc/docker/daemon.json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo chown neko:docker /etc/docker/daemon.json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo gpasswd -a neko docker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">newgrp docker
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>管理 Docker 使用 portainer_agent 镜像，通过 Openwrt 中的 portainer-CE 进行连接。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;3&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">services&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 容器管理&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">agent&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">portainer_agent&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">portainer/agent&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">unless-stopped&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">9001&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">9001&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">/var/run/docker.sock:/var/run/docker.sock&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">/var/lib/docker/volumes:/var/lib/docker/volumes&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="docker-容器">Docker 容器
&lt;/h3>&lt;p>详见： &lt;a class="link" href="../docker-server" >服务器 Docker 镜像&lt;/a>&lt;/p></description></item><item><title>『紅い瞳に映るセカイ』发售漫画</title><link>https://blog.nkit.eu.org/p/akaihitomi-comic/</link><pubDate>Fri, 15 Apr 2022 17:01:43 +0800</pubDate><guid>https://blog.nkit.eu.org/p/akaihitomi-comic/</guid><description>&lt;img src="https://blog.nkit.eu.org/p/akaihitomi-comic/cover.webp" alt="Featured image of post 『紅い瞳に映るセカイ』发售漫画" />&lt;p>&lt;img src="https://blog.nkit.eu.org/p/akaihitomi-comic/web_comic_01_cn.webp"
width="350"
height="1000"
srcset="https://blog.nkit.eu.org/p/akaihitomi-comic/web_comic_01_cn_hu842750a49adee331929192724953d8f8_84808_480x0_resize_q75_h2_box_2.webp 480w, https://blog.nkit.eu.org/p/akaihitomi-comic/web_comic_01_cn_hu842750a49adee331929192724953d8f8_84808_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="page 01"
class="gallery-image"
data-flex-grow="35"
data-flex-basis="84px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.nkit.eu.org/p/akaihitomi-comic/web_comic_02_cn.webp"
width="350"
height="1000"
srcset="https://blog.nkit.eu.org/p/akaihitomi-comic/web_comic_02_cn_hu5404cdb03338d5c8b969ab460947f1b8_86398_480x0_resize_q75_h2_box_2.webp 480w, https://blog.nkit.eu.org/p/akaihitomi-comic/web_comic_02_cn_hu5404cdb03338d5c8b969ab460947f1b8_86398_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="page 02"
class="gallery-image"
data-flex-grow="35"
data-flex-basis="84px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.nkit.eu.org/p/akaihitomi-comic/web_comic_03_cn.webp"
width="350"
height="1000"
srcset="https://blog.nkit.eu.org/p/akaihitomi-comic/web_comic_03_cn_hud6ca0c3b77ec6f3c11fab37b5cba3613_79616_480x0_resize_q75_h2_box_2.webp 480w, https://blog.nkit.eu.org/p/akaihitomi-comic/web_comic_03_cn_hud6ca0c3b77ec6f3c11fab37b5cba3613_79616_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="page 03"
class="gallery-image"
data-flex-grow="35"
data-flex-basis="84px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.nkit.eu.org/p/akaihitomi-comic/web_comic_04_cn.webp"
width="350"
height="1000"
srcset="https://blog.nkit.eu.org/p/akaihitomi-comic/web_comic_04_cn_hu812dad563d7c9220d48ad2f809a133fc_73104_480x0_resize_q75_h2_box_2.webp 480w, https://blog.nkit.eu.org/p/akaihitomi-comic/web_comic_04_cn_hu812dad563d7c9220d48ad2f809a133fc_73104_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="page 04"
class="gallery-image"
data-flex-grow="35"
data-flex-basis="84px"
>&lt;/p></description></item><item><title>『いろとりどりのセカイ』玩后感</title><link>https://blog.nkit.eu.org/p/irosekai-review/</link><pubDate>Sat, 26 Mar 2022 17:20:41 +0800</pubDate><guid>https://blog.nkit.eu.org/p/irosekai-review/</guid><description>&lt;img src="https://blog.nkit.eu.org/p/irosekai-review/cover.webp" alt="Featured image of post 『いろとりどりのセカイ』玩后感" />&lt;h2 id="序">序
&lt;/h2>&lt;p>主人公鹿野上悠馬「かのうえ ゆうま」是魔法使——不管对方身负多么严重的伤痛，他都能将之治愈，
前提是牺牲自身存在的时间「回忆」。&lt;/p>
&lt;p>边远的港口小镇風津ヶ浜「かざつがはま」有一座不可思议的学生宿舍，名为嵐山「あらしやま」荘。
之所以说它不可思议，只因宿舍的地下室连接着缤纷的异世界。&lt;/p>
&lt;p>置身于这小小的不可思议之中，少年依旧安稳地度过如梦似幻的每一天…
就在这一成不变的岁月中，却有这么一天——绯红满月照亮世界的夜晚，一个少女从天而降。&lt;/p>
&lt;p>「魔法使先生，求求你，请你帮帮我吧」&lt;/p>
&lt;p>随之转动的，是那曾经一成不变的日子。清爽海风拂面而过，白色羽翼纷飞飘落……&lt;/p>
&lt;p>我们紧紧牵着彼此的手抬头仰望，向着天空立下誓言，我们定能再度相恋……&lt;/p>
&lt;p>寒假开始以后没多久就决定推这个游戏了，但是过年的时候外面各种放鞭炮，根本听不清语音，
而且母上在家也不太好意思直接在母上面前推游戏，就一直拖着拖着到现在才推完了。&lt;/p>
&lt;p>我是按 凛-&amp;gt;镜-&amp;gt;加奈-&amp;gt;司-&amp;gt;真红 的顺序来推的，各种线的感想就按顺序说了。&lt;/p>
&lt;h2 id="共通线">共通线
&lt;/h2>&lt;p>首先是共通线，共通线的长度简直跟 Rewrite 有得一拼，还有就是选项，
只是选选先叫谁去吃饭就可以影响到进入的线这样真的好吗。。&lt;/p>
&lt;p>刚开始还以为是对话不同不影响进线，不过我错了，所以选了四次就进线了啊！
不过还好我还是比较谨慎的，本以为小的选项也认真的选了，所以第一次进入的是意料之中的凛线。&lt;/p>
&lt;p>另外，「祟」和「二阶堂真红不会入眠」这两章要不要放在共通线里啊！！
弄得每次进线都要 c 过去一次，看得心痛痛的 TAT…还有第一次推到这的时候看呆了有没有，
男主说砍人就直接提刀就坎了，就算是在异世界，这样真的好吗。。&lt;/p>
&lt;h2 id="终有一天飞向水平线的彼方">「终有一天，飞向水平线的彼方」
&lt;/h2>&lt;p>如月 澪「きさらぎ みお」——悠马的青梅竹马，也是同班同学。
仅仅因为他们是青梅竹马的关系，同学也好，老师也罢，净是把怕麻烦的悠马推给她照顾。
尽管本人对此似乎稍有不满就是了。&lt;/p>
&lt;p>第一个推凛线是因为她是真红之后第一个出场的吧，而且最开始的性格塑造也挺好的，
心想既然真红线有剧情锁那就直接先推凛吧。&lt;/p>
&lt;p>最开始埋下伏笔的时候应该是凛拿着信从管理员室出来的时候吧，
一开始只是单纯地以为凛与异世界的人有什么联系，
随着故事的展开，凛害怕异世界以及不断说自己是「假的」的时候，
还是一直没搞明白到底凛之前误入异世界到底发生了什么，
也许是情商太低了吧，完全到白给凛占卜的时候也没猜到正确的设定…&lt;/p>
&lt;p>还有要吐槽的地方，「風津ヶ浜」的凛到了「水津ヶ浜」以后，「水津ヶ浜」的管理员帮着「風津ヶ浜」的凛不过去，
还封住了从「風津ヶ浜」到「水津ヶ浜」的入口…
感觉这是在凛线中非常不能忍的一点。。&lt;/p>
&lt;p>当凛说「水津ヶ浜」中没有悠马的时候只是单纯的以为是主角光环，但是到真红线才明白…这里竟然也是伏笔！&lt;/p>
&lt;p>最后结局，「風津ヶ浜」的凛和「水津ヶ浜」的凛一起谈心结果时钟被那个叫内啥啥的，
对，就那个坏掉的熊孩子破坏掉了。
两人被隔在两个世界，但是由于有「商人的小镇」上的戒指的关系，使两个人能够相见，可喜可贺可喜可贺——
才怪呢！能相见就真的是 Happy end 吗？
ふざけんな！这是逼人买 FD 的节奏吗？&lt;/p>
&lt;p>凛线个人感觉不错，就是刚进线时凛的反应有些摸不着头脑，节奏把握很好，
开放性结局让玩家自行想想最后钟修好没有，凛到底回去没有。&lt;/p>
&lt;h2 id="再见日后再见">「再见，日后再见」
&lt;/h2>&lt;p>敷岛 镜「しきしま きょう」——住在学生宿舍「嵐山荘」的宅女，妄想能力破表的电波系少女。
向来悠哉游哉，天然的同时却也难免刻薄。成天游戏不停、动画不断，惰性十足地过着远离凡世的生活。
由于甚少接触阳光，肌肤相当白嫩。昼夜颠倒的生活也让她总是一副睡眠不足的模样。
和悠马相识后，她开始更频繁地走出房间。
其实她也有着某种不可思议的「能力」……&lt;/p>
&lt;p>共通线前段决定的攻略顺序原本是是 凛-&amp;gt;加奈-&amp;gt;镜-&amp;gt;司-&amp;gt;真红 这样的，
不过到镜出场的时候被萌到了，然后镜的攻略优先度也提到了加奈前面。&lt;/p>
&lt;p>刚开始看到这个标题时就想到玉置浩二的一首歌「Friedns」，里面有一句歌词：「再见，还能再见」。
个人比较喜欢这首歌，但是一想到江南在微博上提起这首歌的时候是龙族三完结的时候，然后先到龙三的结局…
不好的预感丢都丢不掉啊。。&lt;/p>
&lt;p>首先镜线应该是从莲走失、蝴蝶之式，以及祟开始的吧，虽然镜的式摇摇晃晃，但还是找到了莲，
以及镜线开始以后，找到了司。&lt;/p>
&lt;p>镜线中提到了很多关于镜家中的事，以及几个伏笔：
镜的哥哥眼睛看不见，镜的哥哥在获得自由进出自宅的情况下找到了女朋友。&lt;/p>
&lt;p>不过还好，镜线的结局并没那么想让人寄刀片，
最后镜回到家中接受祖母的考试，最终通过考试，逃离了自宅。
另外镜的哥哥寄过来的信…果然你是个妹控啊！&lt;/p>
&lt;p>所以说这条线算什么！这是 NTR 吗？这是 NTR 吧！233333&lt;/p>
&lt;h2 id="想要留在你的身边">「想要留在你的身边」
&lt;/h2>&lt;p>観波 加奈「みなみ かな」——满月的晚上从天而降，浑身谜团的少女。
当时悠马的确帮助了她，但由于失去关于「约定」的记忆，结果莫名其妙地被她粘上了。
住在了学生宿舍，成为了女仆。家务万能，唯独料理完全不行。欠缺常识，也不知人情世故。&lt;/p>
&lt;p>推加奈线之前一直觉得加奈是游戏中除真红以外涉及到主线最深的一个人物。
玩了才知道，真的是这样&amp;hellip;&lt;/p>
&lt;p>关于加奈线的感想就是：长，十分的长，而且虽说是加奈线，但是加奈出场的时候意外的少，
让我觉得是不是真的进了加奈线。。&lt;/p>
&lt;p>刚进线时的似乎是在异世界的背景，以及加奈的那句「请让我自由吧」，
让我想起了共通线里悠马的梦，但是梦里出现的话语是「请让我们自由吧」，
虽然当时比较肯定都是加奈的话，但这微妙的偏差总觉得有些违和感，感觉说的不是一件事。
接下来就是「贡魂送行」，这期间完全都是白和莲的戏份吧喂，我真的进了加奈线？&lt;/p>
&lt;p>「贡魂送行」中逐渐揭露了白的身世，由于之前已经推过镜线，所以一下就联系起来了，
白遇见的莲也眼睛看不见，镜的哥哥眼睛也看不见，
白的回忆中莲也告诉她祖母很严格，而镜的祖母对兄妹两人也很严格。
镜的祖母为了与镜断绝联系阻断了异世界的出入口，而加奈线「白线」中管理员接受白的委托为了找到莲也时也说到达莲也的世界受到了阻碍。
由此可以判断白的心上人莲也，也就是镜的哥哥，白原本所在的世界就是镜的世界。&lt;/p>
&lt;p>「贡魂送行」中穿过了春夏秋冬四个世界，由于还没接触主线，本以为这个设定就是「五彩斑斓的世界」的意思了，
不过到了真红线才发现现在的下的结论简直太早了。。
在其中描述的连和白的母女之情超级好啊！弄得我超心疼连的啊！Favorite 社你给我站出来！&lt;/p>
&lt;p>「贡魂送行」之后就是真正的加奈线「步线」了，加奈无意识地被野生的「式」带到了异世界，
并寄生在了加奈的大脑中，加奈靠着前人留下来的书抵消着被式吃掉的记忆，以及救了喵「步」，
为之后「式」的孵化时步救了加奈。&lt;/p>
&lt;p>加奈线的长度简直长得可以，简直有两条线一样长。
不过途中的伏笔埋得很好，特别是白的那段剧情，觉得前半段完全是白的剧情啊……
不过由于节奏掌握的很好就不追究了。&lt;/p>
&lt;h2 id="想要传达的感谢">「想要传达的感谢」
&lt;/h2>&lt;p>东峰 つかさ「とうみね つかさ」——整天到处奔波，刚搬进宿舍的新人，主人公的学妹。
为了支付学费和生活费，她总是在附近的澡堂打工到很晚。直率又勤奋，可惜头脑简单，经常盲目行事。
一看到能提升财运的东西立马两眼发光，超级喜欢招财猫。哪怕平坦地面，她都会摔倒。
尽管如此，倒也不是一无是处，毕竟人家家务全数精通，烦杂小事也能干得无懈可击。&lt;/p>
&lt;p>司线完全是一条崭新的线，跟主线没有什么关系，正因如此，我对司线的兴趣也变得不怎么高，
比较普通的故事，就不说情节了。
不过司的个性塑造很好啊，因为司的活力和可爱了一些剧情的不足，
总体来说……还是评分不高（请轻喷 Orz）……不过结局是 HE 就是了。。&lt;/p>
&lt;h2 id="仅有一份的珍宝">「仅有一份的珍宝」
&lt;/h2>&lt;p>「恋爱啊，恋爱，我办不到的这件事，就由你来实现」&lt;/p>
&lt;p>二阶堂 真红「にかいどう しんく」——赋予悠马特别能力的「半透明的魔法使」。
表情不怎么外露，与稚嫩的外表相反，向来稳重沉着，经常可以看到她成熟老练的一面。
为了达成某个目的，如今凭依于悠马。
虽然已经将促成恋爱的目的告诉了宿主悠马，可是……&lt;/p>
&lt;p>推完其他角色以后剧情锁解开，标题画面成晚霞，选择 New Game 进行游戏，开始真红线。&lt;/p>
&lt;p>游戏一开始的画面就伴随着钟声出现在世界尽头的书店。
然后又是那个羽毛从天而降的梦，只不过没有了「请救救我们」的喊声。
从床上起来，发现对自己不知不觉向空气说着话，以及宿舍一个人都没有……&lt;/p>
&lt;p>不得不说，这种设定让玩家十分苦闷。推完所有人人后不明不白被丢在一个熟悉又陌生的环境里。
而且这条线的女主也消失不见，被告知要以找回名字的方式再来找回自己的记忆。&lt;/p>
&lt;p>——继续寻找自己的记忆，直到想起真红。&lt;/p>
&lt;p>——放弃自己的愿望，回到五年前重来。&lt;/p>
&lt;p>——失去今天的记忆，把事情推到明天。&lt;/p>
&lt;p>作为主角，自然要选第一个。（我会说只要进线了就没有选项了吗，何况色鸟鸟是没有 BE 的。）&lt;/p>
&lt;p>在找了一天「真红的日记」之后，自然来到了书最多的铃的房间里面。
而铃也坦白了，自己拿着的书就是「真红的日记」。&lt;/p>
&lt;p>接下来就是铃的故事时间。&lt;/p>
&lt;p>……&lt;/p>
&lt;p>也许是我的游戏玩得太少了，你们有见过一个游戏把一个白的男主洗黑然后再洗白的吗？
悠马「神」想理解什么事爱恋而违反「规定」带走了悠马「真」和他的恋人二阶堂蓝。
蓝劝悠马「神」自己去体验一下爱恋，而悠马「神」也在蓝整天姐姐姐姐的闲话下开始注意真红。
在送走蓝以后，通过铃的协助自己也到了「这边的世界」。&lt;/p>
&lt;p>但是由于门钟被悠马「神」和铃拿走，各种秽物也涌进了「世界尽头的书店」，
「书店」开始没有节制地带走人们，先是大人，再是小孩，
最后「这边的世界」只剩下真红、加奈、凛、步。
司和镜分别在悠马「神」经过一年的沉睡醒来的前一星期前和前一天被带走。&lt;/p>
&lt;p>悠马「神」在追随门钟的响声时被真红发现，并带去学校，由于没有住处，就住在了真红家，
在这段时间，悠马「神」打听到了很多关于悠马、关于这个国家以及真红自己家庭中的事情，
还有二阶堂蓝与悠马的事情。&lt;/p>
&lt;p>先是步、凛先继被带走，看着真红无助又悲伤的表情，
被消除记忆的悠马「神」理所当然怨恨着在「书店」中随意带走人的「神」。&lt;/p>
&lt;p>真红因太多人一次次从自己眼前被带走，精神近乎崩溃，
加奈请求悠马「神」和真红保护她时，真红受不了喜欢的孩子被带走的痛苦躲在了被子里，
被悠马「神」训斥了一顿（悠马你个二货啊！！还有加奈我真的有些讨厌你了啊！！），
接着悠马「神」带着加奈逃跑，但是最后在学校的屋顶上依然被羽毛「抓住」了。&lt;/p>
&lt;p>真红在最后的时候冲上屋顶，跟悠马「神」一起与加奈许下「约定」——「一定会救她们」&lt;/p>
&lt;p>接着，真红继续做研究，悠马与「魔女」——铃接触，得知自己才是「书店」中的「神」，
为了自己的愿望以及跟铃做的交易，取回了自己记忆的悠马「神」用手中的书——也是铃所说的「世界笔记」创建了一个「伪物世界」后被悠马「神」改名为「五彩斑斓的世界」，
为了完成「孩子们」的愿望，同时也为了自己的愿望——「与真红相恋」。&lt;/p>
&lt;p>由于一个时间轴不能同时存在两个世界，在运转「五彩斑斓的世界」的同时，真实的世界会被冻结，所有人陷入沉睡。&lt;/p>
&lt;p>——这也就是游戏开始的时间点。&lt;/p>
&lt;p>铃的故事到此结束。&lt;/p>
&lt;p>「够了，出来吧」铃向着悠马的旁边说道，「你在那里的吧，我们的对话，你都听见了吧？」
一瞬间，柔软的。左手的手心里，传来柔软的的触感，回过头，发现一直不断寻找的她，就站在那里。&lt;/p>
&lt;p>——「……太慢了哦」&lt;/p>
&lt;p>——「找得，太慢了」&lt;/p>
&lt;p>——「但是，放心了」&lt;/p>
&lt;p>——「这一年里，与谁都没有说过话呢，还没忘记说话的方法真是太好了」&lt;/p>
&lt;p>能重逢真是太好了。&lt;/p>
&lt;p>……&lt;/p>
&lt;p>十一小时 23 分钟，这是「五彩斑斓的世界」所剩下的时间，悠马必须在这段时间内做出选择——&lt;/p>
&lt;p>放弃自己的愿望，回到世界尽头的书店，挽救书店中的混乱。
还是与真红在一起，在这伪物的世界生活下去。&lt;/p>
&lt;p>答案显而易见，所以，「我最喜欢真红了」这句话绝对不能说出口。&lt;/p>
&lt;p>就算我们继续存在于此处，也无法啊让任何人得到幸福。
回到古书店唯一的方法——没能实现愿望的生命，将在编辑成书本之前，叩开那个地方的大门。&lt;/p>
&lt;p>我要回到世界尽头的书店，收拾自己造成的混乱，拯救那些孩子们……&lt;/p>
&lt;p>小镇开始复苏，但我的心里，铺陈这大块大块的空白。
从今以后，痛苦的时候，悲伤的时候，寂寞的时候，不再会有一个看不见的人陪伴在我身边……&lt;/p>
&lt;p>从五彩斑斓的世界回到古书店，收拾了秽物们之后，开始与手上的书本们交谈。翻到某本书时。&lt;/p>
&lt;p>——「呐，神啊」&lt;/p>
&lt;p>——「我认识你」&lt;/p>
&lt;p>二阶堂蓝&lt;/p>
&lt;p>——「神啊，我呢，是来救你的哦」&lt;/p>
&lt;p>所以，让姐姐欢笑吧。&lt;/p>
&lt;p>随着古书店管理权的转移，悠马「神」也坠向与蓝一起编写的世界……&lt;/p>
&lt;p>——「请活下去」&lt;/p>
&lt;p>——「去实现大家的愿望，去守护姐姐的笑脸，并且，如同你期望的那样去尝试「爱恋」。你有让这一切成真的责任」&lt;/p>
&lt;p>经过一年的沉睡，悠马与真红的世界再次开始转动……&lt;/p>
&lt;p>真红的世界中的人被强行链接到蓝编写的世界中，真红在经历大家怎么突然长大了，
铃怎么变小了而且还变成了管理员的女儿一系列莫名奇妙的事件后，
终于从管理元的信箱中发现了真红的国家发行的明信片——帮助国民实现愿望的明信片。&lt;/p>
&lt;p>「お姉ちゃんへ」&lt;/p>
&lt;p>「お姉ちゃんの願いーー」&lt;/p>
&lt;p>「私が全部叶えだよ」&lt;/p>
&lt;p>「遅くなってごめんね、お姉ちゃん」&lt;/p>
&lt;p>「今日、お姉ちゃんに会いに、お姉ちゃんの悠馬がそっち行くよーー」&lt;/p>
&lt;p>奔跑着，奔跑，终于……&lt;/p>
&lt;p>我的愿望——&lt;/p>
&lt;p>实现了。&lt;/p>
&lt;p>不得不说，我也不知道这是不是 Favorite 社的一贯作风，
到最后的 HE 还要给点惊吓。不过造成玩家的心情大落大起不是很好嘛，总之结局是 HappyEnd 完全 OK 啦~&lt;/p>
&lt;p>——感到悲伤的时候就请看象天空，将来若是发生了无比悲伤的事……&lt;/p>
&lt;p>请抬头仰望天空，若能在蓝天上找到一片纯白，你们将不再哭泣哦，因为我会将你们的一切悲伤带走，这就是惩罚。&lt;/p></description></item><item><title>いろとりどりのミライ</title><link>https://blog.nkit.eu.org/p/iromirai/</link><pubDate>Sun, 06 Mar 2022 21:26:50 +0800</pubDate><guid>https://blog.nkit.eu.org/p/iromirai/</guid><description>&lt;img src="https://blog.nkit.eu.org/p/iromirai/cover.webp" alt="Featured image of post いろとりどりのミライ" />&lt;p>&lt;img src="https://blog.nkit.eu.org/p/iromirai/01.webp"
width="1877"
height="2949"
srcset="https://blog.nkit.eu.org/p/iromirai/01_hucd863e6424df42326df18ee2b03bdee3_166620_480x0_resize_q75_h2_box_2.webp 480w, https://blog.nkit.eu.org/p/iromirai/01_hucd863e6424df42326df18ee2b03bdee3_166620_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="插图 01"
class="gallery-image"
data-flex-grow="63"
data-flex-basis="152px"
>&lt;/p>
&lt;p>阶堂真红和鹿野上悠马在幸福恬静的日常中生活。 每一天，他们注视着自己的宝贝女儿——二阶堂青空的每一分成长。 在许许多多的笑容装点下，世界充满了幸福的芳香与触感。&lt;/p>
&lt;p>……真红许下愿望&lt;/p>
&lt;p>愿这幸福的时光能够一直、永远持续下去。&lt;/p>
&lt;p>这是笑容的故事。&lt;/p>
&lt;p>抬头望去，向那湛蓝的青空祈祷，愿你永远幸福……&lt;/p>
&lt;p>承袭「五彩斑斓的曙光」，五个幻想童话就此开始。&lt;/p>
&lt;hr>
&lt;h2 id="序">序
&lt;/h2>&lt;p>『负罪之人必须要得到饶恕——』&lt;/p>
&lt;p>其人终生都要为之而付诸行动，乞求饶恕。绝不能中断。&lt;/p>
&lt;p>这既是身负重罪之人得到幸福的方法之一，也是一个近乎答案的存在——同时，那还是信奉这些人的世界之核心『话语』。&lt;/p>
&lt;p>在各种世界里为所欲为，践踏其中无数思念。毋庸置疑，他就是恶人。任谁，都不会对此心存疑虑。 甚至他本人，都不会否定这一切，也无法否定。&lt;/p>
&lt;p>他所犯下的罪行。其真相。越是清楚这一切，愿意无条件饶恕他的人就会越少，在这世上就连十个人都不到。他所犯下的就是如此严重的罪行，甚至更加严苛。他是刻意为之，又或是无意间所为。 正因为如此，可以认为这句话已经作为一个命题，摆在他的灵魂面前。&lt;/p>
&lt;p>『负罪之人要想得到幸福，应当怎么做——』 时至今日，这句话依然萦绕于心。 为了这句话的意义，他那在世界的中心不断奔走的身影，我至今无法忘怀。 ……如果他的所作所为是罪恶。&lt;/p>
&lt;p>如果，仅为自我满足和心愿而行动，不顾牺牲多少的这类行为，必须以罪恶这一答案一概而括，受到众人唾弃的话。 那么，我也是如此。 将轻薄这一词用来形容我，是非常贴切的。&lt;/p>
&lt;p>试图践踏支持他那个世界的一切思念，我就是一个沉溺于个人复仇的蠢货。正因为…如此。啊啊，没错。正因为如此，我也和他一样，必须得到原谅。 奔跑吧。 我应该能做到。 他能完成的事情，我绝不能失败。身为人生的前辈——&lt;/p>
&lt;p>必须成为他前进的路标，指引其走上正确的人生道路—— 最重要的是，我必须现身说法，告诉他善恶与其是非—— 我不能就这样下去。 不能停滞不前。 我可不能就这样，像天上悠然自得的云彩一般——在天上守望他和他们的将来。&lt;/p>
&lt;p>『……一路走好』 敞开的大门，钟声响起…… 还有你的声音 『我相信，你的愿望会实现的』&lt;/p>
&lt;p>……好，出发吧。旅途就此开始。&lt;/p>
&lt;p>这一定，是我们最后的故事。 继幸福之暗语——『五彩斑斓的曙光』，为了让我原谅我自己，所不可或缺的故事。迈出步伐。&lt;/p>
&lt;p>开始前进。 朝那光芒璀璨的前方……&lt;/p>
&lt;hr>
&lt;h2 id="溺爱女儿的日常二阶堂真红">溺爱女儿的日常——二阶堂真红
&lt;/h2>&lt;h3 id="真红-0">真红-0
&lt;/h3>&lt;p>如同世界和世界，我们的心也连系在一起。&lt;/p>
&lt;h3 id="真红-1">真红-1
&lt;/h3>&lt;p>七月二十一日。 今天是我最爱的人……二阶堂真红的生日。 这一天于今年也顺利到来了。我停下手头的工作小憩一下，来回去看挂式日历和时钟。现在还是二十号的二十三点三十分刚过，真红的生日理应算在明天。&lt;/p>
&lt;p>我、鹿野上悠马和二阶堂真红再次在同一个时间，同一个世界中开始生活。自那时起， 这已经是第几个夏天了呢。&lt;/p>
&lt;p>本以为再也无法回归，我差点放弃的这般幸福生活。能陪在真红身边的每一天，现在、就在这里。想想那时的事情，能像这样平平安安地度过每一天，恍若一个奇迹。&lt;/p>
&lt;p>「…………」 那时。 那时的回忆…… 与真红一起度过的许许多多时间，恍若昨天的事情一般。只要闭上眼睛，转眼间便会浮现在脑海中。 也有难熬的事情。 寂寞的事情也好，悲伤的事情也罢。 ……当然。也有数不胜数的快乐。 曾经自以为是的自己，&lt;/p>
&lt;p>过去软弱的自己， 原本彻底习惯了放弃的、我自己。 对自己，我曾比任何人，相比任何事物都要厌恶、憎恨。 ……而我在这世界上最爱的人，却相信着我，等待我的归来。 无数时间和各种思念相交，最终我们得到了能够相依相伴的『现在』。&lt;/p>
&lt;p>那是因为有数不清的人们给我们加油、鼓励我们。 那正是无可替代的奇迹。&lt;/p>
&lt;p>「今天的工作就做到这里吧」 把写了一半的原稿放进抽屉。我舒展一下身体，缓解长时间工作带来的痛苦，走出作为工作间的书斋，前往卧室。 「我的身体比常人要小，所以体力也比常人要少啊……」真红经常这么说，时间一到二十一点，真红总是昏昏欲睡。 可是。&lt;/p>
&lt;p>她却揉着困倦的眼睛，有时还是一副昏昏沉沉的样子，一直以来，都在卧室里等待我结束工作。 我的工作很不规律。尤其在繁忙的时期。连续好几天熬夜也是家常便饭。再怎么着，我不能让真红也做到那个地步。&lt;/p>
&lt;p>所以，在那种情况下——经过我的一番劝说，她很不情愿地答应了——真红在那个时期， 才会提前休息……即便如此，总是让真红配合我的生活节奏，这让我感到非常内疚。 有好几次我都绕着弯路拜托她说：「你可以先睡嘛」&lt;/p>
&lt;p>但是，每当我这么说的时候，真红一定会先来一句「……我不要」便别过脸去。随后低下头说「我才不要一个人睡觉，绝对不要」，撅着嘴巴嘟哝「……一个人睡什么的，太寂寞了吧」她最后那句话真的很小声，我差点就听不清楚了。 ……我想，真红那样真的非常可爱。&lt;/p>
&lt;p>穿过走廊的同时，我想着这些事情，迄今为止真红向我展现出满点级可爱的那些回忆， 就络绎不绝地涌上心头。&lt;/p>
&lt;p>每当我忙于工作，必须要拖到晚上的时候，她一定会给我做薄烤饼当做夜宵。一旦我说「谢谢，很好吃」她就会挺起小小的胸部，洋洋得意地说「哼哼，没错吧，薄烤饼可是世界第一好吃的」那副样子非常可爱。虽然我们一直是同床共枕，早上要是真红先起床，就会一直在身旁看我的睡脸，我知道这个后，就说「太难为情了，还是别做了吧」她就说「……&lt;/p>
&lt;p>什么啊，悠马你想夺走我的乐趣啊「冷眼瞧着我。她那副样子果然是，可爱得无可救药。&lt;/p>
&lt;p>数不胜数的可爱，以及数不胜数的谢谢。迄今为止，真红一直在给予我这些。好幸福—— 我发自内心地感到幸福。 从头至尾，我们的一切都非常顺利。 我所从事的是文学工作，也就是所谓的小说家。 工作也已经步入正轨。&lt;/p>
&lt;p>去年，我在这座港镇、风津之滨的郊外买了房子。是非常非常小的一座房子。&lt;/p>
&lt;p>出于真红的希望，我就选了一座只能容下我和真红，还有女儿青空的房子，家虽然很小…但是从这里能望见大海，珍贵的人就在附近，能感觉到我们所熟悉的那个小镇的温暖……啊啊，是啊，正如真红所说，只要有这些，我们就满足了。&lt;/p>
&lt;p>在我看来，真的是一切的一切都非常顺利。甚至都令人发怵。感觉上，就像是大团圆结局的终章在不断延续下去。 对今后的七月二十一号。从今往后的每一天。我无时无刻，不是满心期待。 ——打开卧室的门。真红就躺在床上。 她身边就是睡着了的青空。&lt;/p>
&lt;p>母女俩紧紧相依，我坐到床边，望着她们的睡脸。 大概今天，真红也有等我过来吧。 她两手还紧紧抱着我的睡衣，看上去就是一头栽倒在床上。貌似是败给了二十一点的睡魔。 「……悠马」真红扭了扭身子，小声说道。「悠马……」声音有些痛苦。&lt;/p>
&lt;p>「啊啊，我就在这」回应着她的梦话，我碰了碰真红的脸颊。虽然也有个类似于都市传闻的谣言说，不能回应别人的梦话……听深爱之人如此深情地呼唤自己，我实在抑制不了回应她的心情，&lt;/p>
&lt;p>无论是在什么样的情景下。随后，真红有些安心地笑了起来，额头擦了擦我的手指。怀疑她是不是醒了，我看了看她的脸，果然真红还是睡着了的。 她所做的梦是什么样子的。要是幸福的梦就好……如果梦很可怕，我希望那能变成一个美妙的梦。 给真红盖上被子。&lt;/p>
&lt;p>换上真红为我准备的睡衣，我躺在青空的另一边。即使是不足双人用大小的床，也足以容纳我和青空，以及身材娇小的真红。 不论时间经过了多久，真红一直一直，都是小巧玲珑而可爱的。&lt;/p>
&lt;p>虽然真红她自己，对于一直都很娇小的身体不是很满意「……为什么我的身体还是那么小」&lt;/p>
&lt;p>我们的女儿青空长大了。 还有差不多两年就要从小学毕业。不过嘛，虽说是长大了，她毕竟是真红的孩子。果然，&lt;/p>
&lt;p>成长进度比起一般的孩子多少要——不，应该算是非常慢的那一类。即便如此，她每一天的成长都非常显著。看着女儿每一天的成长，对我来说真是无比幸福的一件事。 然而…… 「真不好办啊。毕业…啊」 无意间想起的一件事情，在我心头萦绕。毕业。&lt;/p>
&lt;p>我那无比可爱的女儿长大了一步。即将迎来人生的一个新阶段。 在那一天，我能忍住不哭吗——我现在就开始担心那些。我将来会不会成为一个对于青空来说，极其麻烦事的父亲，如此想象，我面露无可奈何的苦笑。&lt;/p>
&lt;p>确认一下时钟。 距离真红的生日，还有几十分钟。「…………」 望着她们俩的睡脸……我总有一点点心情，想要回忆迄今为止的事情。&lt;/p>
&lt;p>我就这样静静地守望两人，迎来真红生日到来的那一瞬间——我决定沉浸在迄今为止的各种回忆中，度过在那一瞬间之前的最后几十分钟。&lt;/p>
&lt;p>无论悲伤的事情，难受的事情……还是寂寞的事情。虽然那些自然是不会消失的。即使如此，那是一段普普通通的时光，没有任何决定性的事件。正因为如此，那才比任何时间都要宝贵。 我沉浸在，我们所珍惜的那段微不足道，而无比珍贵的回忆当中。&lt;/p>
&lt;p>春&lt;/p>
&lt;p>只要是和真红一起的时光，无论那是多么微不足道的事情，每一个瞬间都是无可替代的珍宝。 在我们共同度过的第一个春天，真红和我，还有青空三人，决定到后山去赏花。&lt;/p>
&lt;p>「青空，做好准备了吗？」&lt;/p>
&lt;p>青空将装有便当的小挎包背在肩膀上，真红一边给她戴遮阳帽，一边说道。「嗯，没问题的」青空微微一笑「做好准备了」。帽子大概是有点大了，为了不让帽子落下来遮住眼睛，青空双手撑住帽子，「今天的午饭是，妈妈做得非常好吃的便当」。&lt;/p>
&lt;p>她看起来非常高兴，而且还有些自豪。说罢，青空好似是等不及了，啪嗒啪嗒地跑向门口。 「爸爸，妈妈，再不快点，便当就要冷掉了」 一想到青空努力穿鞋的模样，我就感觉她可爱到了极点，自然而然地露出笑容。&lt;/p>
&lt;p>「没事的。你不用担心，真红的便当即使冷掉了也很好吃」 我小声说道，仿佛在仔细咀嚼其意义。背上放有行李的登山袋。 「啊啊，说的没错。我已经不是一个只会做薄烤饼的女人了」真红得意洋洋地挺起胸膛。「不管什么样的料理，无论什么我都能做得很好吃」&lt;/p>
&lt;p>当我还在最尽头的图书馆里，继续漫长的赎罪之旅时，相信我会归来、一直等待我的真红，只身一人，努力去当青空的母亲。 就为了让正处于成长期的青空能吃到她亲手做的、有营养的料理，就连她不擅长的料理，&lt;/p>
&lt;p>真红也练习了很多遍吧。历经无数次失败和磨练，现在真红的料理远比我所做的玩意儿要好吃不知多少倍。真红的料理是我和青空的最爱。 虽然二阶堂真红依然是个小巧玲珑的可爱女孩，但与此同时，她已是一位出色的母亲。&lt;/p>
&lt;p>「哇——」&lt;/p>
&lt;p>位于后山中段的广场上，满是盛开的桃色。青空眨了眨眼睛，发出欢喜的声音来。 「好厉害！全都是花……」 「嗯嗯，说的是啊」看到青空的双眸闪闪发光，真红摸了摸她的脑袋。「真的很漂亮呢」 「嗯！好像绘本里面那样」&lt;/p>
&lt;p>「呣呣，原来如此。……『就像绘本里面那样』、吗」 「爸爸……？」听到我重复一遍她的话，青空仰头看我「怎么了？」，不解地歪着脑袋。 「很厉害。我的女儿也许是个天才」 「诶？」&lt;/p>
&lt;p>「啊啊，嗯。虽然我成天都在想，你是不是个天才……就像刚才那样，你居然能在短短一瞬间，描述眼前的景象……果然是的。我现在的感动极其猛烈。我的女儿是个天才！」 「诶、诶诶~？」 青空不知所措。 在我眼里，她那副模样也是可爱得无可救药。&lt;/p>
&lt;p>「青空的感性真是丰富啊。想象力很厉害。有表达能力。啊啊，不愧是我的女儿。和邻居家的孩子就是不一样」 「呃……『感性』是什么意思来着」 「这个啊」真红苦笑着答道，「嗯……就是指那种最喜欢漂亮东西的人吧」&lt;/p>
&lt;p>我重重地点了点头说就是那样，同时补充真红的话。 「啊啊，那个词还代指世界上最可爱、最温柔的孩子」 「是、是那样吗？我很普通啊」 青空害羞地笑了起来。 「你说普通！？ 不！才没有那种事！青空将来一定会成为一个大人物。千真万确……！」&lt;/p>
&lt;p>「诶、诶嘿嘿……」 青空不好意思地苦笑起来，跑了出去。 「喂——你要到哪里去？ 我们要开始吃便当啦？」 「很快就回来——」 她头也不回地应了一声真红，就跑进落英缤纷的樱树林之中。 「别到太深的地方去啊……！很危险的！」真红说道。&lt;/p>
&lt;p>「嗯，我知道了！」 已经看不见她的背影，只有答应声从林子中传来。 「真是。悠马你真是个笨蛋父母」 目送青空离去，真红扑哧一笑。 「听你这么说，我都感到难为情了。这不就是所谓的夸死人吗。青空也是够呛」&lt;/p>
&lt;p>「你都说什么啊」我使劲握紧拳头「我才没有说假话。全部不都是实话吗。青空是全世界最可爱的这点是毋庸置疑的事实，而且，对如此如此之可爱的女孩，不疼爱不重视她的人才有问题。那才叫傻瓜。傻瓜父母」&lt;/p>
&lt;p>「你那是什么意思啊。词语的意思都被你搞乱了」（「親ばか」特指溺爱子女的父母，悠马故意将这个词用在错误的地方，故翻译成傻瓜父母） 真红苦笑着叹了口气，我和她一起准备便当。&lt;/p>
&lt;p>找到赏花的最佳地点，从我一路背来的登山袋里拿出塑料布，铺在地上。在这里整个广场上的樱花一览无余，有时还有风迎面吹过，非常舒服。是最棒的地点了。正当我想要再一次打开行李、准备好三人份的午餐时，我才想起来，青空是自己把自己那份便当，小心翼翼地拿到这里来的。就放在她挂在肩膀上的小挎包里面。那是我去年送给她的生日礼物，自那以后无论到什么地方去，青空都会带上它，特别珍惜……但愿里面的便当不会在她欢跑的过程中晃到一边去了。&lt;/p>
&lt;p>我们决定在这里观赏樱花，坐等青空回来。&lt;/p>
&lt;p>风吹拂而过。 花瓣飘舞。 樱树枝相互摩擦，沙沙作响。 随之，甜美的香气朝一个方向扩散开来。 我在心中感叹……只是能享受这些，来到这里就非常棒了。在悠闲的氛围当中，我有这样的感觉。&lt;/p>
&lt;p>「……关于刚才那个话题的下文」 望着在空中飘舞的花瓣，还有风中摇动、樱花怒放的树枝，我开口说道。 「诶？刚才的是指？」 「啊啊……额……」 「悠马……你怎么了？」坐在我身旁的真红一头雾水，看着我。&lt;/p>
&lt;p>「我们的女儿，二阶堂青空是世界上第一可爱的」 「啊啊，说的对」 真红无语了，苦笑着说「又来那个话题吗。」，将目光转向林子那边，好像是在担心还没有回来的青空。 「……不过」我继续向真红说道。「不过，全宇宙第一可爱的是真红」 「什、哈、诶？」&lt;/p>
&lt;p>真红瞪大眼睛，转过头看我。 「你、你刚才……说什么」 眼睛直打转，嘴上说自己没听清楚，真红已经满脸通红。 「真红，很可爱。我那么说的」 「等，啊……呜呜」 红色更深一层楼。 都红到耳根子去了。&lt;/p>
&lt;p>「突、突然说、那种话，悠、悠马……你到底……想干什么？」 永远可爱的真红，永远都会因为我这句「很可爱」变得满脸通红。 满脸通红地说「你、你这混蛋……！突然对我说那种话，我会吃惊的好不」，真红表现得慌里慌张。 我觉得她很可爱。想要紧紧抱住她。&lt;/p>
&lt;p>「好可爱」 「最喜欢了」 说出这由衷的话语……看着脸红的真红，我也感到难为情。虽然说，我平时很少对她说这些话，这也是原因之一。 「……！」 真红紧紧闭上了眼睛。 好像下了什么决心，她绷直了身体。 「悠马。你只是，在心里觉得我可、可爱吗……」&lt;/p>
&lt;p>「……诶？」 「这时要，那个……这个……」真红急促地深吸一口气，整理好呼吸，面对面看着我。 「不是、接、接吻之类的时候吗……」&lt;/p>
&lt;p>说到这里，直视我眼睛的真红发出一声小小的「啊……」，与之同时，她通红的脸颊变得更加红了，仿佛用红色的绘画工具上过色一般。然后，她使出全身力气，再一次闭上眼睛。身体抖个不停。 「什、什么嘛！明、明明我想……和悠马、接吻的……」 「…………」&lt;/p>
&lt;p>如此可爱的生物是从哪里来的……我还有了点失礼的想法。 「真红……」 我用手指触碰真红那通红的脸蛋。 「嗯……」 我的手指能感觉到，真红的脸颊抖了一下。青空不在。 姑且，这算是夫妻二人独处的时间。 那样一来，该干些什么自然就不用问了——&lt;/p>
&lt;p>「我盯……」 ……如此这般。 明明我是这么想的。 「…………」 感觉到视线，回过头来一看…… 「爸爸，妈妈……」 已经归来的青空就站在跟前。 「诶……？」&lt;/p>
&lt;p>&lt;img src="https://blog.nkit.eu.org/p/iromirai/02.webp"
width="1520"
height="2420"
srcset="https://blog.nkit.eu.org/p/iromirai/02_huda950a7db13c11ad7f84869cc25bbf2e_243610_480x0_resize_q75_h2_box_2.webp 480w, https://blog.nkit.eu.org/p/iromirai/02_huda950a7db13c11ad7f84869cc25bbf2e_243610_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="插图 02"
class="gallery-image"
data-flex-grow="62"
data-flex-basis="150px"
>&lt;/p>
&lt;p>真红胆战心惊地睁开眼睛。 通红的脸蛋转眼间变得煞白。 「啊，这、这是！这个不是的青空……」 「是亲亲吗？」眯起眼睛，好似在问不是究竟是哪里不是。「是要、亲亲吗？」 「啊，唔唔……呃呃……」 真红看想我，目光好似在求助。&lt;/p>
&lt;p>不过，我假装没有看到，对青空微微一笑。 「答对了」我点点头， 回答道。「爸爸我要和妈妈亲亲」 「悠、悠马……！」真红慌慌张张地喊道，「那样对教育不好！」。 「为什么。哪里对教育不好了……？夫妻之间恩恩爱爱的有什么不对！」 「唔呀……！？」&lt;/p>
&lt;p>我抱紧真红。 「等、等一下悠马！你给我适可而止……」 「我应该是对的！告诉孩子什么叫爱不也是父母的责任之一吗！你说是吧！？」 「那、那个，也许是那样没错……！」 「啊啊，没错！」 我是对的！我猛地点了点头。&lt;/p>
&lt;p>「人和人相爱是非常美好的一件事，青空你也是，总有一天会和哪个人……」 说到这里，我突然说不出话来了。 谁说的……「青空总有一天会和哪个人……」……！？&lt;/p>
&lt;p>「开什么玩笑……！开什么玩笑！总有一天是什么鬼！？再给我开玩笑试试！才没有什么总有一天！」 不知该针对于谁的怒火和焦急涌上心头。 「青空要一直和爸爸在一起……！我才不会让她嫁出去！」 「我、我知道，我知道了，悠马……好难受」&lt;/p>
&lt;p>真红在我怀中不断挣扎。&lt;/p>
&lt;p>「……好狡猾」 青空撅起嘴来。 「只对妈妈一个人，好狡猾」 「你说什么……？」 「明明我也想，和爸爸亲亲的……」 含着食指，她很是失落。 「…………」 何、何等令人震惊。原来是那样吗。 我没注意到。&lt;/p>
&lt;p>我都干了些什么……居然没有察觉到女儿的心情。青空最喜欢我（爸爸）……&lt;/p>
&lt;p>原来如此， 你是… 想和我… 结婚对吧！ 「好！来亲亲吧！和爸爸亲一个！我不会把青空交给任何人！」 「哇——太好了……」 青空扑到我和真红中间，我连青空一起抱在怀中。 「诶嘿嘿，和爸爸亲亲。和妈妈一样」&lt;/p>
&lt;p>「亲、亲是！悠马！？你都在想些什么啊……！？」 「我想什么。那还用问，我要和亲生女儿亲嘴，没什么不好的吧」 「别说什么亲生女儿啊！让人突然就有种危险的感觉不是吗！」 「嗯……啾……」 青空天真无邪地突出嘴唇。&lt;/p>
&lt;p>「呜呜……明明是如此如此可爱……总有一天，青空也要和哪个人……」 一旦去想象那些，我想哭的心情就会变得无法自已。 二阶堂青空会结婚，被人从我们身边带走…… 即使身为父亲的我坚决反对也无法阻拦。 ……她会被来路不明的男人带走。 那是什么玩意。&lt;/p>
&lt;p>不行，绝不容许那种事发生。和诱拐又有什么区别……！ 我要告他！我一定要告他！ 「可恶……与其让不明来路的哪个混账小子玷污她，干脆我就先一步……」 「悠马，很吓人，你的眼神很吓人……！」&lt;/p>
&lt;p>「青空那么温柔，肯定会被废柴男盯上！一定是个暴力丈夫、酒鬼、花心男！……居然敢花心！？难道你对青空有什么不满！？开什么玩笑！」 「话都说得乱七八糟了啊悠马……！」&lt;/p>
&lt;p>「啊、啊啊，不好，怎么办。我真有那种预感了……青空要是被奇怪的男人教坏了，我究竟该怎么办……可恶！既然如此，除了一直陪在她身边、保护她以外，已经别无他法了吧……！」&lt;/p>
&lt;p>「就算这样，为什么悠马一定要和青空亲嘴啊！」真红的两只手按住我的脸「那种事、绝对不能发生！」&lt;/p>
&lt;p>「爸爸—还不亲吗？」 「青空，我现在、就去……！」 「便、便当！我们不是要吃便当的吗！？」 「花比吃的重要多了！我要吃花一般可爱的青空！」（原句是日本俗语花より団子的反用，顺带一提原句意指舍名求实，悠马是字面意思上的反用。 。 ）&lt;/p>
&lt;p>「哇，要被爸爸吃掉了……」 青空被逗笑了。 「真的是！给我、适可而止！」 而真红的声音有点恼了。 「好痛……」 真红用那纤小的双手，仿佛要包住脸颊似地打了一下，我回过神来。 ……现在想想，我也觉得当时玩笑是有点开过头了。但是，过得很快乐。&lt;/p>
&lt;p>像这样不断打闹的时光，能永远持续下去就好了。而我向自己发誓。 ……果然，我不会把青空交给任何人。 风在吹， 满是樱花的树枝不断晃动，仿佛在为我们的骚动摇头。&lt;/p>
&lt;p>夏&lt;/p>
&lt;p>在夏天，有我们这个三口之家的一大事件、真红的生日等待着我们。七月二十一日。 每年，曾经住在宿舍里的所有人都会为了真红，欢聚岚山荘。 「真红小姐，祝你生日快乐」 怀里满是花束，加奈满面笑容地来到我们面前。&lt;/p>
&lt;p>「祝你生日快乐，真红姐。这是我送你的礼物」 澪送来了真红和青空的一套款式配对的衣服。 「祝贺你。真红酱」 「是的，祝贺真红姐生日快乐，今年也能像这样欢聚一堂，真是太好了」 镜和司送的是供我们一家三口用的海外旅行劵。&lt;/p>
&lt;p>她们说，去年一起去旅游的那个国家非常非常有意思，食物都非常好吃，是个很棒的地方。 「谢谢大家了，我真的是非常高兴。」真红会心一笑，大家也非常高兴地笑了起来。&lt;/p>
&lt;p>今天是七月二十一日。 二阶堂真红的生日。 在这天，我们聚在食堂，坐在那时曾天天面对面吃饭的餐桌旁边，一边吃茶点一边报告一整年的回忆。这是我们大家的特别日子。 「镜和司还真是要好啊。正在一起旅行吗，还是在做什么别的事情」&lt;/p>
&lt;p>在感叹的同时，真红看着和旅行劵一起送给我们的传单。 「就是」镜很高兴地微笑着，点了点头「我和司非常要好」。 「诶嘿嘿，是的」司害羞地笑了起来。「欧派尺寸的差异，和朋友间的友谊没有关系」 「可以听听你们旅行时的回忆吗」&lt;/p>
&lt;p>听我这么一问，司很有势头地点点头。「好的，当然没问题，请听我们说」&lt;/p>
&lt;p>游名胜古迹。品尝美食。 购买礼品。 在酒店房间里聊了整整一晚。 ……还附带了一些，因为有点色情的东西而兴奋、害羞的小插曲。等等等等。 只是听她们说，就感觉到她们俩玩得有多开心。&lt;/p>
&lt;p>「虽然我和敷岛小姐，两个人弄丢了『护照』，辛苦了一阵子。包括那些事件在内，那个国家的一切全都棒极了，旅行从头至尾全是快乐。所以我希望你们三位也一定要去享受一下」&lt;/p>
&lt;p>一语带过那些能让人想象出很多麻烦事的意外，她们俩非常满足地笑着，说「玩得真是太开心了」。 好似在说，哪怕是面对困难，只要两个人在一起她们就很开心。 ……这样啊。 「你们俩真是对好朋友啊」 我打心底这么认为。&lt;/p>
&lt;p>「我们也很要好，不输给她们俩对吧，如月小姐！」 听她们说了这些，加奈不服输地朝澪抛去一个微笑。 然而，面对加奈的这些表现，澪总是轻而易举地将其化为乌有。「诶。很要好？……是吗」 「好过分……！ 此时就坦诚地承认了嘛如月小姐！」&lt;/p>
&lt;p>「我一直都很坦诚啊。我讨厌说假话」 「假话是什么意思呀！我们不才一起去了卡拉 OK 厅的吗！」 「……咱不就只是听你那难听的歌声而已吗」 「那些只会招人累」澪无精打采地眯起眼睛。&lt;/p>
&lt;p>「而且，到最后你心思全放在之前点的冰淇淋和帕菲之类的，光吃不唱。就只是说话不运动……可是会长胖的。陪你做这些真是麻烦」&lt;/p>
&lt;p>「呣……」加奈的脸颊鼓起来了，不过……「啊。原来如此」，她拍了下手，好像是理解了什么。「没什么难道不难道的，如月小姐，你还在介意我得分更高那件事对吧」 「原来如此，是这么一回事呀。」加奈坏笑着说道。&lt;/p>
&lt;p>「机器可是很诚实的呢。绝对不会说如月小姐讨厌的那些假话。哪边的歌唱得更好，一眼不就能看出来了吗」 「得、得分什么的，和歌唱得怎么样才没有关系」&lt;/p>
&lt;p>「你们听我说真红小姐悠马先生。如月小姐她啊，说自己不会唱流行乐曲，唱的全都是演歌。嘛，虽然我的得分实在是没能低过她，但是听起来挺好听的。也就是所谓的花腔唱得好」&lt;/p>
&lt;p>「没、没什么不好的吧……究竟是哪里唱得不好了」澪满脸通红地说道，「而且，我才不想被你这么说！明明你唱得全都是些动漫歌曲！什么『我最喜欢哥哥了！』，你也不想想自己都多大个人了！」。&lt;/p>
&lt;p>「等一下如月小姐！我们之前不是约好了吗，你说了要用名字称呼我，而不是什么『你』！ 明明都约好了的，在那之后你完全没有那么做的迹象。你不是讨厌说谎的吗。差不多也该满怀亲切地喊我『加奈酱』了」 「那、那种事，咱才不记得……」&lt;/p>
&lt;p>「那时是喝了酒……一不小心就顺势……」澪小声嘟囔着。她红着脸，非常难为情。 ……唔呣。原来如此。 「你们俩关系也挺好的嘛，不输给司和镜」 「就是！」「哪里有！」 一听我的话，两人的反应截然不同，非常有趣。&lt;/p>
&lt;p>——夜晚。 等所有人都在各自不同的时间返回她们自己的家，我们在宿舍的食堂里吃了晚饭。成员是真红和青空、铃姐和时雨先生、还有我这五个人。 料理是时雨先生亲手做的，大概是考虑到正处成长期的青空，虽然外观并不算光鲜艳丽，&lt;/p>
&lt;p>但是非常好吃，并且营养丰富对健康很有好处。 青空非常开心，而且对这些还有些怀念，她将料理吃得干干净净。 「好吃吗？」真红一边为青空拿掉脸上的饭粒，一边问道。「嗯，很好吃」青空微笑着回答。&lt;/p>
&lt;p>看着她吃得津津有味，我都想让她就在这里吃饭了，而不仅仅是一年一次。……当然， 前提是时雨先生和铃姐愿意。&lt;/p>
&lt;p>「……不过啊，还真是那个呀，悠君」 忽然。 铃姐慢悠悠地说道。 那是在吃完美味晚餐以后。 「怎么了？」 我表示不解，铃姐发出一声「哎呀……」，开口想要说什么。 一瞬间。 我心中有一点——不好的预感。&lt;/p>
&lt;p>不过，吃完饭的青空就坐在我膝上，心情姣好地向我展露笑容。我正在享受这一情景。铃姐就坐在我对面，一只胳膊撑在桌子上，一言不发地看着我们，这些都在我的余光里。 她好像是有些无语了。似乎想说些什么。&lt;/p>
&lt;p>正因为如此，我想，铃姐一定是一不小心才说出口的。她的下一句话实在是不怎么受欢迎。 ……关于那个嘛，的确是。&lt;/p>
&lt;p>因为此时我那松弛过度的表情实在是不堪入目，虽然我也是这么想的。但是，即使被世人指责为登峰造极的笨蛋父亲，我甚至都有觉悟自豪地接受这一中伤。不管别人骂我是笨蛋还是傻瓜——可爱的事物就是很可爱。宝贵的事物就是很宝贵。我此时的微笑甚至让原本应有的正常表情彻底崩坏，根本停不下来。&lt;/p>
&lt;p>青空坐在我的膝盖上，说着「那个呢，加奈给了我糖果」之类的、「是澪给我系好头发的」之类的、「镜和司呢，教我唱国外的歌曲」什么的，&lt;/p>
&lt;p>唱出她刚记住的歌给我听，声调掌握得还不是很熟练。面对青空的每一个举动，我只是不断点头说「嗯嗯，是吗是吗」，脸上的笑意不断加深。 总而言之，我就是在傻笑。 甚至连我旁边的真红也很无奈。 ……我甚至都忘了，这并不是在自己的家里。这有什么办法。&lt;/p>
&lt;p>「和青空像这样聊天。」 这是常有的事，天天都在发生的事。对我来说可是理所当然的事。 可是，要是在旁人眼中，我的行为也许是过了度。 比如太宠孩子了之类的。要和孩子保持一点距离什么的。也许别人会这么对我说。但是。 话虽如此。&lt;/p>
&lt;p>「悠君。我越想越觉得啊——」 你就不能、不夺走我这幸福的时间吗，铃姐…… 「——悠君和青空。你们俩，一点都不像啊」 这样一句话。 从铃姐口中冒出。 在这延长了很久的饭后时间，仿佛一个位置恰当的句读点，那句嘟哝在最为合适的时候从铃姐口中冒出。&lt;/p>
&lt;p>我膝上的青空刚好把想要告诉我的全部事情报告完毕，说着「我去帮时雨叔叔洗碗」， 从我的膝盖上跳了下来，看她奔进了厨房，铃姐才说出这句话来。 真的是掐准了时机。 要是解释一下，那就是铃姐只向我一人发出的宣战布告。 什么的。&lt;/p>
&lt;p>我觉得，要是形容得夸张一点，就是那个意思。 「青空是个非常可爱的孩子对吧」 仿佛在仔细品味这句话的深意，铃姐继续说道。 「除了漂亮而柔顺的金发，还有那青空一般的天蓝色眼瞳，简直就是人如其名的代表，&lt;/p>
&lt;p>嘛，眼睛大概是继承了真红她妹妹的血脉。成长速度比一般人要慢，一直都那么小巧玲珑也非常可爱。另外她还那么坦诚温柔……你说，悠君，身为父亲的你，给了那孩子什么？」 「…………」&lt;/p>
&lt;p>虽然我说了那是宣战布告，实际上，对于铃姐来说也许只是单纯的疑问。没有任何深意， 纯粹的疑惑。 也许是我被害者意识太强烈，想多了。 要说为什么，因为我也，虽然只是一点点……也并不是没有这么想过。&lt;/p>
&lt;p>如此可爱的孩子，要说她继承了真红的话自是理所当然，居然还继承了我的什么…… 那种事情。 啊啊。 没错。 那种事，真的是…… 到了无可奈何的地步…… 「……无法想象」&lt;/p>
&lt;p>「我说啊，悠马。你也不用那么失落嘛」 「啊啊……」 回到家里，我和真红两个人一起，写今天的日记。坐在我的膝盖上，真红仰头看着我，很是担心。 「没关系的，悠马。你不用表现得那么消沉。青空可是很像你的。身心都和你一模一样」 「……是吗」&lt;/p>
&lt;p>「嗯嗯，绝对没有错」她肯定地点点头，「青空那温柔的一面……能把别人的困难当做自己的困难一般看待。我认为，这一点毫无疑问是像悠马的」 「…………」 「还有。那孩子的笑容和悠马一模一样啊。真的很可爱，世界第一……虽然要是那么说，&lt;/p>
&lt;p>听上去就像是悠马的笨蛋父母特性也传染给我了也说不定……不过嘛，我想自己也算是那个概念的人了……那个啊，只要那孩子一笑，即使什么事情都没发生，我都忍不住想抱紧她。在我心中的『最喜欢』变得无法抑止。那正是，悠马和青空的绝对共同点，只有我能确信」&lt;/p>
&lt;p>听到真红安稳祥和……却又深信不疑地那样说道，感觉那番话仿佛将我消沉的内心温和地安抚下来，安心好似我心中静静蔓延开来。&lt;/p>
&lt;p>「但是，悠马啊。回来以后你就一直躲在卫生间里不出来，不知道你在做什么，结果跑过去一看，你一直都在和镜子干瞪眼」真红大笑起来，只是想起这件事就逗笑了她。「吓了我一大跳，你在镜子面前时喜时哀时而消沉，看起来感觉，挺可爱的」&lt;/p>
&lt;p>「唔唔……也不用笑得那么厉害吧」 正如真红所说，我一回家就奔进卫生间，毫无遗漏地检查了一边自己的脸。因为我想确认，自己身为青空的父亲，有没有什么一眼就能看出的「相像」部分。 我和青空。两个人在外貌上的共同点是？&lt;/p>
&lt;p>无论哪个人怎么观察，都会说「嗯嗯，她是您的孩子呢，我能看出来」的特征是？ 完全没有—— 这么说或许有点夸大其词。 但是，我们就是没有什么算是很相像的地方，甚至别人都看不出来吧——我还这样想过。「…………」&lt;/p>
&lt;p>我自己都觉得，我为什么要说这么多借口，还总是拐着弯子说话。 想是那么想， 可是我在明白是什么让自己如此悲伤的同时，又不怎么明白。 「金发和天蓝色眼睛——」&lt;/p>
&lt;p>如果能找到那一类与我相像的明显特征，我是不是就能将这莫名的不安，转换成只有莫名的安心了吗。 但是。 当我满怀期待地站到镜子面前，越是端详自己的脸庞，越觉得——从各种意义上而言， 我和可爱的青空根本八竿子打不着边。&lt;/p>
&lt;p>「夏目铃也是说过分了，她之后不是向你道歉了吗，说是她搞错了。也就只是有点在意的程度而已。所以啊，悠马，别这么在意」 「啊啊……」 我想起铃姐后来的反应。 我一说出「无法想象」，她就一副刚回过神来的表情，「开、开玩笑，只是玩笑啊」，&lt;/p>
&lt;p>慌慌张张地傻笑起来，还说「发了一小会儿呆，一不留神就说出了心里的想法……」。虽然那话听起来让人感到无比微妙，也不知道到底是不是在安慰我，姑且她还是给了一个解释。&lt;/p>
&lt;p>「嘛，可是啊。今天的日记就用不着烦恼了吧。虽然说不上是什么开心的事情，作为一个事件是足够了。对吧？」 「……也许是吧？」 「啊啊，就是。所以你就打起精神来吧，悠马」 真红向我微微一笑。 「…………」 我更加用力地抱紧真红。 「来，写日记吧」&lt;/p>
&lt;p>「啊啊……两个人一起写」 「嗯，是啊。不是像在『五彩斑斓的世界』里那样，写些必须要写的事情，而是将自己想写的事情，以自己喜欢的方式，记述在这本可以两个人一起写的日记里」&lt;/p>
&lt;p>「啊啊……」我点点头，握住笔。「可是，直到刚才为止的那件事算不上什么『想写的事』吧」 「这样啊。嗯————那么？今天都发生了些什么？」 「这个……」我撅起嘴来。「不用说，你都知道的吧」&lt;/p>
&lt;p>「诶嘿嘿」看着我，真红恶作剧般地笑了笑……我也受她影响，笑了起来。真红的笑容宛如魔法一般。 就连今天发生的一些微不足道的的烦心事，转眼间便会消失得无影无踪。&lt;/p>
&lt;p>——和真红一起写日记。 在生下青空以后，我也很少以这个姿势抱住真红——真红说她有身为一个母亲的矜持。有青空在场的时候，她不能太过张扬地向我撒娇——还有在我工作忙碌的时候，也很难像这样，两个人一起度过一整天。&lt;/p>
&lt;p>即使如此，当有时间的时候，等青空睡着了，我们一定会像这样，一起写日记。就像在那个时候（五彩斑斓的世界），两个人一起。 『写日记』这一行为已不再具有必要性。 即便如此，我还是想永远珍惜，永远珍惜着这样的时光。&lt;/p>
&lt;p>「嘛总之」真红的一句话结束了前面的对话「今天的日记就不用烦恼了吧。能写的事情很多……现在，也没有以前让悠马讨厌写日记的理由了……就别抱怨啦，一起写吧。和悠马像这样一起度过的时光，我可是最喜欢了」 「…………」&lt;/p>
&lt;p>「悠马？」即使这样，我还是没有动笔，真红一脸疑惑地看着我。「你怎么了？不写日记吗？」 「不……我想现在写日记是不是有点早了」 「诶……是吗……？」真红看了一下时钟。「差不多都要到二十一点了吧……说实话， 我现在很困」&lt;/p>
&lt;p>真红揉了揉眼睛「怎么了啊，又是那个不想写日记的病吗？」，恶作剧般地笑了笑。 「不是。并不是那样。明明今天是真红的生日……我还没有送真红礼物啊」 有时鼓励我，有时给我勇气——&lt;/p>
&lt;p>明明在这特别的一天，应该是我为她做些什么，可我却从真红那里得到了许多。要说那是常有的事，的确是那样没错…… 至少今天，我无论如何、都不能这样。 因为今天是…七月二十一日啊。&lt;/p>
&lt;p>「祝贺你」我从口袋里拿出一个小包裹，递给真红。「……祝你生日快乐，真红」 「诶。这个是……」 「啊啊……现在才送这个可能是太晚了，我希望、从今往后，你也能一直、永远和我在一起」 「…………」&lt;/p>
&lt;p>我让真红把一个小箱子握在手中，真红一言不发，只是盯着箱子看。&lt;/p>
&lt;p>「啊，这、这个……」她的沉默让我心里不踏实，我为了打圆场，继续说道。「……这是戒指。虽然，我们或许不是那种一般的夫妻。就算那样，明明大家都已经为我们举办过结婚典礼了。可就连一个戒指，我都没送给真红」&lt;/p>
&lt;p>即使真红抱怨说我都回来多长时间了才想起这事，我也找不到任何借口辩解。 ……当然，我并不是直到现在才想起来。 只是迄今为止，我都没能找到交给她戒指的机会。 今天。从这一天开始……&lt;/p>
&lt;p>我深切地体会到，只要能将在那天各一方的漫长时间里的、我们失去的「平常」一点点取回，就足够了。 我给真红戴上戒指。 仿佛每一字都饱含着感情，真红一字一句地说道。 「谢谢，悠马……」 能在如此近的距离，看到真红幸福地眯起眼睛来……&lt;/p>
&lt;p>「我真的、真的是……已经，高兴得不得了，悠马」 ……我真心感觉到，自己是这世界上最幸福的人。 写完了日记，我一直在和真红说话。 直到在我的怀中的真红，悄声入眠为止……&lt;/p>
&lt;p>「……真红，我想买一个能三个人一起生活的家」 「家？」 「啊啊。今后要是青空长大了，再怎么样，总不能三个人一直都……住在这间公寓里」 「……啊啊，嗯。说的是啊。那不是挺好的吗……我也赞成悠马的想法」&lt;/p>
&lt;p>「……谢谢，虽然要把这里解租，是有些寂寞」 「……是啊。毕竟这里有很多回忆啊」 「啊啊……」 「正如悠马所说，是有点寂寞」 「……真红想要什么样的家？」&lt;/p>
&lt;p>「我啊……这个嘛。不用买太漂亮的房子。只要能继续在这个镇子里居住，无论是新建的还是老房子，全都交给悠马决定」 「啊啊。我明白了」 「但是……我只有一个愿望」 「嗯，什么？」 「可以的话，还是那种小家比较好，一家三口无论何时都挨得很近」&lt;/p>
&lt;p>「小家、吗」 「……嗯，明明都在家里，要是离得很远，不是很寂寞吗」 「我知道了……其实，我就知道真红大概会这么说，已经找到了不错的地方。虽然离镇子有点远，可是能看见海，我觉得那里是个好地方」&lt;/p>
&lt;p>「……嗯。那么，下次休息的时候就去看看吧。和悠马、青空， 我们三个人一起」&lt;/p>
&lt;p>就像真红非常珍视我们两人独处的时间一样，对于我来说，能和真红说这些无关紧要的话题，能够安稳度过的这段时光无比重要。 抱紧不知不觉间睡着的真红，躺在床上。 「…………」 我们两人，能一起待到什么时候。 能像这样子，在你身边待到什么时候。&lt;/p>
&lt;p>要是能永远……永无止境地……不受死的阻拦……像这样在一起的话，就好了。 我无法抑制这样的思绪。&lt;/p>
&lt;h3 id="真红-2">真红-2
&lt;/h3>&lt;p>「…………」 我从回忆中清醒过来。 真红和青空还并排睡在就寝室里的床上，我盯着她们看。再一次想，真的是发生了很多很多事情啊。 在那之后……秋天有青空上的小学所举办的运动会。&lt;/p>
&lt;p>到了冬天，我们用了镜和司送给我们的旅行劵，三个人第一次，一起到海外旅游。 「运动会……吗」我面露苦笑。「现在想想，是有点辛苦」&lt;/p>
&lt;p>因为校方的检查有误，等我回过神来，就被强迫参加当时监护人参加的运动项目。项目是二人三足。要求我和伴侣，或者亲戚里的哪个人组队。 我的身体很难说是结实的。放进胸口当中的心脏很脆弱，不适合运动，尤其是剧烈的……&lt;/p>
&lt;p>但是，身为青空的父亲，这点小事怎能办不到。我当然没有拒绝的打算，一直都在想办法。 虽然说为了让自己能和身高差距大的真红好好跑，我是练习过，但身体还是不行。 ……该怎么办啊。我能跑完全程吗。我感到很不安。 想让青空展露笑容。&lt;/p>
&lt;p>心里就这么一个念想。 然后……在运动会之前的某一天。我感觉自己做了个奇妙的梦。&lt;/p>
&lt;p>一片全白。 那是个一片全白，非常炫目的梦。 「…………」 有个沉默寡言的人递给我一个光球一样的东西，那个光球转眼间便钻进我的胸口。随之…… 「……你要活久一些啊，莲」 就留下这么一句话，寡言少语的他紧绷着脸，从我的梦里消失了。&lt;/p>
&lt;p>「……很不可思议」 我的身体强壮起来了。 一睁开眼睛，我就深刻体会到了自己的变化。 感觉就是，自从做了那个梦以后，在身体之中的新心脏变得比原件还要稳定。&lt;/p>
&lt;p>于是，直到运动会那天之前，在青空的加油声之中，我和真红一起练习二人三足。既然要参加，肯定想得第一名。想让青空高兴。想听她说：「爸爸真厉害！顺带，想让她一直对我说，即使青空长大了也想和帅气的爸爸一起洗澡一起睡觉……！」 我要努力啊。&lt;/p>
&lt;p>超级努力。 往死里头努力。 「悠马，你也太积极了」 真红苦笑着和我一起练习。 我曾经提议过，为了解决那个无论如何都无法补救的身高差，在比赛开始的同时，我抱着真红全力冲刺，就这样直接跑到终点如何。&lt;/p>
&lt;p>青空笑着说「爸爸，那是犯规的」，真红则是撅着嘴说「别做啊。我绝对不要。在别人面前被你抱着这种事，也太难为情了」&lt;/p>
&lt;p>……到了运动会当天。 多亏了曾经做的那个梦。 在上午的比赛里，我和真红以及青空一起练习的二人三足，一帆风顺地完成了。 ……我和真红两个人一起，踉踉跄跄地……成功到达了终点。我们相视而笑，说能跑完全程真的是太好了。&lt;/p>
&lt;p>说实话，我们的结果并不算多好，即使如此，青空还是微笑着对我们说「爸爸，妈妈，&lt;/p>
&lt;p>谢谢。运动会，我过得很开心」一想起青空那副样子，不知怎么地……仅是那样眼泪就会不由自主地流出来。同时也在心里为自己对女儿的溺爱感到无奈，我真的是、真的是有了一个好得不能再好的女儿啊。 铃姐和时雨先生也参加了运动会。&lt;/p>
&lt;p>仿佛五口人聚在一起吃便当的那个场景，令人难以忘怀。 「今天我可是一大早就起来努力做便当了，你可不能剩下啊」摆出很大的一分便当，真红说道。「要吃饱肚子，下午的比赛也好好加油啊，你们两个」 「诶？」 下午的比赛……？ 两个……？&lt;/p>
&lt;p>我才得知，铃姐擅自让我以突然参与者的身份加入之后的距离跑。 「一决胜负吧悠君。看看谁更能取悦青空，我们就来分个高下吧」 那是什么意思。 搞不懂你那么做，到底是想怎么表现自己…… 如此这般。 在感到无语的同时。&lt;/p>
&lt;p>我尽全力跑了，从来没有这么卖力过……除了跑去救真红那个时候以外……我用尽全身力气奔跑，甚至感觉我一辈子都不会超过这个速度。铃姐也没有丝毫放水的打算，飞一般地疾驰。 青空为我们两个加油。「爸爸和铃姐，都要加油……！」 结果。 同时到达——&lt;/p>
&lt;p>而且我们直到现在，一碰面就要争论说「那时是我赢了」「不，是我」。铃姐还很不甘心地说「戚……要是我没有疏于锻炼，就不会出现那种结果了」 事情一到青空身上，铃姐对我就会多一点点挑战心。倒也无所谓。 我也不是不理解她的心情。&lt;/p>
&lt;p>我知道，青空有时……会叫铃姐「妈妈」（这个「妈妈」和称呼真红那个不一样， 真红那是「mama」，这个是一般叫法「お母さん」）。 而且我还知道，每当那个时候，铃姐一定会高兴得不得了，眼泪都要出来了。&lt;/p>
&lt;p>「所以嘛，那个时候你也只是，一不小心就说出口了对吧，铃姐」 我和青空不怎么相像吧？——类似于那样的话。 ……明明她没有任何恶意，一不小心就脱口而出……这些缘由，还有她的心情我都非常理解，我也不会再说什么，也不会在意。&lt;/p>
&lt;p>真红和青空、铃姐和时雨先生。还有我。无论何时，我们五个都是一家人。&lt;/p>
&lt;p>春&lt;/p>
&lt;p>夏&lt;/p>
&lt;p>秋&lt;/p>
&lt;p>冬&lt;/p>
&lt;p>我们的一年就这样循环往复。 无论何时，永无止境地循环下去。&lt;/p>
&lt;p>——然后我们在今年，也将迎来七月二十一号这一天。明天要和许久未见的大家做些什么，说些什么呢。 在这一年里，大家都遇到了什么样的事。 在明天，说这些事情的时光一定非常欢乐。 ——我确认了一下时钟。 「……祝贺你」&lt;/p>
&lt;p>在十二点到来的同时，我吻向真红的额头。 「祝你生日快乐，真红」 从今往后，也要一直三个人……五个人一起，幸福地生活下去吧。 因为。 我认为，那一定是非常非常幸福的。 在真红今年的生日。 这一次我要做些什么，让真红展露笑容呢。&lt;/p>
&lt;p>考虑着这些事情……我在心中祈愿，会和真红身处于同一个梦境。&lt;/p>
&lt;h2 id="和小莲约会观波加奈">和小莲约会——观波加奈
&lt;/h2>&lt;h3 id="加奈-1">加奈-1
&lt;/h3>&lt;p>「哥哥，明天可以一起出门吗？」 某个寂静的夜晚，我收到这么一则信息。 是在管理员室里的，第八个抽屉。莲寄给我一封信。后面是这么写的。 「要是可以的话。有个东西希望你明天能和我一起找。要对姐姐保密」 我大概察觉到，姐姐指的是加奈。&lt;/p>
&lt;p>不过明天是？ 要瞒着加奈？ 里面就写了这么多内容，我将信叠好，收进书桌里。 是怎么了。 单凭信上的一句话，难以推测的事情实在太多。 总之，明天是周日。学校放假。我也没什么事情要和加奈做。 「没问题。一起出门吧」&lt;/p>
&lt;p>我就写了这么一封简单的回信，放进抽屉里，寄往「商人之镇」 的信袋。 事后我有些后悔，应该直接到商人之镇去找她，答应以后再询问缘由。&lt;/p>
&lt;p>在那天，我一直陪着加奈，直到莲写信给我。 为了将我们两人变成三人，加奈她正在做心理和身体上的准备。说她身怀六甲显得有点太庄重。可是说她怀孕了，又很不好意思。虽然这只是我自顾自的主张。&lt;/p>
&lt;p>但是，她本人貌似并不介意，即使我不希望她在这样的身体状况下勉强自己，加奈却每天都在努力做家务，从不松懈。 说实话，这样的加奈很令我担心。 在意得不得了。&lt;/p>
&lt;p>一不小心就会做些过度保护的事情，对她说「别勉强自己啊，慢慢来啊，有没有什么想要的东西？」&lt;/p>
&lt;p>而加奈只是面带苦笑，对担忧她的我说「非常感谢，这么担心我，我很高兴。但是，要是不活动一下身体，我冷静不下来。」只要我不看着，她就想干活，她还说……身为想在孩子出生之前学些简单的料理，于是做菜也在学。 我一个大男人，肯定没法怀孕。&lt;/p>
&lt;p>更不可能代替她生孩子。不可能实现。 所以，正如字面上所言，加奈现在的状态对我来说是完全未知的领域。 既然加奈说没事，我也只能相信她没事。 这什么也做不了，一无所知的自己，真的很令人心烦。 「……因为这些事就这么闹心，真的没问题吗」&lt;/p>
&lt;p>这段时间，曾有这样的想法闪过脑海。 就连现在的情况都不尽人意，我还能继续下去吗……能让加奈没有丝毫悲伤，满面笑容、幸福地生活下去吗。 总而言之我就是不安。直戳了当地说，我只是在担心。今后，我能保护好自己的家人吗？&lt;/p>
&lt;p>总是一个人发愁。我把越来越多的时间，用在思考这充满未知数的将来。 心里只是在祈祷，能和加奈还有生下来的孩子三个人一起，平平安安地生活下去。&lt;/p>
&lt;p>「唔——嗯……」 今天，我也在考虑将来的事情。 解脱者这个工作还是不干为好吧。有家小的人不该从事危险的工作吧。我已经不是孤身一人了。 ……解脱者。 拯救有困难的人。 迄今为止，我一味钻研工作所必需的技术。&lt;/p>
&lt;p>因为我从这工作中感觉到价值以上的存在……甚至引以为傲，所以我相信不久我就能从『弟子』毕业，开始自己的事业。过去我对这样的未来没有丝毫怀疑。为此我坚持跟随铃姐修行。那也该说是理所当然的。 但是反过来说，我除了这些就一无是处。&lt;/p>
&lt;p>「除了解脱者，我还有什么能做的事情」 我自然会有这种想法。 ……今后，我就不再是只身一人。必须要守护加奈一辈子。因此，我不该从事什么有危险的工作吧。那么，我还能做些什么…… 翻来覆去地烦恼。&lt;/p>
&lt;p>正当我一个人在管理人室里烦恼这些时，莲寄来看一封信。周日…吗。 虽然我不知道莲是怎么打算的……&lt;/p>
&lt;p>「权当是转换一下心情，和莲出趟门也没什么不好的吧。一定是这样」 我嘟哝着，像是在说服自己，点了点头。 虽然「要瞒着加奈」这点依然令人在意，现在在意那些也没有用。今天这个点儿还是去睡觉吧。&lt;/p>
&lt;p>&lt;img src="https://blog.nkit.eu.org/p/iromirai/03.webp"
width="1464"
height="2404"
srcset="https://blog.nkit.eu.org/p/iromirai/03_hub82096a1e0bd567e0b1b98831ac9f04f_298020_480x0_resize_q75_h2_box_2.webp 480w, https://blog.nkit.eu.org/p/iromirai/03_hub82096a1e0bd567e0b1b98831ac9f04f_298020_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="插图 03"
class="gallery-image"
data-flex-grow="60"
data-flex-basis="146px"
>&lt;/p>
&lt;p>「悠马先生，明天要出门吗？」 就寝时。 加奈和往常一样，为了两个人一起睡觉，身穿睡衣怀抱枕头，来到了管理人室，我告诉她明天我要出门，加奈吃惊地睁大眼睛说道。「我明白了， 会很晚回来吗？能赶得上吃 晚饭吗？」&lt;/p>
&lt;p>到哪去做些什么——加奈并没有问我这些。那是因为我并没有提及要去做的事情。 对此，加奈没有表现出不满。&lt;/p>
&lt;p>那些……虽是细节。却能让我深刻地体会到『啊啊，她非常信任我』心中满是喜悦……虽然我心里清楚，这样的想法极其单方面而且一厢情愿，我还是对她说。「抱歉啊，难得的周日，我却不得不出门一趟。有机会我一定补偿你」&lt;/p>
&lt;p>「我明白了」加奈微微一笑。「我非常期待那一次『机会』」 「谢谢……还有，我不知道几点才能回来「 「是这样吗」 突然，加奈显得有些寂寞，我和她一起躺在床上。 「抱歉。我要到远一点的地方去。很多事还没定好……要不要礼物？」&lt;/p>
&lt;p>「我要」仿佛在说「那当然要了」，加奈面露微笑。「最好是甜食」 「明白，我去找找有什么加奈会喜欢的东西」 「好的」&lt;/p>
&lt;p>在睡前静静地谈论这些，安稳的睡意自然就来了。 彼此说声「……晚安」，嘴唇相凑，陷入梦境当中。&lt;/p>
&lt;h3 id="加奈-2">加奈-2
&lt;/h3>&lt;p>「啊，哥哥。已经来了啊……」 第二天，为了履行约定，我前往『商人之镇』，按照开始信上面所写的汇合点，我来到大路的角落——在卖灯笼的店前面等待。 没过多久莲就来了，她看起来很高兴，微笑着说道。 「今天陪我一起出门，真是谢谢哥哥了」&lt;/p>
&lt;p>「啊啊，嗯。我才是，谢谢你邀请我」虽然事发突然，我有点吃惊。「能和莲一起出门， 我很高兴的……那么，然后呢？今天要做些什么。你说有……什么东西要瞒着加奈找？我记得是这样。能把详细情况告诉我吗」&lt;/p>
&lt;p>我拉着莲娇小的手，为了离开这里迈出脚步。因为买灯笼的店主满脸笑意地看着我们， 那目光究竟是什么意思……真不愉快。 配合着莲的小步伐，我们在大路上走着。对我刚见面就提的那个问题，莲点了点头说「嗯， 我明白了」，回答道。 「……哥哥，那个呢」&lt;/p>
&lt;p>似乎不太好开口，莲仰头看着我，继续说道。 「听说姐姐怀了小宝宝，是真的……？什么时候生？」 「这、这个……」 听到她直白地说出「小宝宝」这个词，说真的，我吓了一跳。&lt;/p>
&lt;p>她的这个问题自身，就让我的心里一阵风起云涌——总而言之就是类似于害羞的感情， 虽然我对这类感情心生疑惑——「啊啊……是真的」我试着这样回答她。「虽然不知道什么时候会生下来，但是，我觉得差不多要等明年冬天」&lt;/p>
&lt;p>「这样啊……」似乎莲多少也察觉到了我的害羞之情，她脸颊微红。「明年的、冬天啊……还很遥远呢」她说着，冲我嫣然一笑。 凝视着莲那绝对算是可爱的表情，我想起自己曾经和加奈商量过的某个话题。&lt;/p>
&lt;p>莲，住在与岚山荘地下室相连的异世界，『商人之镇』的一个小女孩。……与母亲「诀别」，这个可爱的小女孩年纪尚小，却不得不一个人活下去。 我们在考虑。 要不要收养莲，作为我们的孩子抚养。 如此这般。 我们现在就在商量这个事。&lt;/p>
&lt;p>现在白阿姨已经不在了，也不需要再去说明什么——莲现在就是一个人过日子。就在那幢充满她与白阿姨的回忆，一个人生活有些过于宽敞的房子里。 没错，莲现在是一个人。 虽说以防万一，邻居们对她都有所照顾。&lt;/p>
&lt;p>即使那样，这么小的一个孩子必须要一个人、无依无靠地生活下去。我真心觉得，那样实在是太寂寞了。 早上。当莲一个人从梦中醒来时，她是怎样一种心情呢。&lt;/p>
&lt;p>上午。孤零零一个人度过正午时分，吃着只做给自己一个人吃的饭，她不寂寞吗。晚上。莲在一天的终结时分又会想些什么，又是以怎样的心情，钻进被窝的。 ……不行。 自顾自地想象这些，我们真心认为……那实在太寂寞。&lt;/p>
&lt;p>正因为如此我们才考虑，能不能收养莲，让她成为我们家的一员。绝不只是出于同情， 同时也认为，我们能像对待即将诞生的亲生孩子一样，珍惜并且疼爱她。 而且，对于我和加奈间的孩子来说，莲应该能当一个好姐姐，我们也有这个想法。&lt;/p>
&lt;p>要是传达了我们的想法，莲会怎么回答。 要是她能高兴的话，我也很开心——我尽在想象这些可能有些自以为是的事情。虽然关于什么时候说，该怎么告诉她这些。还没有决定好。&lt;/p>
&lt;p>「这样啊，真的要生小宝宝呢」莲似乎感慨颇深，说得就好像在仔细咀嚼这句话的含义。 「那样的话，哥哥。在小宝宝出生之前呢……」 莲和我手牵着手，一边在大路上走着，一边告诉我她今天的计划。&lt;/p>
&lt;p>「想让你和我一起，去找四片叶子的三叶草。那就是今天要做的事情。哥哥」 「四片叶子的三叶草？」 我眼前一亮，莲点了点头说「嗯，是的」，表情放松下来，就好像是在微笑。 「四片叶子的三叶草的花语是『幸福』……就是幸福的证明」&lt;/p>
&lt;h3 id="加奈-3">加奈-3
&lt;/h3>&lt;p>把莲到附近的公园。 「……这里也有四片叶子的三叶草啊」 和我手牵着手，莲很不可思议地注视公园，这里并不是商人之镇，而是在风津之滨。&lt;/p>
&lt;p>从「商人之镇」回到学生宿舍，我们来到这 里。 四片叶子的三叶草。虽说迄今为止我都 没有刻意去找过。大概能找到它的地方……我就 只能想到这里了。&lt;/p>
&lt;p>不对。我觉得三叶草在『商人之镇』也是普遍存在的。也不用特意到这里来找。不过，难得和莲一起出趟门。出远门…… 虽然是不行，把莲从她 『平时居住的地方』带出来看看，我觉得那样挺好的。&lt;/p>
&lt;p>&lt;img src="https://blog.nkit.eu.org/p/iromirai/04.webp"
width="1488"
height="2412"
srcset="https://blog.nkit.eu.org/p/iromirai/04_hu86ca3df90780bfa90f03f07af0116ee6_96860_480x0_resize_q75_h2_box_2.webp 480w, https://blog.nkit.eu.org/p/iromirai/04_hu86ca3df90780bfa90f03f07af0116ee6_96860_1024x0_resize_q75_h2_box_2.webp 1024w"
loading="lazy"
alt="插图 04"
class="gallery-image"
data-flex-grow="61"
data-flex-basis="148px"
>&lt;/p>
&lt;p>而莲的装束是平时穿着的和服以及狐狸面具——嘛并不是。 她今天穿的是纯白的连衣裙。可是西洋风格的。 「感觉不太好行动啊，哥哥」 摸着纯白色连衣裙的裙边褶皱，莲嫣然一笑。 和平常不一样的装束。 我觉得很可爱。 当然，这是看待妹妹的那种心情。&lt;/p>
&lt;p>将平常总是束着的头发放了下来，伸展到肩部下面，发端随风飘扬。第一次看到她这样的发型。我觉得那样也非常可爱。也觉得这个发型很适合她。 为了藏住她那一对狐狸耳朵而买的草帽似乎是有点小了。没能完全藏住耳朵，帽子就歪着戴在她头上。&lt;/p>
&lt;p>莲双手撑着草帽，向我道了好几次谢。「哥哥，谢谢你。洋装，我会珍惜的」&lt;/p>
&lt;p>在来公园之前，我们先在商店街买好衣服，自换好衣服以后，莲就一直扭扭捏捏的，目光看起来很不安「……吶，这个合适吗？没什么奇怪的地方吧」。还说她还没有穿过和服以外的衣服什么的。 「没事。非常合适的」&lt;/p>
&lt;p>「诶嘿嘿」听了我的话，莲微微一笑。「但是……给我买这个真的好吗，哥哥，这个很贵的吧……」&lt;/p>
&lt;p>「不啊。没事。没关系的。你不用在意。价格不是多高」我笑了笑，说这没什么大不了的。「……而且啊，我总觉得，今天想让莲做些与往常不同的事。不如说这就是我的一点任性，让莲穿上这件西洋装。嘛，这个是，就是让你听从我的突发奇想。所以那个……该怎么说呢。就是，辛苦费？要是你能以那种形式收下这个，我会很高兴的。或者是提早送你生日礼物，差不多就这么回事吧」&lt;/p>
&lt;p>我拉着莲的手，为了开始寻找四片叶子的三叶草，进入公园。 「……这里真有四片叶子的三叶草吗？」 不知这是她第几次表示疑问，我和莲一起，来到长在公园树荫下的三叶草群，坐了下来。 「是啊，我们一起找吧」&lt;/p>
&lt;p>两个人一起蹲下来，正如我刚刚所说的那样，扒开三叶草的根部寻找。&lt;/p>
&lt;p>……这种事，大概有多大概率能找到。我当然不擅长找花这种事，也没干过。所以我不是很懂……要是在三叶草密集的地点，就一定会出现长有四片叶子的特别三叶草吗。要是那样的话，其出现概率还能用数值表现吗。搞不明白。也许那个概率是用统计的数量而推导出来的，而不是固定数据。说不定，我这个想用数值来体现这种概率的想法自身就愚蠢至极……&lt;/p>
&lt;p>啊啊，我真搞不懂。在一大群植物当中找出仅有一叶之差的个体——感觉我就像个偷窥狂，&lt;/p>
&lt;p>在成百上千人穿行的大路上聚精会神地寻找目标……分辨有价值与毫无价值的基准还真是不可思议。该称之为国民性吧，感觉他们对与周围相异的事物有着非同寻常的排挤行为，就像是洁癖一样的一面。但与此同时，他们又会像这样，将与和同类有所差别的事物视为特别，&lt;/p>
&lt;p>某种意义上来说就是崇拜，甚至心存感激，为其举办祭典。我多多少少，也有这样的一面。所谓常识、人类、一般的价值观当中。全是些矛盾和偏见，即使那并不是毫无意义的。&lt;/p>
&lt;p>等等等等。 当我思考着这些傻到家的事情，在三叶草里寻找四叶草的时候…… 「噢，找到了」 我所寻找的东西出现在眼前。 找了不到十五分钟。 把找到的草摘下来之前，我叫来莲，让她来看。&lt;/p>
&lt;p>「我还以为要找到这个会挺难的，能找到的时候、还是很快的嘛」我笑了笑说，有点太简单了。&lt;/p>
&lt;p>带这个回去……然后，莲想做些什么呢。嘛，等回去以后再慢慢问她吧。虽然我心里是这么想的…… 「诶……？」 但是莲并没有以笑容回应我。她的表情很是不可思议，一脸不解 「那个……？是四叶草吗？」 「嗯？……不是吗？」 难道是，我看错了。&lt;/p>
&lt;p>我再一次仔细地看看它。 ……果然，那就是四片叶子的三叶草。 叶子一共四片。既不是一片，也不是三片，更不是五片。 「莲。这个应该就是的吧……」 「哥哥。抱歉。这个和我所认识的三叶草好像不太一样」 莲一脸内疚地看着我所找到的四叶草。&lt;/p>
&lt;p>「诶、啊、这样啊……」 那时我心想：糟了。 为什么我迄今为止都没有察觉到，连想都没有想过。 看到莲的反应，我确信了。 在『商人之镇』的那个世界所生长的三叶草，和这个世界的三叶草不一样。 ……要说那是理所当然，也许还真是理所当然。&lt;/p>
&lt;p>说不定，莲所寻找的三叶草，原本就不会长在这种平凡的地方…… 而我现在才想起来， 一开始来到公园时莲的反应。就好像拼图的碎片出人意料地凑成一个整图，让我立即想通了。&lt;/p>
&lt;p>似乎那对莲来说也是一样的，她告诉我「那个呢，在我的世界里的三叶草啊」。还加了一句「一开始没有说明清楚，对不起」。 「那个呢。在我的世界里的三叶草，非常非常漂亮的。就像花一样」 「像花一样」 「嗯。就像太阳一样，亮闪闪的」&lt;/p>
&lt;p>「好厉害」我不禁感叹道。「那的确配得上『幸运之证』这一花语」 ……那样的话，到这里来也许就是白跑一趟了。 另一面，我能看到莲可爱的模样，这样也不坏。我很快就想开了。而且，这么快就找到四叶草，明白是我搞错了。真是太好了。&lt;/p>
&lt;p>我将刚才找到的四叶草摘下，插在莲草帽的带子之间。「哥哥……？」 「这是守护符，祝愿莲能遇到什么好事……我们这个世界的三叶草，也能让人得到幸福， 不输给你们的三叶草」 我想看一看莲所说的那种漂亮的三叶草。&lt;/p>
&lt;h3 id="加奈-4">加奈-4
&lt;/h3>&lt;p>「抱歉，哥哥」莲一脸内疚地仰头看我，这样说道。「要是我一开始说清楚就好了…… 三叶草长在很远的地方」 莲所寻找的四片叶子的三叶草，好像生长在别的世界。要从『商人之镇』那里穿过门， 前往另一个世界才能找到。 要穿过另一个世界。&lt;/p>
&lt;p>距离有点远。 虽然莲说了，这也不是一场困难重重的旅行。 但是，这条路并不好走。距离越远，发生意外的可能就越大，我可以这么认为。我们所寻求的花绽放在远方…… 正因为如此，当我带着莲来到公园时，她才会很不可思议地、抑或是很惊讶地问我「……&lt;/p>
&lt;p>这里也有四片叶子的三叶草啊」。以为即使不踏过漫长的道路，也能在这么近的地方找到四叶草。 要穿越一个世界…… 就今天一天，能走完这个来回吗。我很担心这点。&lt;/p>
&lt;p>我们已经花了上午的一些时间。花在公园的搜索上了，我差点认为那是白费功夫。虽然我跟加奈说过了有可能要晚归，但是我也说了晚上就能回来。&lt;/p>
&lt;p>和莲一起回到『商人之镇』，拜托镇民，得到了通向长有目标三叶草的世界的路线图。我打开地图，和莲两个人一起看。 「呃……该怎么去呢」在展开的地图上，调查道路还有必须要经过的世界。 「…… 原来如此，相对我的世界，时间的流动要慢很多啊」&lt;/p>
&lt;p>地图是以『商人之镇』为基准，编写者调查好各个世界的时间流动，详尽地记述在地图上。听说是时雨先生一时兴起之作。在这上面，还写有我们的世界、风津之滨的世界。根据这个地图，往返所需的体感时间是一天。在风津之滨，我大概今天晚上就能回来。&lt;/p>
&lt;p>「……好，决定了。思索也只是浪费时间」 难得来到这一步。 去找吧。 似乎今晚就能回家。只要不发生什么意外。只要不让加奈操心，就没什么好犹豫的。&lt;/p>
&lt;p>「那么，得带很多食物之类的东西呢」 莲很开心地说道。我和她一起，在『商人之镇』的大街上采购。 饭团、甜食、装在竹筒里的茶。等等，旅行必需的各种物品……但是，为了不让负担太重，还要权衡一下…… 「莲，感觉要走很长一段路，你不用勉强的」&lt;/p>
&lt;p>买好东西，在说「好，出门吧」这句话之前，以防万一我向她确认。 「要是有那个的话，还有地图，我一个人也能去找的，莲在这里等我就是了」 「『那个』？要是有『那个』的话，是什么意思？」 莲很是吃惊。&lt;/p>
&lt;p>「不是，这个，该怎么说」我面露苦笑「我的说法不好懂，抱歉啊……嗯，我重说一遍。感觉会很辛苦，要是太艰辛的话，莲在这里等我就是了，我是这个意思」&lt;/p>
&lt;p>要是必须走很长一段距离，很明显，对于莲娇小的身体来说，负担要大很多。但是我知道，无论路途有多么艰苦，莲也不会抱怨说「我累了」，和人闹别扭——正因为如此，我就更不想勉强她了。与其让她受累，还不如我一个人完成一切。&lt;/p>
&lt;p>「……不，不行的」但是莲使劲摇晃她那小小的脑袋。「因为，是我拜托了哥哥，我怎么能只让哥哥一个人努力、说什么一路走好。所以，我也想跟着你走，哥哥」&lt;/p>
&lt;p>「……这样啊」我不禁面露微笑。在他人眼中，莲的主张是也许是理所当然。极其平常的想法……但是，她的这个理所当然，令我非常高兴。因为我知道莲在过去，还只是躲在白阿姨身后瑟瑟发抖，对新奇的一切都感到畏惧。她的成长自然可喜。&lt;/p>
&lt;p>「而且啊，就一个人一直走着，是很寂寞的」莲说道。「要是寂寞了，很快就会累的。但是，要是和哪个人在一起，比起一个人也许要轻松很多……也许能走得更加快……」 「是啊。你说的没错……谢谢」&lt;/p>
&lt;p>莲是个非常好的孩子。 我们决定两个人一起，去寻找三叶草。&lt;/p>
&lt;p>「小莲，小莲」 途经一个店铺时，店铺的女店主挥了挥手。我们停下来。 「给，这个。我得到了『巧克力』这种东西，你拿去吧」店主将其看作外面世界的稀少点心，递给莲一片巧克力板。那是祝愿我们一路顺风的饯别礼。「你的衣服很可爱呢，发型也非常可爱」&lt;/p>
&lt;p>「诶嘿嘿，是哥哥买给我的」 「是吗，那真是太好了」 「嗯……！」 莲高兴地点点头。 「谢谢你，婆婆。我出发了！」 莲精神十足地打着招呼，我就走在她身旁，镇民们目送我们离去。 准备已经全部做好…… 好，出发吧。 这段短暂而漫长的旅行开始了。&lt;/p>
&lt;h3 id="加奈-5">加奈-5
&lt;/h3>&lt;p>我们启程了。 最先经过的世界里下着雨。 无休止的小雨下了几百年、几千年、几万年。我们俩穿过这个天空灰暗的世界。途中，在云间发现了彩虹。 那好像是数百年一次的瞬间，全世界的人们朝天空欢呼，不是奏乐就是倒酒，路上热闹无比。&lt;/p>
&lt;p>……在无止境的小雨中，数百年仅有一次的七色彩虹出现。我感觉，那像在预示着什么。 感觉到我们接下来的旅程，会有什么巨大而且温柔的力量，虽然眼睛看不到，但这力量会守护我们——这么一想，前进的脚步自然多了一分力量。&lt;/p>
&lt;p>「彩虹，很漂亮呢」手牵着手，莲冲我笑了起来。「走过去的人们看起来都很高兴」 「啊啊，是呢……我们也要努力，为了让加奈像他们那样高兴」 即使对于我们来说『彩虹』是理所当然的日常，对他们来说那就是奇迹。&lt;/p>
&lt;p>……而我们继续旅行，追寻着对于我们来说非同寻常的奇迹。&lt;/p>
&lt;h3 id="加奈-6">加奈-6
&lt;/h3>&lt;p>究竟花了多长时间，走了多长距离呢。我们抵达了目的地。 ……那是一个春天的世界。 樱花悄然飞舞，落樱缤纷的这幅景象着实优美。 吸入胸腔的空气本身仿佛就带有一种甜味。&lt;/p>
&lt;p>我突然停下，刻意忘掉每一秒流逝的时间，心里强烈地意识到，我想永远欣赏映入眼中的所有樱花。 不过。 明明相信着这里存在，可在这个桃色的地方，却并没有找到我们所寻求的——三叶草。 不对。 『没有』这个词用得并不对。&lt;/p>
&lt;p>要得到它，远比我们所想象的要困难多了……这样说，应该要更加正确。 「……好不容易来到这个地方」 好像是彻底消沉下来，莲表情黯然。从神色中能看出她很疲倦。 这也难怪。 因为我们几乎没有休息，就这么一路走了过来。&lt;/p>
&lt;p>……无意间我们深信，只要到达这里，接下来就好办了。 「没想到，全都枯萎了……似乎我们来得有点晚」 对，三叶草全都枯萎了。 就在跟前的这片似乎曾是三叶草花田的高原地带，如今是一片土黄色的荒地，令人毛骨悚然。 说是枯萎了，这个说法也许有点夸张。&lt;/p>
&lt;p>好像是，今年三叶草的全盛时期相比往年要结束得早一些。 而且—— 据住在春之世界里人们所言。这个世界所生的四片叶子的三叶草，作为幸福的守护符，&lt;/p>
&lt;p>在各个观光地里的纪念品当中是最有名的，从需求到供给可是完完整整的一条龙，交易极其顺畅。他们还告诉我们，这片花田的所有者独占了三叶草的栽培权。当然，除了这片花田， 就没有别的农场培育三叶草了。种在这里的就是全部。完全告罄，一株都没剩下。&lt;/p>
&lt;p>……如果无论如何都想要，就明年再来。似乎情况就是这样。 「…………」 那么。该怎么办。 感觉就这样空手而归也太不甘心了。话虽如此，我们肯定是无能为力。我们俩就一直盯着茶色的平地看，不久之前这里还是一片茂绿吧。 随后。&lt;/p>
&lt;p>「你们，正在找四片叶子的三叶草吗？也许在那座山上还有」 有一个男人。 看着我们两个人一起发呆，一个男人对我们说道。他就是这座花田的所有者。&lt;/p>
&lt;p>「你们看，就是那座山。能看见吧。面前最高的一座山……我一直都是去那座山上采集三叶草的种子。也许，那里还有没枯萎的四叶草吧」 眼前……走路大概要三十分钟的距离……我指向在那附近高耸云端的山峰。 「就是那座山的山顶吗？」&lt;/p>
&lt;p>我仰头看向男人所指的山顶。 「啊啊，就是那里。」男人点了点头说道。「一到这个时期，会有很多登山客过来。都是些观光客或者附近的居民吧。过去做些类似于赏花的事情。我还以为你们也是那些人的一员」 「…………」&lt;/p>
&lt;p>我仰头看去，望向山的顶端。我们求之不得的四叶草群，就长在那里。单从我这边看来，山并没有多高。 大概还要看道路的情况如何，我觉得即使不好，如果只有我一个人前往，差不多二、三小时，就能来回一趟。&lt;/p>
&lt;p>说真的，要登不熟悉的山是有点令人不安。但是不上山，难道我们就这样空手而归吗。那种结果也太不讨人喜欢了。那么，该怎么办。我陷入思考。 在我身旁，莲正非常内疚地仰头看我…… 同时我陷入沉思。&lt;/p>
&lt;p>男人说「去的话可要小心点啊。山上天气多变，说不定还会下雪。」而陷入沉思当中的我,甚至连他的忠告都没有听见……&lt;/p>
&lt;h3 id="加奈-7">加奈-7
&lt;/h3>&lt;p>我决定上山。 「这条道还挺难走的啊……虽然这样对莲不好，就我一个人上来说不定还真是正确的。等回去了，还得再一次向那个男人道谢」&lt;/p>
&lt;p>——几十分钟前。在农场里。 为了找到所寻的东西而上山。虽然莲也想跟过来……&lt;/p>
&lt;p>但是，这一次实在是不能带年纪还小的莲过去了。据说山上都是些没有铺装的野兽道。要是还有陡峭不平的石路。那里还有可能长有一人高的繁茂杂草，就必须要边走边扒开杂草。即使是大人，一个来回也需要好几个小时。我不想勉强莲。要是受了伤可就糟糕了……要只是点小伤倒没什么，要是发生了更加严重的情况我该如何是好……我是这么考虑的。&lt;/p>
&lt;p>万一莲出了什么事，我该怎么向白阿姨交代。 但是，话虽如此，就让莲一个人待在不熟悉的地方也…… 真不好办了。 ……也许我们所寻求的东西就在眼前。 难道就这样迈着沉重的步子，满怀遗憾地踏上漫长的归路吗。 朝着那座山峰，我一直投以不甘心的目光。&lt;/p>
&lt;p>感觉已经无计可施。 而之前的那个农夫，现在再一次向我搭话。 「要是你们很困扰，可以让那个孩子待在我家里」 这个提议对我来说真的是求之不得。 其实我都想飞过去感谢他。但是。 ……那得是我认识的人对我这么说。&lt;/p>
&lt;p>「没事，你不用担心。也无需警惕。我觉得我虽然算不上什么好人，也不算多坏」 男人笑了起来，露出洁白的牙齿。 ……把莲交给不太熟悉的男人照顾，这样好吗。说实话，我是没法完全放下警惕。&lt;/p>
&lt;p>但是，当农夫招待我们来到他的家时，隐隐约约能看出，他在对待家人的时候态度非常和蔼。「抱歉啊，要是我也能陪你一起就好了……之前干一点活的时候弄伤了脚。现在这个状态真的上不了山」表情满是内疚，农夫拿给我通往山顶的地图，还有装满茶的水筒，听他说这个茶很甜，可以治愈身体的疲劳。从这个男人身上……能感觉到一点奇妙的氛围——可以寄予他无条件的信赖。&lt;/p>
&lt;p>但我没有只凭「氛围」这类模糊不清的感觉来做出决定。不能把事情想得太过简单了。 「为什么您会对我们这么好呢？为什么要帮我们？」 「为什么啊，谁知道」我对男人的好意感到不解，而他则面露苦笑，显得有些不好意思，&lt;/p>
&lt;p>男人小声告诉我「我只是感觉，必须要这么做而已……我要说的话有点奇怪，你可别吓着了啊。我做了一个梦。差不多是在两天前吧。梦里有个人对我说：『三天内会有一个青年，带着长着狐狸耳朵和尾巴的奇妙女孩、到你这里来。然后，请你一定要帮帮青年……帮帮那两个人。』一个陌生男人就那样、神情紧张地拜托我」「那是一个有无数书本和羽毛飘落的梦呀」男人仿佛在缅怀往昔一般说道，「某个不认识的人拜托我。而且还是在梦中嘛，所以那也就是个有点怪的梦，我之前都忘得一干二净……就像梦中的那个人所说，你们不就到这里来了吗。她有狐狸耳朵和狐狸尾巴。我吃了一惊。就是因为吃惊，才会让人有种必须要这么做的感觉吧，你说是不是？」&lt;/p>
&lt;p>即使我无法理解男人的说法——但不知为什么，心中的疑惑消散殆尽，我感到释然。可以放心交给这个人。 我有种这样的感觉。&lt;/p>
&lt;p>于是我接受了男人的建议，和莲约好了说「马上就回来，你在这里等我」，出发了。这个农场主有家人，还有和莲差不多大的孩子。我向莲还有农场主拜托说：「能不能让她和这里的孩子们一起玩，等着我回来。」&lt;/p>
&lt;p>「嗯，我知道了……要小心啊，哥哥」莲有些担心地说道，「路上要是饿了，就吃这个……」她还把在『商人之镇』从店主那里得到的巧克力送给了我。农夫也笑着说：「我的孩子们也没事干。要是你能替我看着他们，就帮大忙了」 于是，我正在一个人登山。&lt;/p>
&lt;p>只带最低限度的行李，我在山道上轻装行进，每一脚都踩实了走。 「……时间还算够用吧」 仰头望去，天是一片苍蓝。还没到太阳落山的时候。 我有感觉，如果不在夜晚来临前完成目标，事情会很糟糕。&lt;/p>
&lt;p>虽然农场主借了灯给我。于夜晚时分，在这山道穿行决非易事。对于并不习惯登山的我来说，就更是如此。 因此，必须要在夜晚之前完成任务。然后…… 「……好冷」 伴随海拔升高，寒冷也渐渐增加，深刺骨髓。气温一味下降。&lt;/p>
&lt;p>因为顶峰附近非常寒冷，农场主借给了我一件厚厚的宽夹克，我再一次将夹克的衣领拉好。 「山顶会更加寒冷…吗」 ……我继续前进。 同时在心中感到些许不安，在这严寒之中，真有尚未枯萎的三叶草存在吗。自开始登山，已过去几个小时。&lt;/p>
&lt;p>当我把水筒里的茶喝掉一半的时候，我平安无事地到达了山顶。&lt;/p>
&lt;p>「……啊啊」 我不禁感叹。 数不清的三叶草生长在顶峰。在那当中，我找到了。也没有必要去仔细找，四片叶子的三叶草就在其中大放异彩。啊啊，这个的确就像花一样美丽。感觉随便一两个愿望，它都能轻而易举地实现。&lt;/p>
&lt;p>要是把这个带给加奈，她一定会很高兴的吧……我现在就很期待。长着四片闪闪发光的叶子，拥有独特个性的三叶草。 ……这份璀璨，让我想起从前和加奈、莲还有步和时雨先生一起旅行时得到的『太阳碎片』。 「呼」 呼出一口气。 ……真漫长。&lt;/p>
&lt;p>直到现在这一步，真是非常非常漫长的旅途。体感时间有好几天的旅程。 再加上好几个小时的登山，才见到这片光景。 在直面那片已经枯萎的三叶草田时，我还想这样就只能放弃了。 即便如此，我还是像这样得到了四叶草……再怎么样，多多少少还是有一些感慨的。&lt;/p>
&lt;p>「不行」我晃晃脑袋，让心情紧张起来。「……我可没有时间休息。得快点回去」 仰望天空。 虽然距傍晚还有一段时间，我想趁着还能看清自己脚下的时候，赶快下山。我还没有那么草率，以至于小看这段并不熟悉的山道。&lt;/p>
&lt;p>我是想面向这幅光景，从山顶望见的风景等等，稍作小憩。可还是咬牙忍耐住了。 我从包里取出玻璃瓶，将摘下的三叶草放进里面。回去的时候必须小心再小心……我实在是没有体力、精力或者时间，再一次登上这里了。 「好。目的达成了。莲还在等我。尽快回去吧」&lt;/p>
&lt;p>我快步离开山顶。&lt;/p>
&lt;h3 id="加奈-8">加奈-8
&lt;/h3>&lt;p>我绝不是小看了登山。 看到眼前的绿色不断加深，我感到焦急。 一次又一次扒开形似于一枝黄花的杂草，不断前进。 在这没有铺路的道上，每迈出一步，体力就会遭到削减。来到一个开旷的地方。 啊啊…… 叹了一口气。 抬头望向天空。&lt;/p>
&lt;p>「……来的时候，我走过这条路把」 直戳了当地说，我迷路了。 自离开山顶以后，已经过去好几十分钟。我就在同一个地方兜圈子，在陌生的地方不停奔走。 不妙。 仰头望去，时辰已临近夜晚。&lt;/p>
&lt;p>这样下去会弄到晚上。 我还是做好在山里度夜的准备比较好吧。嚼了一口莲送给我的巧克力。 好甜。 感觉自己得到了些许满足。 要是有什么万一，就凭这个也能撑好几天吧。 ……如此这般。 微妙的消极想法掠过了脑海。&lt;/p>
&lt;p>我晃晃脑袋，让意识集中起来，继续前进。心想，不能停滞不前。 也不能随便乱走。 ……也就是说，我现在十分混乱。即使我自己并没有这么认为，即使我觉得自己很冷静， 即使我非常清楚自己必须保持冷静，焦躁还是接踵而至。 「……唔唔，好冷」&lt;/p>
&lt;p>伴随夜幕降临，气温一下子降了下来。 「还有可能会下雪吧」 天上的灰云鼓得很厉害。仿佛那硕大的雪之结晶、无需多久便会飘落而下。 虽然有农夫借给我的宽夹克，我穿得是不算薄，但就凭现在这个装备，能平安熬过下雪的夜晚吗。 很不安。很担心。&lt;/p>
&lt;p>内心非常焦急。 膨胀起来的尽是这类感情。我不禁叹了一口气…… 随之。 正当我叹气的时候。 「真是的，就是不知道给人省省心，莲」 有声音传来，伴随树枝随风摇动的声音。 以为是什么恶心的山中怨灵出现了，我警惕起来。 「……兔子？」&lt;/p>
&lt;p>但是，从我面前的杂木丛中蹦出来的，是浑身雪白的一只兔子。 「…………」 出现在眼前的兔子抬着头，深红色的眼睛直盯我看。 「怎么了。难不成你是想被人吃掉吗。好嘛。我正在琢磨今天的晚饭该吃什么。也想节约巧克力。就吃你好了」&lt;/p>
&lt;p>而我只是想找个聊天对象……就只是迷了几个小时的路。我却完全为不安所支配。 兔子就像人那样转过身来，拔腿就跑—— 不过它跑了一段路就停下来，又转身看我。它就待在那里，过了好长时间都没走。 一直都在看我这边。 「……怎么了？」&lt;/p>
&lt;p>想都没想，我朝着它所在的方向迈出一步…… 兔子立刻逃也似地撒腿跑开。 可是当我停下来，兔子又像之前那样停下来，转身看我。 「……搞什么玩意啊，你这家伙」 我跟着兔子跑。&lt;/p>
&lt;p>「…………」 兔子往前跑。 「…………」 我追赶它。 「…………」 兔子在靠前一点的地方等我。 「…………」&lt;/p>
&lt;p>我的现在已是走投无路……刚才听到的声音是什么。难道是这只兔子发出的。我听错了……？是我把树叶的摩擦声和人的说话声搞混了吗。 我太过不安，太过孤独。所以我很可能误会……虽说这非常丢脸。 道路逐渐往茂林的深处发展。天空渐渐变暗。&lt;/p>
&lt;p>停下来又去追赶……都重复多少次了。&lt;/p>
&lt;p>「……我究竟在干些什么」 追赶兔子追了好几十分钟。我差不多开始厌倦了。 「差不多，该准备露营了」 再这样继续消耗体力，很难说得上是明智之举…… 正当我开始这么想的时候。&lt;/p>
&lt;p>「啊……」 在黑暗的前方——我看到了光。「灯光……？」 啊啊。没错。 就是灯光……！ 我连滚带爬地朝着那个方向跑去。 「啊、啊啊……」 安心的一声叹息从口中漏出。 那就是农场的灯光。莲就在那个农场里等着我。&lt;/p>
&lt;p>「……太好了」再一次叹气。感觉浑身都要软下来了。「还以为得做好野营的觉悟，我平安无事地、回来了……」 吹来一阵风——仿佛要吹散我安心的叹息和低语。然后，顺着风，我又听到了声音。&lt;/p>
&lt;p>「……求你了。不要勉强自己。你必须要活很久。无论你活在哪个世界，和谁一起活下去」&lt;/p>
&lt;p>这一次，我听得一清二楚。 绝不是什么树枝摇动的声音……对，我只能这样想。 应该就是那只兔子把我引导到这里来，而它……已经消失得无影无踪。&lt;/p>
&lt;p>「哥哥……！」 看到我安全抵达农场，莲扑进我怀里。 「我很担心你的，因为你过了好久都没回来……」 「对不起，对不起啊。让你担心了」 一抱紧她那娇小的身体。我再一次意识到，「啊啊，我回来了」，这种安心的一声叹息充斥了精疲力尽的身体。&lt;/p>
&lt;p>「……回去吧，加奈等着我们呢」&lt;/p>
&lt;p>接受农场主的好意，我们在他的家里住了一晚，第二天，约定好改日会再来道谢，我们便踏上归途。 ……拿好费尽千辛万苦才得到的、光芒璀璨的幸福之证，为了不弄丢，小心翼翼地带在身上。&lt;/p>
&lt;p>「你、你们两位这都是怎么了，怎么浑身都是泥呀……」 当我们回到宿舍时，出来迎接我们的加奈一脸讶异。还问「这半天里究竟发生了什么」。 「半天……啊啊，半天、吗」&lt;/p>
&lt;p>我和莲面露苦笑，看着彼此……确实是半天。在这个世界里，才过去不到半天。在这么短的一段时间里，真的发生了很多事。真的是很多很多。 「加奈，其实我有礼物要送你」 我和莲两个人一起，从我背着的包里拿出放有三叶草的玻璃瓶子。&lt;/p>
&lt;p>「要是你能顺便听一下有关这个礼物的故事，我们就更加高兴了」 「诶，这个是……」 「啊啊……可能说来话长，你能听一听吗」 心中满是这样的预感——我们今后的道路，大概会有各种小事件和问题的衬托，而不断延续。 那么。该从哪里开始说起。啊啊。&lt;/p>
&lt;p>……无需多想。 「那个啊，加奈。果然，在讲礼物的故事之前，还是先讨论一下之前说的那个、想把莲认作我们的孩子那个事情……」 「诶？」 身旁的莲一脸惊讶。 脑袋上的狐狸耳朵抖了一下。加奈叹着气，同时面露微笑。 虽然这次旅行是有一点艰辛。&lt;/p>
&lt;p>……莲会高兴吗。 她会接受我们的想法吗。 现在，我对几秒后即将发生的未来，感到无比期待。&lt;/p>
&lt;blockquote>
&lt;p>未完，以上只是真红和加奈部分。&lt;/p>
&lt;/blockquote></description></item><item><title>关于</title><link>https://blog.nkit.eu.org/about/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://blog.nkit.eu.org/about/</guid><description>&lt;p>猫猫遇到了喵喵，&lt;/p>
&lt;p>猫猫牵起喵喵的手，&lt;/p>
&lt;p>这是猫猫的笔记本，&lt;/p>
&lt;p>猫猫想把这些美好的事物都记录下来。&lt;/p></description></item><item><title>归档</title><link>https://blog.nkit.eu.org/archives/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://blog.nkit.eu.org/archives/</guid><description/></item><item><title>搜索</title><link>https://blog.nkit.eu.org/search/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://blog.nkit.eu.org/search/</guid><description/></item></channel></rss>